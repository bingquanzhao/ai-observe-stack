{"version":3,"file":"495.js?_cache=65d6997e40e575d23e15","mappings":"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","sources":["webpack://doris-app/./components/discover-filter/discover-filter.style.ts","webpack://doris-app/./components/discover-filter/filter-content.tsx","webpack://doris-app/./components/discover-filter/index.tsx","webpack://doris-app/./utils/icon.tsx","webpack://doris-app/./utils/tailwind.ts","webpack://doris-app/./components/discover-sidebar/field-item/top-data/top-data.tsx","webpack://doris-app/./components/discover-sidebar/field-item/field-item.tsx","webpack://doris-app/./components/discover-sidebar/filter-content/filter-content.tsx","webpack://doris-app/./components/discover-sidebar/index.tsx","webpack://doris-app/./components/discover-histogram/index.tsx","webpack://doris-app/./components/selectdb-ui/sd-collapsible-table/index.tsx","webpack://doris-app/./components/discover-content/discover-content.style.ts","webpack://doris-app/./components/discover-content/content-table-actions.tsx","webpack://doris-app/./components/discover-content/json-viewer.theme.ts","webpack://doris-app/./components/discover-content/content-item.tsx","webpack://doris-app/./components/surrounding-logs/surrounding-content-item.tsx","webpack://doris-app/./components/surrounding-logs/logs-actions.tsx","webpack://doris-app/./components/surrounding-logs/discover-filter/discover-filter.style.ts","webpack://doris-app/./components/surrounding-logs/discover-filter/filter-content.tsx","webpack://doris-app/./components/surrounding-logs/discover-filter/index.tsx","webpack://doris-app/./services/sql.ts","webpack://doris-app/./services/discover.ts","webpack://doris-app/./components/surrounding-logs/content/content-table-actions.tsx","webpack://doris-app/./components/surrounding-logs/index.tsx","webpack://doris-app/./components/discover-content/index.tsx","webpack://doris-app/./components/discover-header/discover-header.style.ts","webpack://doris-app/./components/discover-header/search-type.tsx","webpack://doris-app/./components/discover-header/sql-search.tsx","webpack://doris-app/./components/discover-header/lucene.tsx","webpack://doris-app/./components/discover-header/index.tsx","webpack://doris-app/./utils/query-parser/tokenUtils.ts","webpack://doris-app/./utils/query-parser/constants.ts","webpack://doris-app/./utils/query-parser/sqlstring-browser.ts","webpack://doris-app/./utils/query-parser/enums.ts","webpack://doris-app/./utils/query-parser/utils.ts","webpack://doris-app/./utils/query-parser/serializers.ts","webpack://doris-app/./utils/query-parser/ast.ts","webpack://doris-app/./utils/query-parser/query-parser.ts","webpack://doris-app/./services/lucene.ts","webpack://doris-app/./pages/PageDiscover/useLuceneWhereClause.ts","webpack://doris-app/./pages/PageDiscover/useDiscoverData.ts","webpack://doris-app/./pages/PageDiscover.tsx","webpack://doris-app/./components/testIds.ts"],"sourcesContent":["import { css } from '@emotion/css';\nimport styled from '@emotion/styled';\n\nexport const DiscoverFilterWrapper = styled.div`\n    display: flex;\n    align-items: center;\n    .filter {\n        align-self: flex-start;\n        margin-top: 3px;\n        margin-right: 8px;\n        font-weight: 500;\n        font-size: 14px;\n        font-style: normal;\n        line-height: 18px;\n    }\n    .filter-tag {\n        display: flex;\n        flex: 1;\n        flex-wrap: wrap;\n        align-items: center;\n        row-gap: 8px;\n        column-gap: 8px;\n        padding: 0 8px;\n        .tag {\n            display: flex;\n            align-items: center;\n            max-width: 400px;\n            height: 24px;\n            padding: 2px 8px;\n            font-weight: 400;\n            font-size: 12px;\n            font-style: normal;\n            line-height: 18px;\n            border: 0px;\n            border-radius: 6px;\n            .text {\n                overflow: hidden;\n                white-space: nowrap;\n                text-overflow: ellipsis;\n            }\n        }\n    }\n`;\n\nexport const containerStyle = css`\n    width: 320px;\n`;\n\nexport const rowStyle = css`\n    display: flex;\n    gap: 8px;\n    margin-bottom: 12px;\n`;\n\nexport const colStyle = css`\n    flex: 1;\n`;\n\nexport const footerStyle = css`\n    display: flex;\n    justify-content: flex-end;\n    gap: 8px;\n    margin-top: 16px;\n\n    & button {\n        flex: 1;\n        display: block;\n        text-align: center;\n        \n        span {\n            display: inline;\n        }\n    }\n`;\n","import { useAtom, useAtomValue } from 'jotai';\nimport React from 'react';\nimport { nanoid } from 'nanoid';\nimport { Select, InlineField, InlineFieldRow, InlineSwitch, Button, Input, Field } from '@grafana/ui';\nimport { tableFieldsAtom, dataFilterAtom, tableFieldValuesAtom } from 'store/discover';\nimport { DataFilterType, Operator } from 'types/type';\nimport { OPERATORS } from 'utils/data';\nimport { Controller, useForm } from 'react-hook-form';\nimport { containerStyle, rowStyle, colStyle, footerStyle } from './discover-filter.style';\n\nexport function FilterContent({ onHide, dataFilterValue }: { onHide: () => void; dataFilterValue?: DataFilterType }) {\n    const tableFields = useAtomValue(tableFieldsAtom);\n    const [dataFilter, setDataFilter] = useAtom(dataFilterAtom);\n    const tableFieldValue = useAtomValue(tableFieldValuesAtom);\n\n    const {\n        control,\n        handleSubmit,\n        watch,\n        register,\n        formState: { errors },\n    } = useForm({\n        defaultValues: {\n            field: {\n                label: dataFilterValue?.fieldName,\n                value: dataFilterValue?.fieldName\n            },\n            operator: {\n                label: dataFilterValue?.operator,\n                value: dataFilterValue?.operator\n            },\n            value: dataFilterValue?.value,\n            minValue: Array.isArray(dataFilterValue?.value) ? dataFilterValue?.value[0] : '',\n            maxValue: Array.isArray(dataFilterValue?.value) ? dataFilterValue?.value[1] : '',\n            label: dataFilterValue?.label || '',\n            showLabel: !!dataFilterValue?.label, // Initialize based on dataFilterValue\n        },\n    });\n\n    // const field: any = watch('field');\n    const operator: any = watch('operator');\n    const showLabel: any = watch('showLabel');\n\n    const getValue = (value: string): string | number => (isNaN(+value) ? value : +value);\n\n    const onSubmit = (formValues: any) => {\n        const { field, operator, value, minValue, maxValue, label } = formValues;\n        const current = dataFilter.find(f => f.id === dataFilterValue?.id);\n        const id = dataFilterValue?.id || nanoid();\n\n        let newValue: any[] = [];\n\n        if (operator.value === 'between' || operator.value === 'not between') {\n            if (minValue && maxValue) {\n                newValue = [getValue(minValue), getValue(maxValue)];\n            }\n        } else if (value || typeof value === 'number') {\n            newValue = [value];\n        }\n\n        const newItem = {\n            id,\n            fieldName: field.value,\n            operator: operator.value,\n            label,\n            value: newValue,\n        };\n\n        if (current) {\n            const updated = dataFilter.map(f => (f.id === id ? newItem : f));\n            setDataFilter(updated);\n        } else {\n            setDataFilter([...dataFilter, newItem]);\n        }\n\n        onHide();\n    };\n\n    function renderFiledComponent() {\n        // const currentField = field.value;\n        // console.log(operator);\n        console.log(operator);\n        const currentOperator = (typeof operator === 'string' ? operator : operator?.value) as Operator | undefined;\n        if (currentOperator && currentOperator !== 'is null' && currentOperator !== 'is not null' && (currentOperator === 'between' || currentOperator === 'not between')) {\n            return (\n                <div className={rowStyle}>\n                    <div className={colStyle}>\n                        <Field label=\"Min Value\" invalid={!!errors.minValue} error={errors.minValue?.message}>\n                            <Input {...register('minValue', { required: 'Enter the minValue' })} />\n                        </Field>\n                    </div>\n                    <div className={colStyle}>\n                        <Field label=\"Max Value\" invalid={!!errors.maxValue} error={errors.maxValue?.message}>\n                            <Input {...register('maxValue', { required: 'Enter the maxValue' })} />\n                        </Field>\n                    </div>\n                </div>\n            );\n        }\n        console.log('currentOperator', currentOperator);\n        if (\n            currentOperator === '=' ||\n            currentOperator === '!=' ||\n            currentOperator === 'like' ||\n            currentOperator === 'not like' ||\n            currentOperator === 'match_all' ||\n            currentOperator === 'match_any' ||\n            currentOperator === 'match_phrase' ||\n            currentOperator === 'match_phrase_prefix'\n        ) {\n            return (\n                <>\n                    <Field label=\"Value\" invalid={!!errors.value} error={(errors.value as any)?.message}>\n                        <Input {...register('value', { required: 'Enter the value' })} list=\"field-value-list\" />\n                    </Field>\n                    <datalist id=\"field-value-list\">\n                        {tableFieldValue.map((item, idx) => (\n                            <option key={idx} value={item.value} />\n                        ))}\n                    </datalist>\n                </>\n            );\n        }\n        if (currentOperator === 'in' || currentOperator === 'not in') {\n            return (\n                <Field label=\"Value\" invalid={!!errors.value} error={(errors.value as any)?.message}>\n                    <Controller\n                        name=\"value\"\n                        control={control}\n                        rules={{ required: 'Enter the value' }}\n                        render={({ field }) => (\n                            <Select\n                                {...field}\n                                isMulti={true}\n                                options={tableFieldValue.map(item => ({\n                                    label: item.value,\n                                    value: item.value,\n                                }))}\n                                placeholder=\"Select value\"\n                                onChange={selected => field.onChange(selected ? selected.map((s: any) => s.value) : [])}\n                                value={tableFieldValue\n                                    .filter(item => Array.isArray(field.value) && field.value.includes(item.value))\n                                    .map(item => ({\n                                        label: item.value,\n                                        value: item.value,\n                                    }))}\n                            />\n                        )}\n                    />\n                </Field>\n            );\n        }\n        return <></>;\n    }\n\n    return (\n        <form onSubmit={handleSubmit(onSubmit)} className={containerStyle}>\n            <div className={rowStyle}>\n                <div className={colStyle}>\n                    <Field label=\"Columns\" invalid={!!errors.field} error={(errors.field as any)?.message}>\n                        <Controller\n                            name=\"field\"\n                            control={control}\n                            rules={{ required: 'Select Field' }}\n                            render={({ field }) => (\n                                <Select\n                                    {...field}\n                                    options={tableFields.map(f => ({\n                                        label: f.Field,\n                                        value: f.Field,\n                                    }))}\n                                />\n                            )}\n                        />\n                    </Field>\n                </div>\n                <div className={colStyle}>\n                    <Field label=\"Operator\" invalid={!!errors.operator} error={(errors.operator as any)?.message}>\n                        <Controller\n                            name=\"operator\"\n                            control={control}\n                            rules={{ required: 'Select Operator' }}\n                            render={({ field }) => (\n                                <Select\n                                    {...field}\n                                    options={OPERATORS.map(op => ({\n                                        label: op,\n                                        value: op,\n                                    }))}\n                                />\n                            )}\n                        />\n                    </Field>\n                </div>\n            </div>\n\n            {renderFiledComponent()}\n\n            <InlineFieldRow>\n                <InlineField label=\"Custom Label\">\n                    <Controller name=\"showLabel\" control={control} render={({ field }) => <InlineSwitch {...field} />}></Controller>\n                </InlineField>\n            </InlineFieldRow>\n\n            {showLabel && (\n                <Field invalid={!!errors.label} error={errors.label?.message}>\n                    <Input {...register('label', { required: 'Please enter label' })} />\n                </Field>\n            )}\n\n            <div className={footerStyle}>\n                <Button\n                    variant=\"secondary\"\n                    onClick={e => {\n                        e.preventDefault();\n                        onHide();\n                    }}\n                >\n                    Cancel\n                </Button>\n                <Button type=\"submit\">Confirm</Button>\n            </div>\n        </form>\n    );\n}\n","import React, { useRef, useState } from 'react';\nimport { DiscoverFilterWrapper } from './discover-filter.style';\nimport { useTranslation } from 'react-i18next';\nimport { useAtom } from 'jotai';\nimport { FilterContent } from './filter-content';\nimport { dataFilterAtom, locationAtom } from 'store/discover';\nimport { getFilterSQL } from 'utils/data';\nimport { css } from '@emotion/css';\nimport { Badge, Icon, IconButton, Toggletip, useTheme2 } from '@grafana/ui';\n// import { set } from 'lodash-es';\n\nexport default function DiscoverFilter() {\n    const [dataFilter, setDataFilter] = useAtom(dataFilterAtom);\n    const [open, setOpen] = useState<boolean>(false);\n    const [dataFilterOpen, setDataFilterOpen] = useState<any>({});\n    const discoverFilterRef = useRef(null);\n    const { t } = useTranslation();\n    const [_loc, setLoc] = useAtom(locationAtom);\n    const theme = useTheme2();\n\n    return (\n        //  className=\"mt-px rounded-b-sm bg-n8 p-4 pb-6\"\n        <DiscoverFilterWrapper\n            ref={discoverFilterRef}\n            className={css`\n                background-color: ${theme.isDark ? 'rgb(24, 27, 31)' : '#FFF'};\n                padding: 1rem;\n                padding-bottom: 1.5rem;\n                margin-top: 1px;\n                border-radius: 0 0 0.25rem 0.25rem;\n            `}\n        >\n            <div className=\"text-xs font-medium\">{t`Filter`}</div>\n            <div className=\"filter-tag\">\n                {dataFilter.map((dataFilterValue, index) => {\n                    return (\n                        <div\n                            key={index.toString()}\n                            className={css`\n                                margin: '0 4px';\n                            `}\n                        >\n                            <Toggletip\n                                show={dataFilterOpen[dataFilterValue.id]}\n                                onOpen={() => {\n                                    setDataFilterOpen({\n                                        ...dataFilterOpen,\n                                        [dataFilterValue.id]: true,\n                                    });\n                                }}\n                                onClose={() => {\n                                    setDataFilterOpen({\n                                        ...dataFilterOpen,\n                                        [dataFilterValue.id]: false,\n                                    });\n                                }}\n                                closeButton={true}\n                                content={\n                                    <FilterContent\n                                        onHide={() => {\n                                            setDataFilterOpen({\n                                                ...dataFilterOpen,\n                                                [dataFilterValue.id]: false,\n                                            });\n                                        }}\n                                        dataFilterValue={dataFilterValue}\n                                    />\n                                }\n                                placement=\"bottom\"\n                            >\n                                <div>\n                                    <Badge\n                                        // className=\"mx-1 rounded px-2 py-[2px] text-xs leading-[18px] text-n3 first:ml-2 hover:border-b7 group-data-[state=open]:border-b7 dark:hover:border-b3 dark:group-data-[state=open]:border-b3\"\n                                        key={index}\n                                        text={\n                                            <div\n                                                className={css`\n                                                    display: flex;\n                                                    align-items: center;\n                                                    justify-content: space-between;\n                                                `}\n                                            >\n                                                <span>{dataFilterValue.label ? <span>{dataFilterValue.label}</span> : <span>{getFilterSQL(dataFilterValue)}</span>}</span>\n                                                <div\n                                                    className={css`\n                                                        margin-left: 0.5rem;\n                                                        cursor: pointer;\n                                                    `}\n                                                    onClick={() => {\n                                                        const data_filters = dataFilter.filter(e => e !== dataFilterValue);\n                                                        setDataFilter(data_filters);\n                                                        setLoc(prev => {\n                                                            const searchParams = prev.searchParams;\n                                                            searchParams?.set('data_filters', JSON.stringify(data_filters));\n                                                            return {\n                                                                ...prev,\n                                                                searchParams,\n                                                            };\n                                                        });\n                                                    }}\n                                                >\n                                                    <Icon name=\"times\" />\n                                                </div>\n                                            </div>\n                                        }\n                                        color=\"blue\"\n                                    ></Badge>\n                                </div>\n                            </Toggletip>\n                        </div>\n                    );\n                })}\n                <Toggletip\n                    show={open}\n                    closeButton={false}\n                    onOpen={() => {\n                        setOpen(true);\n                    }}\n                    content={\n                        <FilterContent\n                            onHide={() => {\n                                console.log('onHide');\n                                setOpen(false);\n                            }}\n                        />\n                    }\n                    placement=\"bottom\"\n                >\n                    <IconButton name=\"plus\" tooltip=\"Add filter\" style={{marginLeft: 10}} />\n                </Toggletip>\n            </div>\n        </DiscoverFilterWrapper>\n    );\n}\n","import { Icon } from \"@grafana/ui\";\nimport React from \"react\";\n\n\nexport const FIELD_TYPES = [\n    {\n        key: 'STRING',\n        value: ['VARCHAR', 'STRING', 'CHAR', 'TEXT'],\n        icon: <Icon name=\"text-fields\" />\n    },\n    {\n        key: 'NUMBER',\n        value: ['INT', 'LARGEINT', 'SMALLINT', 'TINYINT', 'DECIMAL', 'BIGINT', 'FLOAT', 'DOUBLE'],\n        icon: <Icon name=\"percentage\" />,\n    },\n    {\n        key: 'DATE',\n        value: ['DATE', 'DATETIME', 'DATEV2', 'DATETIMEV2'],\n        icon: <Icon name=\"clock-nine\" />,\n    },\n    {\n        key: 'JSONB',\n        value: ['JSONB'],\n        icon: <Icon name=\"brackets-curly\" />,\n        complex: true,\n    },\n    {\n        key: 'ARRAY',\n        value: ['ARRAY'],\n        icon: <Icon name=\"list-ul\" />,\n        complex: true,\n    },\n    {\n        key: 'BOOLEAN',\n        value: ['BOOLEAN'],\n        icon: <Icon name=\"toggle-on\" />\n    },\n    {\n        key: 'BITMAP',\n        value: ['BITMAP'],\n        icon: <Icon name=\"building\" />,\n        complex: true,\n    },\n    {\n        key: 'HLL',\n        value: ['HLL'],\n        icon: <Icon name=\"draggabledots\" />,\n        complex: true,\n    },\n    {\n        key: 'VARIANT',\n        value: ['VARIANT'],\n        icon: <Icon name=\"brackets-curly\" />,\n        complex: true,\n    },\n    {\n        key: 'JSON',\n        value: ['JSON'],\n        icon: <Icon name=\"brackets-curly\" />,\n        complex: true,\n    },\n];\n\nexport const getFieldIcon = (columnType: string) => {\n    const currentColumnType = FIELD_TYPES.find(item => item.value.some(val => columnType.toLocaleUpperCase().includes(val)));\n    return currentColumnType?.icon;\n};\n","import { type ClassValue, clsx } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]) {\n    return twMerge(clsx(inputs));\n}","import { css } from '@emotion/css';\nimport { IconButton } from '@grafana/ui';\nimport { Progress } from 'antd';\nimport { useAtom, useAtomValue } from 'jotai';\nimport { get } from 'lodash-es';\nimport { nanoid } from 'nanoid';\nimport React from 'react';\nimport { topDataAtom, tableTotalCountAtom, dataFilterAtom } from 'store/discover';\nimport { isComplexType } from 'utils/data';\ninterface JsonObject {\n    [key: string]: any;\n}\nfunction countValueDistribution(jsonArray: JsonObject[], key: string): { [value: string]: number } {\n    const valueCountMap = new Map<string, number>();\n\n    jsonArray.forEach(obj => {\n        let value = get(obj, key);\n        if (value === undefined) {\n            value = '';\n        }\n        valueCountMap.set(value, (valueCountMap.get(value) || 0) + 1);\n    });\n\n    const result: { [value: string]: number } = {};\n    valueCountMap.forEach((times, valueStr) => {\n        const value = valueStr;\n        result[value] = times;\n    });\n\n    return result;\n}\n\nexport function TopData({ field }: any) {\n    console.log(field);\n    const topData = useAtomValue(topDataAtom);\n    const tableTotalCount = useAtomValue(tableTotalCountAtom);\n    const [dataFilter, setDataFilter] = useAtom(dataFilterAtom);\n    const canDisplayTopData = field?.Type?.toUpperCase() !== 'VARIANT';\n    const res = Object.entries(countValueDistribution(topData, field.Field)).sort((a: any, b: any) => b[1].count - a[1].count);\n\n    return (\n        <div\n            className={css`\n                max-height: 400px;\n                overflow-y: auto;\n                padding: 8px;\n            `}\n        >\n            <div className=\"mb-2 mt-2 break-words text-xs text-n5\">\n                <span className=\"mr-2\">{field.Field}</span>\n                <span>({field.Type})</span>\n            </div>\n            <div\n                className={css`\n                    display: flex;\n                    align-items: center;\n                    justify-content: space-between;\n                `}\n            >\n                <div\n                    className={css`\n                        font-size: 16px;\n                        margin: 8px 0;\n                    `}\n                >\n                    TOP5\n                </div>\n                <small className=\"text-n2\">{tableTotalCount >= 500 ? 500 : tableTotalCount} Items</small>\n            </div>\n            {canDisplayTopData ? (\n                <div className=\"mt-3 space-y-3 text-n5\">\n                    {res.map(\n                        ([value, count], index) =>\n                            index < 5 && (\n                                <div key={index} className=\"flex items-center justify-between\">\n                                    <div\n                                        className={css`\n                                            overflow: hidden;\n                                            text-overflow: ellipsis;\n                                            white-space: nowrap;\n                                        `}\n                                    >\n                                        <div\n                                            className={css`\n                                                display: flex;\n                                                align-items: center;\n                                                width: 180px;\n                                                justify-content: space-between;\n                                            `}\n                                        >\n                                            <div\n                                                className={css`\n                                                    flex: 1 1 0%;\n                                                    overflow: hidden;\n                                                    text-overflow: ellipsis;\n                                                    white-space: nowrap;\n                                                `}\n                                            >\n                                                {value}\n                                            </div>\n                                            <div\n                                                className={css`\n                                                    margin-left: 20px;\n                                                    flex-shrink: 0;\n                                                `}\n                                            >\n                                                {+((count * 100) / topData.length).toFixed(1)}%\n                                            </div>\n                                        </div>\n                                        <Progress\n                                            size={4}\n                                            className={css`\n                                                .ant-progress-outer {\n                                                    .ant-progress-inner {\n                                                        position: absolute;\n                                                        top: 0px;\n                                                    }\n                                                }\n                                            `}\n                                            style={{ width: '100%', height: '0px' }}\n                                            percent={+((count * 100) / topData.length).toFixed(1)}\n                                            status=\"normal\"\n                                            showInfo={false}\n                                        />\n                                    </div>\n                                    {!isComplexType(field.Type) && (\n                                        <div\n                                            className={css`\n                                                margin-left: 30px;\n                                            `}\n                                        >\n                                            <IconButton\n                                                name=\"plus-circle\"\n                                                onClick={e => {\n                                                    console.log(value);\n                                                    setDataFilter([\n                                                        ...dataFilter,\n                                                        {\n                                                            fieldName: field.Field,\n                                                            operator: '=',\n                                                            value: [typeof value === 'string' ? value : +value],\n                                                            id: nanoid(),\n                                                        },\n                                                    ]);\n                                                    e.stopPropagation();\n                                                }}\n                                                tooltip=\"Equivalent filtration\"\n                                            />\n                                            <IconButton\n                                                name=\"minus-circle\"\n                                                style={{ marginLeft: '4px' }}\n                                                tooltip=\"Nonequivalent filtration\"\n                                                onClick={e => {\n                                                    setDataFilter([\n                                                        ...dataFilter,\n                                                        {\n                                                            fieldName: field.Field,\n                                                            operator: '!=',\n                                                            value: [typeof value ? value : +value],\n                                                            id: nanoid(),\n                                                        },\n                                                    ]);\n                                                    e.stopPropagation();\n                                                }}\n                                            />\n                                        </div>\n                                    )}\n                                </div>\n                            ),\n                    )}\n                </div>\n            ) : (\n                <div className=\"mt-2 text-xs text-n5\">Does not supported</div>\n            )}\n        </div>\n    );\n}\n","import React from 'react';\nimport { getFieldIcon } from 'utils/icon';\nimport { IconButton, Toggletip, useTheme2 } from '@grafana/ui';\nimport { css } from '@emotion/css';\nimport { cn } from 'utils/tailwind';\nimport { TopData } from './top-data/top-data';\n\ninterface FieldItemProps {\n    field: any;\n    onAdd?: (field: any) => void;\n    onRemove?: (field: any) => void;\n    type: 'add' | 'remove';\n}\n\nexport default function FieldItem(props: FieldItemProps) {\n    const theme = useTheme2();\n    const { field } = props;\n    field.key = field.Field;\n    if (field.children) {\n        field.icon = <div className=\"w-4 text-sm leading-8 text-n4\">{}</div>;\n        return (\n            <div className=\"-ml-3 flex\">\n                Tree\n                {/* <Tree showIcon className={`${TreeStyle} ${DiscoverTreeStyle}`} treeData={[field]} switcherIcon={<SDIcon type=\"icon-arrow-down\" className=\"dark:text-n6\" />} /> */}\n            </div>\n        );\n    }\n    return (\n        <div>\n            <Toggletip placement='right' content={<TopData field={field} />}>\n                <div\n                    className={css`\n                        width: 100%;\n                        text-align: left;\n                        display: flex;\n                        align-items: center;\n                        justify-content: space-between;\n                        height: 32px;\n                        padding: 0 8px;\n                        cursor: pointer;\n                        &:hover .icon-wrapper {\n                            opacity: 1;\n                        }\n                        &:hover {\n                            background-color: ${theme.colors.background.secondary};\n                        }\n                    `}\n                >\n                    <div className=\"flex\">\n                        <div>{getFieldIcon(field['Type'])}</div>\n                        <div\n                            className={css`\n                                display: flex;\n                                margin-left: 4px;\n                                overflow: hidden;\n                                text-overflow: ellipsis;\n                                white-space: nowrap;\n                                max-width: 130px;\n                            `}\n                        >\n                            {field['Field']}\n                        </div>\n                    </div>\n                    <div\n                        className={cn(\n                            'icon-wrapper',\n                            css`\n                                opacity: 0;\n                                transition: opacity 0.2s;\n                                margin-left: auto;\n                                display: flex;\n                                align-items: center;\n                                color: ${theme.colors.text.secondary};\n                                &:hover {\n                                    color: ${theme.colors.text.primary};\n                                }\n                            `,\n                        )}\n                    >\n                        {props.type === 'add' ? (\n                            <IconButton\n                                name=\"plus\"\n                                tooltip=\"Add to table\"\n                                onClick={e => {\n                                    props?.onAdd?.(field);\n                                    e.stopPropagation();\n                                }}\n                            />\n                        ) : (\n                            <IconButton\n                                name=\"minus\"\n                                tooltip=\"Delete from table\"\n                                onClick={(e: any) => {\n                                    props?.onRemove?.(field);\n                                    e.stopPropagation();\n                                }}\n                            />\n                        )}\n                    </div>\n                </div>\n            </Toggletip>\n        </div>\n    );\n}\n","import { useTranslation } from 'react-i18next';\nimport { useAtom } from 'jotai';\nimport React from 'react';\nimport { searchableAtom, aggregatableAtom, fieldTypeAtom } from 'store/discover';\nimport { AggregatableEnum, AGGREGATABLE, SearchableEnum, SEARCHABLE } from 'utils/data';\nimport { Select, RadioButtonGroup } from '@grafana/ui';\nimport { css } from '@emotion/css';\n\nexport function FilterContent() {\n  const { t } = useTranslation();\n  const [searchable, setSearchable] = useAtom(searchableAtom);\n  const [aggregatable, setAggregatable] = useAtom(aggregatableAtom);\n  const [fieldType, setFieldType] = useAtom(fieldTypeAtom);\n  return (\n    //  className=\"w-auto divide-y rounded-md dark:divide-gray-700\"\n    <div className={css`\n      width: auto;\n      border-radius: 0.375rem;\n    `}>\n      {/* className=\"title dark:text-n2\" */}\n      <div className={css`\n        font-size: 1.125rem;\n        font-weight: 500;\n        `}>{`Field Filter`}</div>\n      <div className={css`\n          margin-top: 1rem;\n          border: none;\n        `}>\n        <div className={css`\n          font-size: 0.875rem;\n          margin-bottom: 0.5rem;\n          `} >{t`Aggregatable`}</div>\n        <div>\n          <RadioButtonGroup\n            //   name=\"aggregatable\"\n            options={AGGREGATABLE}\n            value={aggregatable}\n            onChange={(val) => {\n              setAggregatable(val as AggregatableEnum);\n            }}\n          />\n        </div>\n      </div>\n      <div className={css`\n          margin-top: 1rem;\n          border: none;\n        `}>\n        <div className={css`\n          font-size: 0.875rem;\n          margin-bottom: 0.5rem;\n          `} >{t`Searchable`}</div>\n        <div>\n          <RadioButtonGroup\n            //   name=\"searchable\"\n            options={SEARCHABLE}\n            value={searchable}\n            onChange={(val) => {\n              setSearchable(val as SearchableEnum);\n            }}\n          />\n        </div>\n      </div>\n      <div className={css`\n          margin-top: 1rem;\n          border: none;\n        `}>\n        <div className={css`\n          font-size: 0.875rem;\n          margin-bottom: 0.5rem;\n          `} >{t`Type`}</div>\n        <Select\n          value={fieldType as any}\n          onChange={(value) => {\n            setFieldType(value as any);\n          }}\n          options={[\n            {\n              value: 'ANY',\n              label: 'Any',\n            },\n            {\n              value: 'STRING',\n              label: 'String',\n            },\n            {\n              value: 'NUMBER',\n              label: 'Number',\n            },\n            {\n              value: 'DATE',\n              label: 'Date',\n            },\n          ]}\n        />\n      </div>\n    </div>\n  );\n}\n","import { useAtom, useAtomValue } from 'jotai';\nimport React, { useState } from 'react';\nimport FieldItem from './field-item/field-item';\nimport { FilterContent } from './filter-content/filter-content';\nimport { selectedFieldsAtom, tableFieldsAtom, searchableAtom, aggregatableAtom, fieldTypeAtom, indexesAtom } from 'store/discover';\nimport { AggregatableEnum, getFieldType, SearchableEnum, FieldTypeEnum } from 'utils/data';\nimport { Button, CollapsableSection, Icon, Input, useTheme2, Toggletip } from '@grafana/ui';\nimport { css } from '@emotion/css';\n\nexport default function DiscoverSidebar() {\n    const [selectedFields, setSelectedFields] = useAtom(selectedFieldsAtom);\n    const tableFields = useAtomValue(tableFieldsAtom);\n    const [searchable, _setSearchable] = useAtom(searchableAtom);\n    const [aggregatable, _setAggregatable] = useAtom(aggregatableAtom);\n    const [fieldType, _setFieldType] = useAtom(fieldTypeAtom);\n    const [searchValue, setSearchValue] = useState('');\n    const indexes = useAtomValue(indexesAtom);\n    const theme = useTheme2();\n    const filteredFields = tableFields\n        .filter(field => {\n            if (aggregatable === AggregatableEnum.ANY) {\n                return true;\n            }\n            if (aggregatable === AggregatableEnum.YES) {\n                return getFieldType(field.Type) === 'NUMBER';\n            }\n            if (aggregatable === AggregatableEnum.NO) {\n                return getFieldType(field.Type) !== 'NUMBER';\n            }\n            return false;\n        })\n        .filter((field: any) => {\n            if (searchable === SearchableEnum.ANY) {\n                return true;\n            }\n            if (searchable === SearchableEnum.YES) {\n                return indexes.some(index => field.Field === index.Field);\n            }\n            if (searchable === SearchableEnum.NO) {\n                return !indexes.some(index => field.Field === index.Field);\n            }\n            return false;\n        })\n        .filter(field => {\n            if (fieldType === FieldTypeEnum.ANY) {\n                return true;\n            }\n            return getFieldType(field.Type) === fieldType;\n        });\n    const hasSelectedFields = selectedFields.length > 0;\n    const availableFields = filteredFields.filter(filed => {\n        if (selectedFields.find(item => filed['Field'] === item['Field'])) {\n            return false;\n        }\n        return true;\n    });\n\n    function handleAdd(field: any) {\n        setSelectedFields([...selectedFields, field] as any);\n    }\n\n    function handleRemove(field: any) {\n        const index = selectedFields.findIndex((item: any) => item.Field === field.Field);\n        selectedFields.splice(index, 1);\n        setSelectedFields([...selectedFields]);\n    }\n\n    return (\n        <div\n            className={css`\n                display: flex;\n                flex-direction: column;\n                height: 100%;\n            `}\n        >\n            <div\n                className={css`\n                    display: flex;\n                    background-color: ${theme.isDark ? 'rgb(24, 27, 31)' : '#FFF'};\n                    padding: 1rem 0.5rem;\n                    border-raduis: 0.25rem 0;\n                    align-items: center;\n                    column-gap: 0.5rem;\n                `}\n            >\n                <Icon name=\"search\" />\n                <Input\n                    placeholder={`Search`}\n                    className={css`\n                        border: none;\n                    `}\n                    value={searchValue}\n                    onChange={(e: any) => setSearchValue(e.target.value)}\n                />\n                <Toggletip content={<FilterContent />}>\n                    <Icon name=\"filter\" />\n                </Toggletip>\n            </div>\n            <div\n                className={css`\n                    margin-top: 1px;\n                    flex: 1;\n                    padding: 0.5rem 1rem 0.5rem 1rem;\n                    background-color: ${theme.isDark ? 'rgb(24, 27, 31)' : '#FFF'};\n                    height: 100%;\n                    overflow: auto;\n                `}\n            >\n                <CollapsableSection label={<span className={css`\n                        margin-left: 4px;\n                        font-size: 14px;\n                        line-height: 32px;\n                    `}>Selected fields</span>} isOpen={true}>\n                    <div\n                        className={css`\n                            width: 100%;\n                        `}\n                    >\n                        {hasSelectedFields ? (\n                            <div\n                                className={css`\n                                    width: 100%;\n                                `}\n                            >\n                                {selectedFields\n                                    .filter((field: any) => {\n                                        return field['Field'].includes(searchValue);\n                                    })\n                                    .map((field: any, index) => (\n                                        <FieldItem type=\"remove\" key={index} field={field} onRemove={field => handleRemove(field)} />\n                                    ))}\n                            </div>\n                        ) : (\n                            <Button\n                                icon=\"arrow\"\n                                size=\"sm\"\n                                variant=\"secondary\"\n                                fill=\"text\"\n                                fullWidth={true}\n                                className={css`\n                                    width: 100%;\n                                    text-align: left;\n                                    justify-content: flex-start;\n                                `}\n                            >\n                                _source\n                            </Button>\n                        )}\n                    </div>\n                </CollapsableSection>\n                <CollapsableSection label={<span className={css`\n                        margin-left: 4px;\n                        font-size: 14px;\n                        line-height: 32px;\n                    `}>Available fields</span>}  isOpen={true}>\n                    <div\n                        className={css`\n                            width: 100%;\n                        `}\n                    >\n                        {availableFields\n                            .filter((field: any) => {\n                                return field['Field'].includes(searchValue);\n                            })\n                            .map((field: any, index) => (\n                                <FieldItem type=\"add\" field={field} key={index} onAdd={field => handleAdd(field)} />\n                            ))}\n                    </div>\n                </CollapsableSection>\n            </div>\n        </div>\n    );\n}\n","import ReactECharts from 'echarts-for-react';\nimport { useAtom, useAtomValue, useSetAtom } from 'jotai';\nimport React, { useEffect, useRef, useState } from 'react';\nimport dayjs from 'dayjs';\nimport { Select, useTheme2 } from '@grafana/ui';\nimport { IntervalEnum } from 'types/type';\nimport { TIME_INTERVALS } from 'utils/data';\nimport { getAutoInterval, FORMAT_DATE, translationDateIntervalType } from '../../constants';\nimport { currentDateAtom, discoverCurrentAtom, activeShortcutAtom, tableDataChartsAtom, intervalAtom, tableTotalCountAtom, pageSizeAtom, pageAtom, timeRangeAtom } from 'store/discover';\nimport { css } from '@emotion/css';\n\nexport function DiscoverHistogram() {\n    const theme = useTheme2().isDark ? 'dark' : 'light';\n    const [currentDate, setCurrentDate] = useAtom(currentDateAtom);\n    const ReactEChartsInstance = useRef<ReactECharts>(null);\n    const [discoverCurrent, setDiscoverCurrent] = useAtom(discoverCurrentAtom);\n    const setActiveItem = useSetAtom(activeShortcutAtom);\n\n    const tableDataCharts = useAtomValue(tableDataChartsAtom);\n    if (process.env.NODE_ENV !== 'production') {\n        tableDataChartsAtom.debugLabel = 'tableDataCharts';\n    }\n    const [interval_value, setInterval_value] = useState(1);\n    const [interval, setInterval] = useAtom(intervalAtom);\n    if (process.env.NODE_ENV !== 'production') {\n        intervalAtom.debugLabel = 'interval';\n    }\n    const tableTotalCount = useAtomValue(tableTotalCountAtom);\n    const [_timeRange, setTimeRange] = useAtom(timeRangeAtom);\n    const [_pageSize, setPageSize] = useAtom(pageSizeAtom);\n    const setPage = useSetAtom(pageAtom);\n\n    useEffect(() => {\n        const v = getAutoInterval(currentDate as any).interval_value;\n        setInterval_value(v);\n    }, [currentDate]);\n\n    const timeInterval = interval === IntervalEnum.Auto ? translationDateIntervalType(interval) : `${interval_value} ${translationDateIntervalType(interval)}`;\n\n    let base = +new Date(1988, 9, 3);\n    let oneDay = 24 * 3600 * 1000;\n    let data = [[base, Math.random() * 300]];\n    for (let i = 1; i < 20000; i++) {\n        let now = new Date((base += oneDay));\n        data.push([+now, Math.round((Math.random() - 0.5) * 20 + data[i - 1][1])]);\n    }\n\n    const options: any = {\n        title: {\n            subtext: `${`Time Interval`}: ${timeInterval}`,\n            left: 'right',\n            top: 12,\n        },\n        grid: {\n            left: '32px',\n            right: '32px',\n            bottom: '0px',\n            containLabel: true,\n        },\n        color: theme === 'light' ? ['#608DFF'] : ['#608DFF'],\n        xAxis: {\n            type: 'category',\n            data: tableDataCharts.map(e => e['TT']),\n            axisLabel: {\n                fontSize: '12px', // \n                fontStyle: 'normal',\n                fontWeight: 400,\n                color: theme === 'light' ? '#9F9FA2' : '#5F5F64',\n            },\n            axisLine: {\n                lineStyle: {\n                    width: 0.5,\n                    color: theme === 'light' ? '#BFBFC1' : '#3F3F45',\n                },\n            },\n            axisTick: {\n                show: false,\n            },\n        },\n        toolbox: {\n            show: false,\n        },\n        brush: {\n            xAxisIndex: 0,\n        },\n        yAxis: {\n            name: `Count`,\n            nameTextStyle: {\n                align: 'right',\n                padding: [5, 0],\n            },\n            type: 'value',\n            splitLine: {\n                show: true,\n                lineStyle: {\n                    width: 0.5, // \n                    color: theme === 'light' ? '#BFBFC1' : '#3F3F45',\n                },\n            },\n            axisLabel: {\n                fontSize: '12px',\n                fontStyle: 'normal',\n                fontWeight: 400,\n            },\n        },\n        tooltip: {\n            trigger: 'axis',\n            axisPointer: {\n                type: 'line',\n            },\n            padding: 0,\n            borderWidth: 0,\n            backgroundColor: theme === 'light' ? '#ffffff' : 'rgba(63, 63, 69, 0.64)',\n            formatter: function (params: any) {\n                const html = `<div className=\"text-n2\"\n                                       style=\"\n                                          padding: 8px;\n                                          min-width: 120px;\n                                          border-radius: 6px;\n                                          backdrop-filter: blur(12px);\n                                          color: ${theme === 'light' ? '#1F1F26' : '#EFEFF0'};\n                                        \">\n                                      <div style=\"padding-bottom: 4px; border-bottom: 1px solid ${theme === 'light' ? '#DFDFE0' : '#3F3F45'};\">${[params[0].name]}</div>\n                                      <div style=\"padding-top:4px;display: flex;justify-content: space-between;\"><span>Count:</span><span style=\"font-family:DIN Alternate;font-size:14;font-weight:500;\">${[\n                        params[0].value || 0,\n                    ]}</span></div>\n                                  </div>`;\n                return html;\n            },\n        },\n\n        series: [\n            {\n                data: tableDataCharts.map(e => e['sum(cnt)']),\n                type: 'bar',\n                barWidth: '99.3%',\n            },\n        ],\n\n        animation: false,\n    };\n\n    useEffect(() => {\n        const chart = ReactEChartsInstance.current;\n        if (chart && tableDataCharts.length > 0) {\n            const handler = ({ areas }: any) => {\n                if (!areas.length) {\n                    return;\n                }\n                setPage(1);\n                setPageSize(50);\n                setActiveItem(undefined);\n                const [startIndex, endIndex] = (areas[0] as any).coordRange as [startIndex: number, endIndex: number];\n                const timeInterval = interval === IntervalEnum.Auto ? getAutoInterval(currentDate as any).interval_unit : interval;\n                const chartsEndDate = dayjs(new Date(tableDataCharts[endIndex]['TT'])).add(interval_value, timeInterval);\n                setDiscoverCurrent({\n                    ...discoverCurrent,\n                    date: [dayjs(tableDataCharts[startIndex]['TT']), chartsEndDate],\n                });\n\n                setCurrentDate([dayjs(tableDataCharts[startIndex]['TT']), chartsEndDate]);\n                const timeRange = {\n                    from: dayjs(tableDataCharts[startIndex]['TT']).format(FORMAT_DATE),\n                    to: chartsEndDate.format(FORMAT_DATE),\n                    raw: {\n                        from: dayjs(tableDataCharts[startIndex]['TT']).format(FORMAT_DATE),\n                        to: chartsEndDate.format(FORMAT_DATE),\n                    },\n                };\n                setTimeRange(timeRange);\n                chart.getEchartsInstance().dispatchAction({\n                    type: 'brush',\n                    command: 'clear',\n                    areas: [],\n                });\n            };\n\n            if (chart.ele) {\n                chart.getEchartsInstance().dispatchAction({\n                    type: 'takeGlobalCursor',\n                    key: 'brush',\n                    brushOption: {\n                        brushType: 'lineX',\n                    },\n                });\n                chart.getEchartsInstance().on('brushEnd', handler);\n\n                return () => {\n                    if (chart.ele) {\n                        chart.getEchartsInstance().off('brushEnd', handler);\n                    }\n                };\n            }\n        }\n        return undefined;\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [tableDataCharts]);\n    return (\n        <div className={css`padding: 0 16px;`}>\n            <div\n                className={css`\n                    display: flex;\n                    align-items: center;\n                    justify-content: space-between;\n                `}\n            >\n                <div>\n                    <span className={css`\n                            font-size: 24px;\n                            font-weight: 600;\n                        `}\n                    >\n                        {tableTotalCount ? tableTotalCount.toString().replace(/(\\d)(?=(?:\\d{3})+$)/g, '$1,') : '0'}\n                    </span>{' '}\n                    <span className={css`font-size: 12px;`}>{`hits`}</span>\n                </div>\n                <div className={css`\n                        font-size: 14px;\n                        color: rgb(190,190,193)\n                    `}\n                >{currentDate && `${currentDate[0]?.format(FORMAT_DATE)} ~ ${currentDate[1]?.format(FORMAT_DATE)} `}</div>\n                <div\n                    className={css`\n                        width: 160px;\n                    `}\n                >\n                    <Select\n                        value={interval}\n                        onChange={selectdbInterval => {\n                            setInterval(selectdbInterval.value as any);\n                        }}\n                        options={TIME_INTERVALS}\n                    />\n                </div>\n            </div>\n            <div\n                className={css`\n                    height: 300px;\n                `}\n            >\n                <ReactECharts option={options} ref={ReactEChartsInstance}></ReactECharts>\n            </div>\n        </div>\n    );\n}\n","import React, { Fragment } from 'react';\nimport { ColumnDef, Row, flexRender, getCoreRowModel, getExpandedRowModel, useReactTable } from '@tanstack/react-table';\nimport { EmptySearchResult, useTheme2 } from '@grafana/ui';\nimport { css } from '@emotion/css';\n\ninterface SDCollapsibleTableProps<TData> {\n    data: TData[];\n    columns: Array<ColumnDef<TData>>;\n    renderSubComponent: (props: { row: Row<TData> }) => React.ReactElement;\n    getRowCanExpand: (row: Row<TData>) => boolean;\n    className?: string;\n}\n\nexport default function SDCollapsibleTable<T>(props: SDCollapsibleTableProps<T>) {\n    const { data, columns, renderSubComponent, getRowCanExpand, className } = props;\n    const theme = useTheme2();\n    const table = useReactTable<any>({\n        data,\n        columns,\n        getRowCanExpand,\n        getCoreRowModel: getCoreRowModel(),\n        getExpandedRowModel: getExpandedRowModel(),\n    });\n\n    return (\n        <table className={className}>\n            <thead>\n                {table.getHeaderGroups().map(headerGroup => (\n                    <tr key={headerGroup.id} className={css`${theme.isDark ? 'border-bottom: 1px solid hsl(var(--border-dark));' : 'border-bottom: 1px solid hsl(var(--border));'} `}>\n                        {headerGroup.headers.map(header => {\n                            return (\n                                <th\n                                    key={header.id}\n                                    colSpan={header.colSpan}\n                                    className={css`\n                                            position: sticky;\n                                            top: 0;\n                                            z-index: 2;\n                                            height: 48px; \n                                            white-space: nowrap;\n                                            background-color: ${theme.isLight ? 'hsl(var(--table-header-background)' : 'hsl(var(--table-header-background-dark)'} ); \n                                            padding-left: 16px; \n                                            padding-right: 16px;\n                                            text-align: left;\n                                            vertical-align: middle;\n                                            font-size: 14px;\n                                            font-weight: 500;    \n                                            color: hsl(var(--n2)}  \n\n                                            &:has([role=\"checkbox\"]) {\n                                                padding-right: 0;\n                                            }\n                                        `}\n                                >\n                                    {header.isPlaceholder ? null : flexRender(header.column.columnDef.header, header.getContext())}\n                                </th>\n                            );\n                        })}\n                    </tr>\n                ))}\n            </thead>\n            <tbody\n                className={css`\n                    #selected {\n                        background-color: #3f3f46cc;\n                    }\n                `}\n            >\n                {table.getRowModel().rows.length > 0 ? (\n                    table.getRowModel().rows.map(row => {\n                        return (\n                            <Fragment key={row.id}>\n                                <tr\n                                    id={row.original.selected ? 'selected' : ''}\n                                    // className={classNames(\n                                    //     'transition-colors dark:hover:bg-n7/80 hover:bg-b1/80 data-[state=selected]:bg-muted',\n                                    //     row.getIsExpanded() ? 'border-none' : 'border-b',\n                                    //     row.original.selected ? 'dark:bg-n7 bg-b1/60' : 'hsl(val(--n8))',\n                                    // )}\n                                    className={css`\n                                        ${row.getIsExpanded() ? `border:none;` : `${theme.isDark ? 'border-bottom: 1px solid hsl(var(--border-dark));' : 'border-bottom: 1px solid hsl(var(--border));'} `}\n\n                                        ${theme.isLight ? `\n                                             background-color: ${row.original.selected ? 'hsl(var(--b1) / 0.6)' : 'hsl(val(--n8))'}; \n                                        &:hover {\n                                            background-color: hsl(var(--b1) / 0.8);\n                                        }\n                                            `\n                                            :\n                                            `\n                                            background-color: ${row.original.selected ? 'hsl(var(--n7))' : 'hsl(val(--n8))'}; \n                                            &:hover {\n                                                    background-color: hsl(var(--n7) / 0.8);\n                                                }\n                                            }\n                                            `\n                                        }\n                                    `}\n                                >\n                                    {row.getVisibleCells().map(cell => {\n                                        return (\n                                            <td key={cell.id} className={css`\n                                                height: 48px;\n                                                padding: 0 16px;\n                                                font-size: 14px;\n                                            `} >\n                                                {cell.getContext().getValue() !== null ? flexRender(cell.column.columnDef.cell, cell.getContext()) : '-'}\n                                            </td>\n                                        );\n                                    })}\n                                </tr>\n                                {row.getIsExpanded() && (\n                                    <tr\n                                        //  className=\"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\"\n                                        className={css`\n                                        border-bottom: 1px solid rgb(63,63,70);\n                                        transition-property: background-color, border-color, color, fill, stroke;\n                                        transition-duration: 150ms;\n                                        transition-timing-function: ease-in-out;\n                                        \n                                        &:hover {\n                                            background-color: hsl(var(--muted) / 0.5);\n                                        }\n                                        \n                                        [data-state=\"selected\"] {\n                                            background-color: hsl(var(--muted))\n                                        }\n                                    `}\n                                    >\n                                        <td colSpan={row.getVisibleCells().length} className={css`\n                                                height: 32px;\n                                                padding: 0;\n                                            `}>\n                                            {renderSubComponent({ row })}\n                                        </td>\n                                    </tr>\n                                )}\n                            </Fragment>\n                        );\n                    })\n                ) : (\n                    <tr >\n                        <td colSpan={columns.length}>\n                            <EmptySearchResult>{`No Data`}</EmptySearchResult>\n                        </td>\n                    </tr>\n                )}\n            </tbody>\n        </table>\n    );\n}\n","import { css } from '@emotion/css';\nimport styled from '@emotion/styled';\n\nexport const HoverStyle = css`\n    &:hover {\n        .filter-content {\n            visibility: visible;\n        }\n    }\n`;\n\nexport const ColumnStyleWrapper = styled.div`\n    .field-key {\n        padding: 0px 4px 2px;\n        margin-right: 4px;\n        border-radius: 4px;\n    }\n`;\n","import { IconButton } from '@grafana/ui';\nimport { useAtom, useAtomValue } from 'jotai';\nimport { nanoid } from 'nanoid';\nimport React from 'react';\nimport { selectedFieldsAtom, dataFilterAtom, tableFieldsAtom } from 'store/discover';\nimport { isComplexType } from 'utils/data';\n\nexport function ContentTableActions({ fieldName, fieldValue }: any) {\n    const [selectedFields, setSelectedFields] = useAtom(selectedFieldsAtom);\n    const [dataFilter, setDataFilter] = useAtom(dataFilterAtom);\n    const tableFields = useAtomValue(tableFieldsAtom);\n    const fieldType = tableFields.find(field => field.Field === fieldName)?.Type;\n    const hasField = selectedFields.some((item: any) => item.Field === fieldName);\n    const filterValue = typeof fieldValue === 'object' ? JSON.stringify(fieldValue) : fieldValue;\n    return (\n        <>\n            <div className=\"icons\" style={{ display: 'flex', justifyContent: 'flex-end' }}>\n                {!isComplexType(fieldType) && (\n                    <>\n                        <IconButton\n                            name=\"plus-circle\"\n                            tooltip=\"Equivalent filtration\"\n                            onClick={() => {\n                                setDataFilter([...dataFilter, { fieldName: fieldName, operator: '=', value: [filterValue], id: nanoid() }]);\n                            }}\n                        />\n                        <IconButton\n                            name=\"minus-circle\"\n                            tooltip=\"Nonequivalent filtration\"\n                            onClick={() => {\n                                setDataFilter([...dataFilter, { fieldName: fieldName, operator: '!=', value: [filterValue], id: nanoid() }]);\n                            }}\n                        />\n                    </>\n                )}\n                <IconButton\n                        name=\"plus\"\n                        tooltip={hasField ? 'Delete From Table' : 'Add To Table'}\n                        onClick={() => {\n                            const field = tableFields.find(field => field.Field === fieldName);\n                            if (hasField) {\n                                const index = selectedFields.findIndex((item: any) => item.Field === fieldName);\n                                selectedFields.splice(index, 1);\n                                setSelectedFields([...selectedFields]);\n                            } else {\n                                setSelectedFields([...selectedFields, field]);\n                            }\n                        }}\n                    />\n            </div>\n        </>\n    );\n}\n","export const SELECTDB_THEME: any = {\n    '--w-rjv-font-family': 'monospace',\n    '--w-rjv-color': '#9cdcfe',\n    '--w-rjv-key-number': 'rgb(123, 225, 136)',\n    '--w-rjv-key-string': 'rgb(123, 225, 136)',\n    '--w-rjv-background-color': 'black',\n    '--w-rjv-line-color': '#36334280',\n    '--w-rjv-arrow-color': '#838383',\n    '--w-rjv-edit-color': 'var(--w-rjv-color)',\n    '--w-rjv-info-color': '#9c9c9c7a',\n    '--w-rjv-update-color': '#9cdcfe',\n    '--w-rjv-copied-color': '#9cdcfe',\n    '--w-rjv-copied-success-color': '#28a745',\n\n    '--w-rjv-curlybraces-color': '#d4d4d4',\n    '--w-rjv-colon-color': '#d4d4d4',\n    '--w-rjv-brackets-color': '#d4d4d4',\n    '--w-rjv-ellipsis-color': '#cb4b16',\n    '--w-rjv-quotes-color': 'var(--w-rjv-key-string)',\n    '--w-rjv-quotes-string-color': 'var(--w-rjv-type-string-color)',\n\n    '--w-rjv-type-string-color': 'rgb(149, 179, 255)',\n    '--w-rjv-type-int-color': 'rgb(149, 179, 255)',\n    '--w-rjv-type-float-color': 'rgb(149, 179, 255)',\n    '--w-rjv-type-bigint-color': 'rgb(149, 179, 255)',\n    '--w-rjv-type-boolean-color': 'rgb(149, 179, 255)',\n    '--w-rjv-type-date-color': 'rgb(149, 179, 255)',\n    '--w-rjv-type-url-color': 'rgb(149, 179, 255)',\n    '--w-rjv-type-null-color': 'rgb(149, 179, 255)',\n    '--w-rjv-type-nan-color': 'rgb(149, 179, 255)',\n    '--w-rjv-type-undefined-color': 'rgb(149, 179, 255)',\n};\n\nexport const SELECTDB_THEME_LIGHT: any = {\n    '--w-rjv-font-family': 'monospace',\n    '--w-rjv-color': 'hsla(223, 98%, 58%, 1)',\n    '--w-rjv-key-number': 'rgb(123, 225, 136)',\n    '--w-rjv-key-string': 'hsla(134, 100%, 35%, 1)',\n    '--w-rjv-background-color': 'hsla(215, 100%, 95%, 0.2)',\n    '--w-rjv-line-color': '#36334280',\n    '--w-rjv-arrow-color': '#838383',\n    '--w-rjv-edit-color': 'var(--w-rjv-color)',\n    '--w-rjv-info-color': 'hsla(240, 5%, 26%, 1)',\n    '--w-rjv-update-color': '#9cdcfe',\n    '--w-rjv-copied-color': '#9cdcfe',\n    '--w-rjv-copied-success-color': '#28a745',\n\n    '--w-rjv-curlybraces-color': 'hsla(240, 5%, 26%, 1)',\n    '--w-rjv-colon-color': 'hsla(240, 5%, 26%, 1)',\n    '--w-rjv-brackets-color': 'hsla(240, 5%, 26%, 1)',\n    '--w-rjv-ellipsis-color': '#cb4b16',\n    '--w-rjv-quotes-color': 'var(--w-rjv-key-string)',\n    '--w-rjv-quotes-string-color': 'var(--w-rjv-type-string-color)',\n\n    '--w-rjv-type-string-color': 'hsla(223, 98%, 58%, 1)',\n    '--w-rjv-type-int-color': 'hsla(223, 98%, 58%, 1)',\n    '--w-rjv-type-float-color': 'hsla(223, 98%, 58%, 1)',\n    '--w-rjv-type-bigint-color': 'hsla(223, 98%, 58%, 1)',\n    '--w-rjv-type-boolean-color': 'hsla(223, 98%, 58%, 1)',\n    '--w-rjv-type-date-color': 'hsla(223, 98%, 58%, 1)',\n    '--w-rjv-type-url-color': 'hsla(223, 98%, 58%, 1)',\n    '--w-rjv-type-null-color': 'hsla(223, 98%, 58%, 1)',\n    '--w-rjv-type-nan-color': 'hsla(223, 98%, 58%, 1)',\n    '--w-rjv-type-undefined-color': 'hsla(223, 98%, 58%, 1)',\n};\n","import { useAtom } from 'jotai';\nimport { css } from '@emotion/css';\nimport { nanoid } from 'nanoid';\nimport { dataFilterAtom } from 'store/discover';\nimport React from 'react';\nimport { isComplexType } from 'utils/data';\nimport { IconButton } from '@grafana/ui';\n\ninterface ContentItemProps {\n    fieldName: string;\n    fieldValue: string | number;\n    fieldType: string;\n}\n\nexport function ContentItem({ fieldName, fieldValue, fieldType }: ContentItemProps) {\n    const [dataFilter, setDataFilter] = useAtom(dataFilterAtom);\n    return (\n        <div>\n            {!isComplexType(fieldType) && (\n                <div className={css`\n                    display: flex;\n                    alignItems: 'center';\n                    margin-left: 10px;\n                `}>\n                    <IconButton\n                        name=\"plus-circle\"\n                        onClick={e => {\n                            setDataFilter([...dataFilter, { fieldName, operator: '=', value: [fieldValue], id: nanoid() }]);\n                            e.stopPropagation();\n                        }}\n                        tooltip=\"Equivalent filtration\"\n                    />\n                    <IconButton\n                        name=\"minus-circle\"\n                        style={{ marginLeft: '4px' }}\n                        onClick={e => {\n                            setDataFilter([\n                                ...dataFilter,\n                                {\n                                    fieldName,\n                                    operator: '!=',\n                                    value: [fieldValue],\n                                    id: nanoid(),\n                                },\n                            ]);\n                            e.stopPropagation();\n                        }}\n                        tooltip=\"Nonequivalent filtration\"\n                    />\n                </div>\n            )}\n        </div>\n    );\n}\n","import { useAtom } from 'jotai';\nimport { nanoid } from 'nanoid';\nimport { isComplexType } from 'utils/data';\nimport { IconButton } from '@grafana/ui';\nimport React from 'react';\nimport { css } from '@emotion/css';\nimport { surroundingDataFilterAtom } from 'store/discover';\n\ninterface ContentItemProps {\n    fieldName: string;\n    fieldValue: string | number;\n    fieldType: string;\n}\n\nexport function SurroundingContentItem({ fieldName, fieldValue, fieldType }: ContentItemProps) {\n    const [surroundingDataFilter, setSurroundingDataFilter] = useAtom(surroundingDataFilterAtom);\n    return (\n        <div>\n            {!isComplexType(fieldType) && (\n                <div className={css`\n                    display: flex;\n                    alignItems: 'center';\n                    margin-left: 10px;\n                `}>\n                    <IconButton\n                        name=\"plus-circle\"\n                        onClick={e => {\n                            setSurroundingDataFilter([...surroundingDataFilter, { fieldName, operator: '=', value: [fieldValue], id: nanoid() }]);\n                            e.stopPropagation();\n                        }}\n                        tooltip=\"Equivalent filtration\"\n                    />\n                    <IconButton\n                        name=\"minus-circle\"\n                        style={{ marginLeft: '4px' }}\n                        onClick={e => {\n                            setSurroundingDataFilter([\n                                ...surroundingDataFilter,\n                                {\n                                    fieldName,\n                                    operator: '!=',\n                                    value: [fieldValue],\n                                    id: nanoid(),\n                                },\n                            ]);\n                            e.stopPropagation();\n                        }}\n                        tooltip=\"Nonequivalent filtration\"\n                    />\n                </div>\n            )}\n        </div>\n    );\n}\n","import { css } from '@emotion/css';\nimport { Button, IconButton } from '@grafana/ui';\nimport React from 'react';\nimport { useTranslation } from 'react-i18next';\n\ninterface SurroundingLogsActionsProps {\n    getSurroundingData: (params: { time: string }) => void;\n    getSurroundingDataLoading: boolean;\n    time: string;\n    timeFieldPageSize: number;\n    setTimeFieldPageSize: (value: number) => void;\n    tips: string;\n    count: number;\n    type: 'before' | 'after';\n}\n\nexport function SurroundingLogsActions(props: SurroundingLogsActionsProps) {\n    const { getSurroundingData, getSurroundingDataLoading, time, timeFieldPageSize, tips, count, type } = props;\n    const { t } = useTranslation();\n    return (\n        <div\n            className={css`\n                display: flex;\n                align-items: center;\n                justify-content: flex-start;\n            `}\n        >\n            <Button\n                // loading={getSurroundingDataLoading}\n                className=\"font-normal text-n2 hover:text-b7 hover:no-underline\"\n                onClick={() => {\n                    getSurroundingData({ time: time });\n                }}\n                type=\"reset\"\n            >\n                {!getSurroundingDataLoading && (\n                    <>{type === 'before' ? <IconButton name=\"arrow-up\" aria-label={`Load After`} /> : <IconButton name=\"arrow-down\" aria-label={`Load Before`} />}</>\n                )}\n                {`Load`} {timeFieldPageSize} {t`Items`}\n            </Button>\n            <div\n                className={css`\n                    margin-left: 8px;\n                `}\n            >\n                {count} {`Items`} {` `}\n                {tips}\n            </div>\n        </div>\n    );\n}\n","import { css } from '@emotion/css';\nimport styled from '@emotion/styled';\n\nexport const DiscoverFilterWrapper = styled.div`\n    display: flex;\n    align-items: center;\n    .filter {\n        align-self: flex-start;\n        margin-top: 3px;\n        margin-right: 8px;\n        font-weight: 500;\n        font-size: 14px;\n        font-style: normal;\n        line-height: 18px;\n    }\n    .filter-tag {\n        display: flex;\n        flex: 1;\n        flex-wrap: wrap;\n        align-items: center;\n        row-gap: 8px;\n        .tag {\n            display: flex;\n            align-items: center;\n            max-width: 400px;\n            height: 24px;\n            padding: 2px 8px;\n            font-weight: 400;\n            font-size: 12px;\n            font-style: normal;\n            line-height: 18px;\n            border: 0px;\n            border-radius: 6px;\n            .text {\n                overflow: hidden;\n                white-space: nowrap;\n                text-overflow: ellipsis;\n            }\n        }\n    }\n`;\n\nexport const containerStyle = css`\n    width: 320px;\n`;\n\nexport const rowStyle = css`\n    display: flex;\n    gap: 8px;\n    margin-bottom: 12px;\n`;\n\nexport const colStyle = css`\n    flex: 1;\n`;\n\nexport const footerStyle = css`\n    display: flex;\n    justify-content: flex-end;\n    gap: 8px;\n    margin-top: 16px;\n`;\n","import { useAtom, useAtomValue } from 'jotai';\nimport React from 'react';\nimport { nanoid } from 'nanoid';\nimport { Select, InlineField, InlineFieldRow, InlineSwitch, Button, Input, Field } from '@grafana/ui';\nimport { tableFieldsAtom, dataFilterAtom, tableFieldValuesAtom, surroundingDataFilterAtom } from 'store/discover';\nimport { Operator } from 'types/type';\nimport { OPERATORS } from 'utils/data';\nimport { Controller, useForm } from 'react-hook-form';\nimport { containerStyle, rowStyle, colStyle, footerStyle } from './discover-filter.style';\nimport { FilterContentProps } from '../types';\n\nexport function FilterContent(props: FilterContentProps) {\n    const { onHide, dataFilterValue } = props;\n    const [surroundingDataFilter, setSurroundingDataFilter] = useAtom(surroundingDataFilterAtom);\n    const tableFields = useAtomValue(tableFieldsAtom);\n    if (process.env.NODE_ENV !== 'production') {\n        dataFilterAtom.debugLabel = 'dataFilter';\n    }\n    const tableFieldValue = useAtomValue(tableFieldValuesAtom);\n\n    const {\n        control,\n        handleSubmit,\n        watch,\n        register,\n        formState: { errors },\n    } = useForm({\n        defaultValues: {\n            field: {\n                label: dataFilterValue?.fieldName,\n                value: dataFilterValue?.fieldName,\n            },\n            operator: {\n                label: dataFilterValue?.operator,\n                value: dataFilterValue?.operator,\n            },\n            value: dataFilterValue?.value,\n            minValue: Array.isArray(dataFilterValue?.value) ? dataFilterValue?.value[0] : '',\n            maxValue: Array.isArray(dataFilterValue?.value) ? dataFilterValue?.value[1] : '',\n            label: dataFilterValue?.label || '',\n            showLabel: !!dataFilterValue?.label, // Initialize based on dataFilterValue\n        },\n    });\n    const operator = watch('operator');\n    const showLabel: any = watch('showLabel');\n\n\n    const getValue = (value: string): string | number => (isNaN(+value) ? value : +value);\n\n    const onSubmit = (formValues: any) => {\n        const { field, operator, value, minValue, maxValue, label } = formValues;\n        const current = surroundingDataFilter.find(f => f.id === dataFilterValue?.id);\n        const id = dataFilterValue?.id || nanoid();\n\n        let newValue: any[] = [];\n\n        if (operator.value === 'between' || operator.value === 'not between') {\n            if (minValue && maxValue) {\n                newValue = [getValue(minValue), getValue(maxValue)];\n            }\n        } else if (value || typeof value === 'number') {\n            newValue = [value];\n        }\n\n        const newItem = {\n            id,\n            fieldName: field.value,\n            operator: operator.value,\n            label,\n            value: newValue,\n        };\n\n        if (current) {\n            const updated = surroundingDataFilter.map(f => (f.id === id ? newItem : f));\n            setSurroundingDataFilter(updated);\n        } else {\n            setSurroundingDataFilter([...surroundingDataFilter, newItem]);\n        }\n\n        onHide();\n    };\n\n    function renderFiledComponent() {\n        const currentOperator = (typeof operator === 'string' ? operator : operator?.value) as Operator | undefined;\n        if (currentOperator && currentOperator !== 'is null' && currentOperator !== 'is not null' && (currentOperator === 'between' || currentOperator === 'not between')) {\n            return (\n                <div className={rowStyle}>\n                    <div className={colStyle}>\n                        <Field label=\"Min Value\" invalid={!!errors.minValue} error={errors.minValue?.message}>\n                            <Input {...register('minValue', { required: 'Enter the minValue' })} />\n                        </Field>\n                    </div>\n                    <div className={colStyle}>\n                        <Field label=\"Max Value\" invalid={!!errors.maxValue} error={errors.maxValue?.message}>\n                            <Input {...register('maxValue', { required: 'Enter the maxValue' })} />\n                        </Field>\n                    </div>\n                </div>\n            );\n        }\n        if (\n            currentOperator === '=' ||\n            currentOperator === '!=' ||\n            currentOperator === 'like' ||\n            currentOperator === 'not like' ||\n            currentOperator === 'match_all' ||\n            currentOperator === 'match_any' ||\n            currentOperator === 'match_phrase' ||\n            currentOperator === 'match_phrase_prefix'\n        ) {\n            return (\n                <>\n                    <Field label=\"Value\" invalid={!!errors.value} error={(errors.value as any)?.message}>\n                        <Input {...register('value', { required: 'Enter the value' })} list=\"field-value-list\" />\n                    </Field>\n                    <datalist id=\"field-value-list\">\n                        {tableFieldValue.map((item, idx) => (\n                            <option key={idx} value={item.value} />\n                        ))}\n                    </datalist>\n                </>\n            );\n        }\n        if (currentOperator === 'in' || currentOperator === 'not in') {\n            return (\n                <Field label=\"Value\" invalid={!!errors.value} error={(errors.value as any)?.message}>\n                    <Controller\n                        name=\"value\"\n                        control={control}\n                        rules={{ required: 'Enter the value' }}\n                        render={({ field }) => (\n                            <Select\n                                {...field}\n                                isMulti={true}\n                                options={tableFieldValue.map(item => ({\n                                    label: item.value,\n                                    value: item.value,\n                                }))}\n                                placeholder=\"Select value\"\n                                onChange={selected => field.onChange(selected ? selected.map((s: any) => s.value) : [])}\n                                value={tableFieldValue\n                                    .filter(item => Array.isArray(field.value) && field.value.includes(item.value))\n                                    .map(item => ({\n                                        label: item.value,\n                                        value: item.value,\n                                    }))}\n                            />\n                        )}\n                    />\n                </Field>\n            );\n        }\n        return <></>;\n    }\n\n    return (\n        <form onSubmit={handleSubmit(onSubmit)} className={containerStyle}>\n            <div className={rowStyle}>\n                <div className={colStyle}>\n                    <Field label=\"Columns\" invalid={!!errors.field} error={(errors.field as any)?.message}>\n                        <Controller\n                            name=\"field\"\n                            control={control}\n                            rules={{ required: 'Select Field' }}\n                            render={({ field }) => (\n                                <Select\n                                    {...field}\n                                    options={tableFields.map(f => ({\n                                        label: f.Field,\n                                        value: f.Field,\n                                    }))}\n                                />\n                            )}\n                        />\n                    </Field>\n                </div>\n                <div className={colStyle}>\n                    <Field label=\"Operator\" invalid={!!errors.operator} error={(errors.operator as any)?.message}>\n                        <Controller\n                            name=\"operator\"\n                            control={control}\n                            rules={{ required: 'Select Operator' }}\n                            render={({ field }) => (\n                                <Select\n                                    {...field}\n                                    options={OPERATORS.map(op => ({\n                                        label: op,\n                                        value: op,\n                                    }))}\n                                />\n                            )}\n                        />\n                    </Field>\n                </div>\n            </div>\n\n            {renderFiledComponent()}\n\n            <InlineFieldRow>\n                <InlineField label=\"Custom Label\">\n                    <Controller name=\"showLabel\" control={control} render={({ field }) => <InlineSwitch {...field} />}></Controller>\n                </InlineField>\n            </InlineFieldRow>\n\n            {showLabel && (\n                <Field label=\"Label\" invalid={!!errors.label} error={errors.label?.message}>\n                    <Input {...register('label', { required: 'Please enter label' })} />\n                </Field>\n            )}\n\n            <div className={footerStyle}>\n                <Button\n                    variant=\"secondary\"\n                    onClick={e => {\n                        e.preventDefault();\n                        onHide();\n                    }}\n                >\n                    Cancel\n                </Button>\n                <Button type=\"submit\">Confirm</Button>\n            </div>\n        </form>\n    );\n}\n","import React, { useRef, useState } from 'react';\nimport { DiscoverFilterWrapper } from './discover-filter.style';\nimport { useTranslation } from 'react-i18next';\nimport { useAtom } from 'jotai';\nimport { FilterContent } from './filter-content';\nimport { surroundingDataFilterAtom } from 'store/discover';\nimport { getFilterSQL } from 'utils/data';\nimport { css } from '@emotion/css';\nimport { Badge, Icon, IconButton, Toggletip, useTheme2 } from '@grafana/ui';\nimport { DiscoverFilterProps } from '../types';\n\nexport default function SurroundingDiscoverFilter(props: DiscoverFilterProps) {\n    const [surroundingDataFilter, setSurroundingDataFilter] = useAtom(surroundingDataFilterAtom);\n    const [open, setOpen] = useState<boolean>(false);\n    const [dataFilterOpen, setDataFilterOpen] = useState<any>({});\n    const discoverFilterRef = useRef(null);\n    const { t } = useTranslation();\n    const theme = useTheme2();\n\n    console.log('surroundingDataFilter', surroundingDataFilter);\n\n    return (\n        <DiscoverFilterWrapper\n            ref={discoverFilterRef}\n            className={css`\n                background-color: ${theme.isDark ? 'rgb(24, 27, 31)' : '#FFF'};\n                padding: 1rem;\n                padding-bottom: 1.5rem;\n                margin-top: 1px;\n                border-radius: 0 0 0.25rem 0.25rem;\n            `}\n        >\n            <div className=\"text-xs font-medium\">{t`Filter`}</div>\n            <div className=\"filter-tag\">\n                {surroundingDataFilter.map((dataFilterValue, index) => {\n                    return (\n                        <div\n                            key={index.toString()}\n                            className={css`\n                                margin-left: 8px;\n                            `}\n                        >\n                            <Toggletip\n                                show={dataFilterOpen[dataFilterValue.id]}\n                                onOpen={() => {\n                                    setDataFilterOpen({\n                                        ...dataFilterOpen,\n                                        [dataFilterValue.id]: true,\n                                    });\n                                }}\n                                onClose={() => {\n                                    setDataFilterOpen({\n                                        ...dataFilterOpen,\n                                        [dataFilterValue.id]: false,\n                                    });\n                                }}\n                                closeButton={true}\n                                content={\n                                    <FilterContent\n                                        onHide={() => {\n                                            setDataFilterOpen({\n                                                ...dataFilterOpen,\n                                                [dataFilterValue.id]: false,\n                                            });\n                                        }}\n                                        dataFilterValue={dataFilterValue}\n                                    />\n                                }\n                                placement=\"bottom\"\n                            >\n                                <div>\n                                    <Badge\n                                        key={index}\n                                        text={\n                                            <div\n                                                className={css`\n                                                    display: flex;\n                                                    align-items: center;\n                                                    justify-content: space-between;\n                                                `}\n                                            >\n                                                <span>{dataFilterValue.label ? <span>{dataFilterValue.label}</span> : <span>{getFilterSQL(dataFilterValue)}</span>}</span>\n                                                <div\n                                                    className={css`\n                                                        margin-left: 0.5rem;\n                                                        cursor: pointer;\n                                                    `}\n                                                    onClick={() => {\n                                                        const data_filters = surroundingDataFilter.filter(e => e !== dataFilterValue) || [];\n                                                        console.log('data_filters', data_filters);\n                                                        setSurroundingDataFilter(data_filters);\n                                                        // setLoc(prev => {\n                                                        //     const searchParams = prev.searchParams;\n                                                        //     searchParams?.set('data_filters', JSON.stringify(data_filters));\n                                                        //     return {\n                                                        //         ...prev,\n                                                        //         searchParams,\n                                                        //     };\n                                                        // });\n                                                    }}\n                                                >\n                                                    <Icon name=\"times\" />\n                                                </div>\n                                            </div>\n                                        }\n                                        color=\"blue\"\n                                    ></Badge>\n                                </div>\n                            </Toggletip>\n                        </div>\n                    );\n                })}\n                <Toggletip\n                    show={open}\n                    closeButton={false}\n                    onOpen={() => {\n                        setOpen(true);\n                    }}\n                    content={\n                        <FilterContent\n                            onHide={() => {\n                                console.log('onHide');\n                                setOpen(false);\n                            }}\n                        />\n                    }\n                    placement=\"bottom\"\n                >\n                    <IconButton name=\"plus\" tooltip=\"Add filter\" style={{ marginLeft: 10 }} />\n                </Toggletip>\n            </div>\n        </DiscoverFilterWrapper>\n    );\n}\n","import { QueryTableDataParams, DataFilterType, SurroundingParams } from 'types/type';\n\nexport function getQueryTableResultSQL(params: QueryTableDataParams) {\n    const indexesStatement = params.indexes_statement;\n    let statement = `SELECT * FROM \\`${params.database}\\`.\\`${params.table}\\` WHERE`;\n\n    if (indexesStatement && params.search_type === 'Search') {\n        statement += ` (${indexesStatement}) AND`;\n    }\n\n    // timeField \n    statement += ` (\\`${params.timeField}\\` BETWEEN '${params.startDate}' AND '${params.endDate}') `;\n\n    statement = params.data_filters.reduce((prev, curr) => {\n        return addSqlFilter(prev, curr);\n    }, statement);\n\n    if (params.search_type === 'SQL' && params.search_value) {\n        statement = statement + ` AND ${params.search_value}`;\n    }\n\n    if (params.search_type === 'Lucene' && params.lucene_where) {\n        statement = statement + ` AND (${params.lucene_where})`;\n    }\n\n    // ORDER BY  timeField \n    statement = statement + ` ORDER BY \\`${params.timeField}\\` DESC LIMIT ${+params.page_size} OFFSET ${(+params?.page - 1) * params.page_size} `;\n\n    return statement;\n}\n\nexport function getQueryTableChartsSQL(params: QueryTableDataParams) {\n    const indexes = params.indexes;\n    let statement = `SELECT ${params.interval}_FLOOR(table_per_time.T,${params.interval_value}) as TT,sum(table_per_time.cnt) FROM (SELECT ${params.interval}_FLOOR(${params.timeField}) as T,count(*) as cnt FROM \\`${params.database}\\`.\\`${params.table}\\` WHERE`;\n    if (indexes && params.search_type === 'Search') {\n        statement += ` (${indexes}) AND`;\n    }\n    statement += ` (\\`${params.timeField}\\` between '${params.startDate}' AND '${params.endDate}') `;\n    if (params.data_filters.length > 0) {\n        statement = params.data_filters.reduce((prev, curr) => {\n            return addSqlFilter(prev, curr);\n        }, statement);\n    }\n    if (params.search_type === 'SQL' && params.search_value) {\n        statement = statement + ` ` + `AND ${params.search_value}`;\n    }\n\n    if (params.search_type === 'Lucene' && params.lucene_where) {\n        statement = statement + ` AND (${params.lucene_where})`;\n    }\n    statement = statement + ` ` + `GROUP BY T ORDER BY T) as table_per_time GROUP BY TT ORDER BY TT`;\n\n    return statement;\n}\n\nexport function getQueryTableResultCountSQL(params: QueryTableDataParams) {\n    const indexes = params.indexes;\n    let statement = `SELECT SUM(table_per_time.cnt) AS total_count\n        FROM (\n          SELECT ${params.interval}_FLOOR(${params.timeField}) as T, COUNT(*) as cnt\n          FROM \\`${params.database}\\`.\\`${params.table}\\`\n          WHERE`;\n    if (indexes && params.search_type === 'Search') {\n        statement += ` (${indexes}) AND`;\n    }\n    statement += ` (\\`${params.timeField}\\` between '${params.startDate}' AND '${params.endDate}')`;\n\n    if (params.data_filters.length > 0) {\n        statement = params.data_filters.reduce((prev, curr) => {\n            return addSqlFilter(prev, curr);\n        }, statement);\n    }\n    if (params.search_type === 'SQL' && params.search_value) {\n        statement = statement + ` ` + `AND ${params.search_value}`;\n    }\n\n    if (params.search_type === 'Lucene' && params.lucene_where) {\n        statement = statement + ` AND (${params.lucene_where})`;\n    }\n    statement = statement + ` ` + `GROUP BY T) AS table_per_time;`;\n    return statement;\n}\n\nexport function getSurroundingSQL(params: SurroundingParams) {\n    let statement = `SELECT * FROM \\`${params.database}\\`.\\`${params.table}\\` WHERE`;\n    statement += ` (${params.timeField} ${params.operator} '${params.time}')`;\n    statement = params.data_filters.reduce((prev: any, curr: any) => {\n        return addSqlFilter(prev, curr);\n    }, statement);\n    const orderSymbol = params.operator === '<' ? 'DESC' : 'ASC';\n    statement = statement + ` ` + `ORDER BY \\`${params.timeField}\\` ${orderSymbol} LIMIT ${+params.pageSize}`;\n    return statement;\n}\n\nexport function getFilterSQL({ fieldName, operator, value }: DataFilterType): string {\n    const valueString = value.map(e => {\n        if (typeof e === 'string') {\n            return `'${e}'`;\n        } else {\n            return e;\n        }\n    });\n\n    const transformedFieldName = transformFieldPath(fieldName);\n\n    if (\n        operator === '=' ||\n        operator === '!=' ||\n        operator === 'like' ||\n        operator === 'not like' ||\n        operator === 'match_all' ||\n        operator === 'match_any' ||\n        operator === 'match_phrase' ||\n        operator === 'match_phrase_prefix'\n    ) {\n        return `${transformedFieldName} ${operator} ${valueString[0]}`;\n    }\n\n    if (operator === 'is null' || operator === 'is not null') {\n        return `${transformedFieldName} ${operator}`;\n    }\n\n    if (operator === 'between' || operator === 'not between') {\n        return `${transformedFieldName} ${operator} ${valueString[0]} AND ${valueString[1]}`;\n    }\n\n    if (operator === 'in' || operator === 'not in') {\n        return `${transformedFieldName} ${operator} (${valueString})`;\n    }\n\n    return '';\n}\n\nexport function addSqlFilter(sql: string, dataFilterValue: DataFilterType): string {\n    let result = sql;\n    if (!sql.toUpperCase().includes('WHERE')) {\n        result += ' WHERE';\n    } else {\n        result += ' AND';\n    }\n\n    result += ` (${getFilterSQL(dataFilterValue)})`;\n\n    return result;\n}\n\nexport function transformFieldPath(fieldPath: string): string {\n    const parts = fieldPath.split('.');\n    return (\n        parts[0] +\n        parts\n            .slice(1)\n            .map(part => `['${part}']`)\n            .join('')\n    );\n}\n","import { getBackendSrv } from '@grafana/runtime';\nimport { getQueryTableChartsSQL, getQueryTableResultCountSQL, getQueryTableResultSQL, getSurroundingSQL } from './sql';\n\nexport function getTableDataService(payload: any) {\n    const { selectdbDS, ...rest } = payload;\n    const QueryTableResultSQL = getQueryTableResultSQL(rest);\n    const response = getBackendSrv().fetch({\n        url: '/api/ds/query',\n        method: 'POST',\n        data: {\n            queries: [\n                {\n                    refId: 'getTableData',\n                    datasource: {\n                        type: 'mysql',\n                        uid: selectdbDS.uid,\n                    },\n                    rawSql: QueryTableResultSQL,\n                    format: 'table',\n                },\n            ],\n        },\n        credentials: 'include',\n    });\n    return response;\n}\n\nexport function getTableDataChartsService(payload: any) {\n    const { selectdbDS, ...rest } = payload;\n    const QueryTableChartsSQL = getQueryTableChartsSQL(rest);\n    const response = getBackendSrv().fetch({\n        url: '/api/ds/query',\n        method: 'POST',\n        data: {\n            queries: [\n                {\n                    refId: 'getTableDataCharts',\n                    datasource: {\n                        type: 'mysql',\n                        uid: selectdbDS.uid,\n                    },\n                    rawSql: QueryTableChartsSQL,\n                    format: 'table',\n                },\n            ],\n        },\n        credentials: 'include',\n    });\n    return response;\n}\n\nexport function getTopDataService(payload: any) {\n    const { selectdbDS, ...rest } = payload;\n    const QueryTableResultSQL = getQueryTableResultSQL(rest);\n    const response = getBackendSrv().fetch({\n        url: '/api/ds/query',\n        method: 'POST',\n        data: {\n            queries: [\n                {\n                    refId: 'getTableTopData',\n                    datasource: {\n                        type: 'mysql',\n                        uid: selectdbDS.uid,\n                    },\n                    rawSql: QueryTableResultSQL,\n                    format: 'table',\n                },\n            ],\n        },\n        credentials: 'include',\n    });\n    return response;\n}\n\nexport function getTableDataCountService(payload: any) {\n    const { selectdbDS, ...rest } = payload;\n    const QueryTableResultCountSQL = getQueryTableResultCountSQL(rest);\n    const response = getBackendSrv().fetch({\n        url: '/api/ds/query',\n        method: 'POST',\n        data: {\n            queries: [\n                {\n                    refId: 'getTableCountData',\n                    datasource: {\n                        type: 'mysql',\n                        uid: selectdbDS.uid,\n                    },\n                    rawSql: QueryTableResultCountSQL,\n                    format: 'table',\n                },\n            ],\n        },\n        credentials: 'include',\n    });\n    return response;\n}\n\n\nexport function getSurroundingDataService(payload: any) {\n    const { selectdbDS, ...rest } = payload;\n    const surroundingSQL = getSurroundingSQL(rest);\n    const response = getBackendSrv().fetch({\n        url: '/api/ds/query',\n        method: 'POST',\n        data: {\n            queries: [\n                {\n                    refId: 'getSurroundingData',\n                    datasource: {\n                        type: 'mysql',\n                        uid: selectdbDS.uid,\n                    },\n                    rawSql: surroundingSQL,\n                    format: 'table',\n                },\n            ],\n        },\n        credentials: 'include',\n    });\n    return response;\n}\n\n","\nimport { useAtom, useAtomValue } from 'jotai';\nimport { nanoid } from 'nanoid';\nimport { IconButton } from '@grafana/ui';\nimport React from 'react';\nimport { surroundingDataFilterAtom, tableFieldsAtom } from 'store/discover';\nimport { isComplexType } from 'utils/data';\nimport { css } from '@emotion/css';\n\nexport function SurroundingContentTableActions({ fieldName, fieldValue }: any) {\n    console.log(fieldName, fieldValue);\n    // const [selectedSurroundingFields, setSelectedSurroundingFields] = useAtom(surroundingSelectedFieldsAtom);\n    const [surroundingDataFilter, setSurroundingDataFilter] = useAtom(surroundingDataFilterAtom);\n    const tableFields = useAtomValue(tableFieldsAtom);\n    const fieldType = tableFields.find(field => field.Field === fieldName).Type;\n    // const hasField = selectedSurroundingFields.some((item: any) => item.Field === fieldName);\n    // const filterValue = typeof fieldValue === 'object' ? JSON.stringify(fieldValue) : fieldValue;\n    return (\n        <>\n            <div className=\"icons\" style={{ display: 'flex', justifyContent: 'flex-end' }}>\n                {!isComplexType(fieldType) && (\n                    <div\n                        className={css`\n                            display: flex;\n                            align-items: 'center';\n                            margin-left: 10px;\n                        `}\n                    >\n                        <IconButton\n                            name=\"plus-circle\"\n                            onClick={e => {\n                                console.log(e);\n                                setSurroundingDataFilter([...surroundingDataFilter, { fieldName, operator: '=', value: [fieldValue], id: nanoid() }]);\n                                e.stopPropagation();\n                            }}\n                            tooltip=\"Equivalent filtration\"\n                        />\n                        <IconButton\n                            name=\"minus-circle\"\n                            style={{ marginLeft: '4px' }}\n                            onClick={e => {\n                                console.log(e);\n                                setSurroundingDataFilter([\n                                    ...surroundingDataFilter,\n                                    {\n                                        fieldName,\n                                        operator: '!=',\n                                        value: [fieldValue],\n                                        id: nanoid(),\n                                    },\n                                ]);\n                                e.stopPropagation();\n                            }}\n                            tooltip=\"Nonequivalent filtration\"\n                        />\n                    </div>\n                )}\n            </div>\n        </>\n    );\n}\n","'use client';\n\nimport { Row, ColumnDef } from '@tanstack/react-table';\nimport JsonView from '@uiw/react-json-view';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { ColumnStyleWrapper, HoverStyle } from '../discover-content/discover-content.style';\nimport { SELECTDB_THEME, SELECTDB_THEME_LIGHT } from '../discover-content/json-viewer.theme';\nimport { useAtom, useAtomValue } from 'jotai';\nimport { useRequest } from 'ahooks';\nimport { css } from '@emotion/css';\nimport { SurroundingContentItem } from './surrounding-content-item';\nimport { SurroundingLogsActions } from './logs-actions';\nimport SurroundingDiscoverFilter from './discover-filter';\nimport { Button, IconButton, LoadingBar, Tab, TabContent, TabsBar, useTheme2 } from '@grafana/ui';\nimport { SurroundingParams } from './types';\nimport SDCollapsibleTable from 'components/selectdb-ui/sd-collapsible-table';\nimport {\n    selectedRowAtom,\n    currentTimeFieldAtom,\n    currentClusterAtom,\n    currentTableAtom,\n    currentCatalogAtom,\n    currentDatabaseAtom,\n    surroundingTableDataAtom,\n    selectedDatasourceAtom,\n    afterCountAtom,\n    afterTimeAtom,\n    afterTimeFieldPageSizeAtom,\n    beforeCountAtom,\n    beforeTimeAtom,\n    beforeTimeFieldPageSizeAtom,\n    surroundingDataFilterAtom,\n    surroundingSelectedFieldsAtom,\n} from 'store/discover';\n// import dayjs from 'dayjs';\nimport { get, sortBy } from 'lodash-es';\nimport { getSurroundingDataService } from 'services/discover';\nimport { lastValueFrom } from 'rxjs';\nimport { convertColumnToRow, formatTimestampToDateTime } from 'utils/data';\nimport { generateTableDataUID } from 'utils/utils';\nimport { SurroundingContentTableActions } from './content/content-table-actions';\n\nexport default function SurroundingLogs() {\n    const theme = useTheme2();\n    const selectedRow = useAtomValue(selectedRowAtom);\n    const selectdbDS = useAtomValue(selectedDatasourceAtom);\n    const currentTimeField = useAtomValue(currentTimeFieldAtom);\n    const [selectedSurroundingFields, setSelectedSurroundingFields] = useAtom(surroundingSelectedFieldsAtom);\n    const [surroundingDataFilter] = useAtom<any>(surroundingDataFilterAtom);\n    const hasSelectedFields = selectedSurroundingFields.length > 0;\n    const [fields, setFields] = useState<any[]>([]);\n    const currentCluster = useAtomValue(currentClusterAtom);\n    const currentTable = useAtomValue(currentTableAtom);\n    const currentCatalog = useAtomValue(currentCatalogAtom);\n    const currentDatabase = useAtomValue(currentDatabaseAtom);\n    const [surroundingTableData, setSurroundingTableData] = useAtom(surroundingTableDataAtom);\n    const [beforeCount, setBeforeCount] = useAtom(beforeCountAtom);\n    const [afterCount, setAfterCount] = useAtom(afterCountAtom);\n    const [beforeTimeFieldPageSize, setBeforeTimeFieldPageSize] = useAtom(beforeTimeFieldPageSizeAtom);\n    const [afterTimeFieldPageSize, setAfterTimeFieldPageSize] = useAtom(afterTimeFieldPageSizeAtom);\n    const [beforeTime, setBeforeTime] = useAtom(beforeTimeAtom);\n    const [afterTime, setAfterTime] = useAtom(afterTimeAtom);\n    const [state, updateState] = useState([\n        {\n            label: 'Table',\n            value: 'Table',\n            active: true,\n        },\n        {\n            label: 'JSON',\n            value: 'JSON',\n            active: false,\n        },\n    ]);\n\n    function handleRemove(field: any) {\n        const index = selectedSurroundingFields.findIndex((item: any) => item.Field === field.Field);\n        selectedSurroundingFields.splice(index, 1);\n        setSelectedSurroundingFields([...selectedSurroundingFields]);\n    }\n\n    const { loading: getAfterSurroundingDataLoading, run: getAfterSurroundingData } = useRequest(\n        ({ pageSize = afterTimeFieldPageSize, time = afterTime }: any) => {\n            console.log(time);\n            const params: SurroundingParams = getQueryParams({\n                pageSize,\n                operator: '>',\n                time,\n            });\n            console.log(params.time);\n\n            return lastValueFrom(\n                getSurroundingDataService({\n                    selectdbDS,\n                    ...params,\n                }),\n            );\n        },\n        {\n            manual: true,\n            onSuccess: async (res: any, params: any) => {\n                if (res.ok) {\n                    const rowsData = convertColumnToRow(res.data.results.getSurroundingData.frames[0]);\n                    const result = generateSurroundingResult(rowsData, currentTimeField);\n                    let data = [...surroundingTableData];\n                    data.push(...result);\n                    setAfterCount(afterCount + data.length);\n                    setAfterTime(result[0]._original[currentTimeField]);\n                    setSurroundingTableData(data);\n                    // setTimeout(() => {\n                    //     scrollToSelectedRow();\n                    // }, 50);\n                }\n            },\n        },\n    );\n\n    function getQueryParams({ pageSize = 5, operator = '>', time = selectedRow.time }: any) {\n        const params: SurroundingParams = {\n            catalog: currentCatalog,\n            database: currentDatabase,\n            table: currentTable,\n            timeField: currentTimeField,\n            time,\n            data_filters: [],\n            pageSize,\n            operator,\n            cluster: currentCluster,\n            theme: theme.isDark ? 'dark' : 'light',\n        };\n        if (surroundingDataFilter.length > 0) {\n            params.data_filters = surroundingDataFilter;\n        }\n        return params;\n    }\n\n    const { loading: getBeforeSurroundingDataLoading, run: getBeforeSurroundingData } = useRequest(\n        ({ pageSize = beforeTimeFieldPageSize, time = selectedRow.time }: any) => {\n            const params: SurroundingParams = getQueryParams({\n                pageSize,\n                operator: '<',\n                time,\n            });\n\n            return lastValueFrom(\n                getSurroundingDataService({\n                    selectdbDS,\n                    ...params,\n                }),\n            );\n        },\n        {\n            manual: true,\n            onSuccess: async (res: any, params: any) => {\n                if (res.ok) {\n                    const rowsData = convertColumnToRow(res.data.results.getSurroundingData.frames[0]);\n                    const result = generateSurroundingResult(rowsData, currentTimeField);\n                    let data = [...surroundingTableData];\n                    data.unshift(...res.data);\n                    setBeforeCount(beforeCount + result.length);\n                    setBeforeTime(res.data[0]._original[currentTimeField]);\n                    setSurroundingTableData(data);\n                    // setTimeout(() => {\n                    //     scrollToSelectedRow();\n                    // }, 50);\n                }\n            },\n        },\n    );\n\n    function scrollToSelectedRow() {\n        const selectedElement = document.getElementById('selected');\n        if (selectedElement) {\n            selectedElement.scrollIntoView({ block: 'center', behavior: 'smooth' });\n        }\n    }\n\n    const { loading: initLoading } = useRequest(\n        () => {\n            const prevTimeParams: SurroundingParams = getQueryParams({\n                operator: '<',\n            });\n            const afterTimeParams: SurroundingParams = getQueryParams({\n                operator: '>',\n            });\n            return Promise.all([\n                lastValueFrom(\n                    getSurroundingDataService({\n                        selectdbDS,\n                        ...prevTimeParams,\n                    }),\n                ),\n                lastValueFrom(\n                    getSurroundingDataService({\n                        selectdbDS,\n                        ...afterTimeParams,\n                    }),\n                ),\n            ]);\n        },\n        {\n            refreshDeps: [surroundingDataFilter],\n            onSuccess: async (res: any) => {\n                if (res[0].ok && res[1].ok) {\n                    const rowsData1 = convertColumnToRow(res[0].data.results.getSurroundingData.frames[0]);\n                    const rowsData2 = convertColumnToRow(res[1].data.results.getSurroundingData.frames[0]);\n                    const result1 = generateSurroundingResult(rowsData1, currentTimeField);\n                    const result2 = generateSurroundingResult(rowsData2, currentTimeField);\n                    const selectedResult = generateSurroundingResult([selectedRow._original], currentTimeField);\n                    const data = [...result1, ...selectedResult, ...result2];\n                    const rowsDataWithUid = await generateTableDataUID(data);\n                    if (result1.length > 0) {\n                        setBeforeCount(result1.length);\n                        setBeforeTime(result1[0]._original[currentTimeField]);\n                    } else {\n                        setBeforeTime(selectedRow.time);\n                    }\n                    if (result1.length > 0) {\n                        setAfterCount(result1.length);\n                        setAfterTime(result1[0]._original[currentTimeField]);\n                    } else {\n                        setAfterTime(selectedRow.time);\n                    }\n                    setSurroundingTableData(rowsDataWithUid);\n                    setTimeout(() => {\n                        scrollToSelectedRow();\n                    }, 50);\n                } else {\n                    // toast.error(res[1].message);\n                }\n            },\n            onError: err => {\n                console.log(err);\n            },\n        },\n    );\n\n    useEffect(() => {\n        const data = surroundingTableData.map(item => {\n            return {\n                _original: item._original,\n                time: item._original?.[currentTimeField] || '',\n                _source: item._source,\n                _uid: item._uid,\n                selected: item._uid === selectedRow._uid,\n            };\n        });\n        setFields(data);\n    }, [surroundingTableData, currentTimeField, selectedRow._uid]);\n\n    const renderBeforeLoadingBar = () => {\n        if (initLoading || getBeforeSurroundingDataLoading) {\n            return (\n                <div\n                    className={css`\n                        position: absolute;\n                        bottom: 0;\n                        left: 0;\n                        width: 100%;\n                    `}\n                >\n                    <LoadingBar width={100} />\n                </div>\n            );\n        }\n        return null;\n    };\n\n    const renderAfterLoadingBar = () => {\n        if (initLoading || getAfterSurroundingDataLoading) {\n            return (\n                <div\n                    className={css`\n                        position: absolute;\n                        top: 0;\n                        left: 0;\n                        width: 100%;\n                    `}\n                >\n                    <LoadingBar width={100} />\n                </div>\n            );\n        }\n        return null;\n    };\n\n    const renderSubComponent = ({ row }: { row: Row<any> }) => {\n        const subTableData = Object.keys(row.original._original).map(key => {\n            return {\n                field: key,\n                value: row.original._original[key],\n            };\n        });\n        return (\n            <div\n                className={css`\n                    position: relative;\n                `}\n            >\n                <TabsBar>\n                    {state.map((tab, index) => {\n                        return (\n                            <Tab\n                                key={index}\n                                label={tab.label}\n                                active={tab.active}\n                                onChangeTab={() =>\n                                    updateState(\n                                        state.map((tab, idx) => ({\n                                            ...tab,\n                                            active: idx === index,\n                                        })),\n                                    )\n                                }\n                                counter={subTableData.length}\n                            />\n                        );\n                    })}\n                </TabsBar>\n                <TabContent>\n                    {state[0].active && (\n                        <table className=\"bg-b1/20 pl-4 backdrop-blur-md dark:bg-n9/60\">\n                            <tbody>\n                                {subTableData.map((item: any) => {\n                                    let fieldValue = item.value;\n                                    const fieldName = item.field;\n                                    if (typeof fieldValue === 'object') {\n                                        fieldValue = JSON.stringify(fieldValue);\n                                    }\n                                    const tableRowStyle = css`\n                                        &:hover {\n                                            .filter-table-content {\n                                                visibility: visible;\n                                            }\n                                        }\n                                    `;\n                                    return (\n                                        <tr className={`${tableRowStyle}`} key={fieldName}>\n                                            <td\n                                                className={css`\n                                                    height: 32px;\n                                                    width: 70px;\n                                                `}\n                                            >\n                                                <div\n                                                    className={`filter-table-content ${css`\n                                                        visibility: hidden;\n                                                    `}`}\n                                                >\n                                                    <SurroundingContentTableActions fieldName={fieldName} fieldValue={fieldValue} />\n                                                </div>\n                                            </td>\n                                            <td className=\"h-8 text-xs\">{fieldName || '-'}</td>\n                                            <td className=\"h-8 whitespace-normal text-xs\">\n                                                <div className=\"w-full break-all\">{fieldValue || '-'}</div>\n                                            </td>\n                                        </tr>\n                                    );\n                                })}\n                            </tbody>\n                        </table>\n                    )}\n                    {state[1].active && (\n                        <div>\n                            <JsonView\n                                value={row.original._original}\n                                className={`-mt-2 pl-11 !leading-6 ${css`\n                                    .w-rjv-wrap {\n                                        border-left: none !important;\n                                    }\n                                `}`}\n                                shortenTextAfterLength={0}\n                                indentWidth={36}\n                                displayDataTypes={false}\n                                enableClipboard={false}\n                                style={theme.isDark ? SELECTDB_THEME : SELECTDB_THEME_LIGHT}\n                            />\n                        </div>\n                    )}\n                </TabContent>\n            </div>\n        );\n    };\n\n    function generateSurroundingResult(result: any, timeField: string) {\n        const sortedResult = sortBy(result, timeField);\n        const _sourceResult = sortedResult.map((item: any) => {\n            let itemSource = '';\n            for (const key in item) {\n                let highlightValue = item[key];\n                //  Variant \n                if (typeof highlightValue === 'object') {\n                    highlightValue = JSON.stringify(highlightValue);\n                }\n                itemSource += `<span style=\"background-color: ${\n                    theme.isDark ? '#3F3F4F' : '#BED8FD'\n                } ; padding: 0px 4px 2px; margin-right: 4px; border-radius: 4px;\">${key}:</span>${highlightValue} `;\n            }\n            return {\n                _original: item,\n                _source: itemSource,\n            };\n        });\n        return _sourceResult;\n    }\n\n    const columns = useMemo<Array<ColumnDef<any>>>(() => {\n        let dynamicColumns: Array<ColumnDef<any>> = [\n            {\n                accessorKey: 'collapse',\n                header: ``,\n                cell: ({ row, getValue }) => {\n                    return (\n                        row.getCanExpand() && (\n                            <div className=\"flex items-center\">\n                                {row.getIsExpanded() ? (\n                                    <IconButton onClick={row.getToggleExpandedHandler()} name=\"arrow-down\" tooltip=\"Collapse\" />\n                                ) : (\n                                    <IconButton onClick={row.getToggleExpandedHandler()} name=\"arrow-right\" tooltip=\"Expand\" />\n                                )}\n                                <div className=\"ml-1\">{getValue<string>()}</div>\n                            </div>\n                        )\n                    );\n                },\n            },\n            {\n                header: 'Time',\n                accessorKey: 'time',\n                cell: ({ row, getValue }) => {\n                    const fieldValue = getValue<string>();\n                    const fieldName = currentTimeField;\n                    const fieldType = 'DATE';\n                    const timeField = formatTimestampToDateTime(fieldValue);\n                    return (\n                        <div\n                            className={`${css`\n                                width: 230px;\n                            `} ${HoverStyle}`}\n                        >\n                            <div\n                                className={css`\n                                    display: flex;\n                                    align-items: center;\n                                `}\n                            >\n                                {timeField}\n                                <div\n                                    className={`filter-content ${css`\n                                        visibility: hidden;\n                                    `}`}\n                                >\n                                    <SurroundingContentItem fieldName={fieldName} fieldValue={fieldValue} fieldType={fieldType} />\n                                </div>\n                            </div>\n                        </div>\n                    );\n                },\n            },\n        ];\n        if (!hasSelectedFields) {\n            dynamicColumns.push({\n                accessorKey: '_source',\n                header: '_source',\n                cell: ({ row, getValue }) => {\n                    function createMarkup() {\n                        return { __html: getValue<string>() };\n                    }\n                    return (\n                        <div\n                            className={css`\n                                padding-top: 0.5rem;\n                                padding-bottom: 0.5rem;\n                                font-size: 0.875rem;\n                                line-height: 1.25rem;\n                            `}\n                        >\n                            <ColumnStyleWrapper\n                                className={css`\n                                    .field-key {\n                                        background-color: ${theme.isDark ? '#3f3f4f' : 'rgb(191, 217, 253)'};\n                                    }\n                                `}\n                            >\n                                <div\n                                    dangerouslySetInnerHTML={createMarkup()}\n                                    className={css`\n                                        max-height: 12rem;\n                                        overflow: auto;\n                                        word-break: break-all;\n                                        white-space: pre-wrap;\n                                    `}\n                                />\n                            </ColumnStyleWrapper>\n                        </div>\n                    );\n                },\n            });\n        } else {\n            dynamicColumns = [\n                ...dynamicColumns,\n                ...selectedSurroundingFields.map((field: any) => {\n                    return {\n                        accessorKey: field.Field,\n                        header: () => (\n                            <div\n                                className={css`\n                                    display: flex;\n                                    align-items: center;\n                                `}\n                            >\n                                <div>{field.Field}</div>\n                                <IconButton\n                                    name=\"times\"\n                                    tooltip=\"Remove\"\n                                    style={{\n                                        marginLeft: '8px',\n                                        cursor: 'pointer',\n                                        marginTop: '2px',\n                                    }}\n                                    onClick={e => {\n                                        handleRemove(field);\n                                        e.preventDefault();\n                                        e.stopPropagation();\n                                    }}\n                                />\n                            </div>\n                        ),\n                        cell: ({ row, getValue }: any) => {\n                            // let fieldValue = row.original._original[field.Field];\n                            let fieldValue = get(row.original._original, field.Field);\n                            const fieldName = field.Field;\n                            const fieldType = field.Type;\n                            if (typeof fieldValue === 'object') {\n                                fieldValue = JSON.stringify(fieldValue);\n                            }\n                            return (\n                                <div\n                                    className={`${HoverStyle} ${css`\n                                        display: flex;\n                                        align-items: center;\n                                        min-height: 48px;\n                                    `}`}\n                                >\n                                    <div className={`max-h-48 overflow-auto`}>\n                                        <div className=\"flex items-center break-all py-4\">\n                                            {field.value === 'trace_id' ? <Button>{fieldValue}</Button> : <span className=\"text-xs\">{fieldValue}</span>}\n                                        </div>\n                                    </div>\n                                    <div\n                                        className={`filter-content ${css`\n                                            visibility: hidden;\n                                        `}`}\n                                    >\n                                        <SurroundingContentItem fieldName={fieldName} fieldValue={fieldValue} fieldType={fieldType} />\n                                    </div>\n                                </div>\n                            );\n                        },\n                    };\n                }),\n            ];\n        }\n        return dynamicColumns;\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [currentTimeField, handleRemove, hasSelectedFields, selectedSurroundingFields]);\n\n    return (\n        <div>\n            <SurroundingDiscoverFilter dataFilter={surroundingDataFilter} />\n            <div className=\"h-[2px] bg-b1 dark:bg-black\" />\n            <div style={{ position: 'relative' }}>\n                <SurroundingLogsActions\n                    getSurroundingData={getBeforeSurroundingData}\n                    getSurroundingDataLoading={getBeforeSurroundingDataLoading}\n                    time={beforeTime}\n                    type=\"before\"\n                    timeFieldPageSize={beforeTimeFieldPageSize}\n                    setTimeFieldPageSize={setBeforeTimeFieldPageSize}\n                    tips=\"Old records\"\n                    count={beforeCount}\n                />\n                {renderBeforeLoadingBar()}\n            </div>\n            <div style={{ height: 'calc(100vh - 220px)', overflow: 'auto', position: 'relative' }}>\n                <div className=\"mx-6 border\">\n                    <SDCollapsibleTable data={fields} columns={columns} getRowCanExpand={() => true} renderSubComponent={renderSubComponent} />\n                </div>\n                {/* {initLoading ? (\n                    <LoadingBar width={100} />\n                ) : (\n                    {renderBeforeLoadingBar}\n                    <div className=\"mx-6 border\">\n                        <SDCollapsibleTable data={fields} columns={columns} getRowCanExpand={() => true} renderSubComponent={renderSubComponent} />\n                    </div>\n                )} */}\n            </div>\n            <div style={{ position: 'relative' }}>\n                {renderAfterLoadingBar()}\n                <SurroundingLogsActions\n                    getSurroundingData={getAfterSurroundingData}\n                    getSurroundingDataLoading={getAfterSurroundingDataLoading}\n                    time={afterTime}\n                    type=\"after\"\n                    timeFieldPageSize={afterTimeFieldPageSize}\n                    setTimeFieldPageSize={setAfterTimeFieldPageSize}\n                    tips={`New records`}\n                    count={afterCount}\n                />\n            </div>\n        </div>\n    );\n}\n","'use client';\nimport { ColumnDef, Row } from '@tanstack/react-table';\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { useAtom, useAtomValue, useSetAtom } from 'jotai';\nimport { Drawer, IconButton, Pagination, Tab, TabContent, TabsBar, useTheme2 } from '@grafana/ui';\nimport JsonView from '@uiw/react-json-view';\nimport {\n    tableTotalCountAtom,\n    tableDataAtom,\n    selectedFieldsAtom,\n    selectedRowAtom,\n    surroundingTableDataAtom,\n    pageSizeAtom,\n    pageAtom,\n    afterCountAtom,\n    beforeCountAtom,\n    surroundingDataFilterAtom,\n    surroundingSelectedFieldsAtom,\n    currentTimeFieldAtom,\n} from 'store/discover';\nimport { get } from 'lodash-es';\nimport { Button as AntButton } from 'antd';\nimport SDCollapsibleTable from 'components/selectdb-ui/sd-collapsible-table';\nimport { ColumnStyleWrapper, HoverStyle } from './discover-content.style';\nimport { css } from '@emotion/css';\nimport { ContentTableActions } from './content-table-actions';\nimport { SELECTDB_THEME, SELECTDB_THEME_LIGHT } from './json-viewer.theme';\nimport { ContentItem } from './content-item';\nimport SurroundingLogs from 'components/surrounding-logs';\nimport TraceDetail from 'components/trace-detail';\n\nexport default function DiscoverContent({ fetchNextPage, getTraceData }: { fetchNextPage: (page: number) => void; getTraceData: (traceId: string) => any }) {\n    const theme = useTheme2();\n    const [fields, setFields] = useState<any[]>([]);\n    const tableTotalCount = useAtomValue(tableTotalCountAtom);\n    const [tableData, _setTableData] = useAtom(tableDataAtom);\n    const [selectedFields, setSelectedFields] = useAtom(selectedFieldsAtom);\n    const hasSelectedFields = selectedFields.length > 0;\n    const currentTimeField = useAtomValue(currentTimeFieldAtom);\n    // const [surroundingOpen, setSurroundingOpen] = useState(false);\n    const [selectedRow, setSelectedRow] = useAtom(selectedRowAtom);\n    const setSurroundingTableData = useSetAtom(surroundingTableDataAtom);\n    const setSurroundingDataFilter = useSetAtom(surroundingDataFilterAtom);\n    const setSelectedSurroundingFields = useSetAtom(surroundingSelectedFieldsAtom);\n    const setBeforeCount = useSetAtom(beforeCountAtom);\n    const setAfterCount = useSetAtom(afterCountAtom);\n    const [pageSize, _setPageSize] = useAtom(pageSizeAtom);\n    const [page, setPage] = useAtom(pageAtom);\n    const [drawerOpen, setDrawerOpen] = useState(false);\n    const [surroundingLogsOpen, setSurroundingLogsOpen] = useState(false);\n    const [_fieldKeyBg, setFieldKeyBg] = useState<string>('#3f3f4f');\n\n    useEffect(() => {\n        if (theme.isDark) {\n            setFieldKeyBg('#3f3f4f');\n        } else {\n            setFieldKeyBg('rgb(191, 217, 253)');\n        }\n    }, [theme.isDark]);\n\n    const [state, updateState] = useState([\n        {\n            label: 'Table',\n            value: 'Table',\n            active: true,\n        },\n        {\n            label: 'JSON',\n            value: 'JSON',\n            active: false,\n        },\n    ]);\n\n    useEffect(() => {\n        const data = tableData.map(item => {\n            return {\n                _original: item._original,\n                time: item._original?.[currentTimeField] || '',\n                _source: item._source,\n                _uid: item?._uid,\n            };\n        });\n        setFields(data);\n    }, [tableData, currentTimeField]);\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    const handleRemove = React.useCallback(\n        (field: any) => {\n            const index = selectedFields.findIndex((item: any) => item.Field === field.Field);\n            selectedFields.splice(index, 1);\n            setSelectedFields([...selectedFields]);\n        },\n        [selectedFields, setSelectedFields],\n    );\n\n    const renderSubComponent = ({ row }: { row: Row<any> }) => {\n        const subTableData = Object.keys(row.original._original).map(key => {\n            return {\n                field: key,\n                value: row.original._original[key],\n            };\n        });\n        return (\n            <div\n                className={css`\n                    position: relative;\n                `}\n            >\n                <TabsBar\n                    className={css`\n                        ${theme.isDark ? 'background-color: hsl(var(--n9) / 0.4);' : 'background-color: hsl(var(--b1) / 0.6);'}\n                    `}\n                >\n                    {state.map((tab, index) => {\n                        return (\n                            <Tab\n                                key={index}\n                                label={tab.label}\n                                active={tab.active}\n                                onChangeTab={() =>\n                                    updateState(\n                                        state.map((tab, idx) => ({\n                                            ...tab,\n                                            active: idx === index,\n                                        })),\n                                    )\n                                }\n                                counter={subTableData.length}\n                            />\n                        );\n                    })}\n                </TabsBar>\n\n                <TabContent>\n                    {state[0].active && (\n                        <table\n                            // className=\"bg-b1/20 pl-4 backdrop-blur-md dark:bg-n9/60\"\n                            className={css`\n                                padding-left: 16px;\n                                backdrop-filter: blur(12px);\n                                -webkit-backdrop-filter: blur(12px);\n                                width: 100%;\n                                ${theme.isDark ? 'background-color: hsl(var(--n9) / 0.6);' : 'background-color: hsl(var(--b1) / 0.2)'}\n                            `}\n                        >\n                            <tbody>\n                                {subTableData.map((item: any) => {\n                                    let fieldValue = item.value;\n                                    const fieldName = item.field;\n                                    if (typeof fieldValue === 'object') {\n                                        fieldValue = JSON.stringify(fieldValue);\n                                    }\n                                    const tableRowStyle = css`\n                                        &:hover {\n                                            .filter-table-content {\n                                                visibility: visible;\n                                            }\n                                        }\n                                    `;\n                                    return (\n                                        <tr className={`${tableRowStyle}`} key={fieldName}>\n                                            <td\n                                                className={css`\n                                                    height: 32px;\n                                                    width: 70px;\n                                                `}\n                                            >\n                                                <div\n                                                    className={`filter-table-content ${css`\n                                                        visibility: hidden;\n                                                    `}`}\n                                                >\n                                                    <ContentTableActions fieldName={fieldName} fieldValue={fieldValue} />\n                                                </div>\n                                            </td>\n                                            <td\n                                                className={css`\n                                                    height: 32px;\n                                                    font-size: 12px;\n                                                `}\n                                            >\n                                                {fieldName || '-'}\n                                            </td>\n                                            <td\n                                                className={css`\n                                                    height: 32px;\n                                                    font-size: 12px;\n                                                    white-space: normal;\n                                                `}\n                                            >\n                                                <div\n                                                    className={css`\n                                                        width: 100%;\n                                                        word-break: break-all;\n                                                    `}\n                                                >\n                                                    {fieldValue || '-'}\n                                                </div>\n                                            </td>\n                                        </tr>\n                                    );\n                                })}\n                            </tbody>\n                        </table>\n                    )}\n                    {state[1].active && (\n                        <div>\n                            <JsonView\n                                value={row.original._original}\n                                className={`-mt-2 pl-11 !leading-6 ${css`\n                                    .w-rjv-wrap {\n                                        border-left: none !important;\n                                    }\n                                `}`}\n                                shortenTextAfterLength={0}\n                                indentWidth={36}\n                                displayDataTypes={false}\n                                enableClipboard={false}\n                                style={theme.isDark ? SELECTDB_THEME : SELECTDB_THEME_LIGHT}\n                            />\n                        </div>\n                    )}\n                </TabContent>\n                <a\n                    onClick={() => {\n                        console.log('row', row);\n                        setSurroundingLogsOpen(true);\n                        setSelectedRow(row.original);\n                    }}\n                    className={css`\n                        position: absolute;\n                        right: 1rem;\n                        top: 0;\n                        cursor: pointer;\n                        padding-top: 0.5rem;\n                        &:hover {\n                            color: rgb(43, 102, 253);\n                        }\n                    `}\n                >\n                    Surrounding Logs\n                </a>\n            </div>\n        );\n    };\n\n    const openTraceDrawer = (traceId: string) => {\n        // request\n        setDrawerOpen(true);\n        getTraceData(traceId);\n    };\n\n    const columns = useMemo<Array<ColumnDef<any>>>(() => {\n        let dynamicColumns: Array<ColumnDef<any>> = [\n            {\n                accessorKey: 'collapse',\n                header: ``,\n                cell: ({ row, getValue }) => {\n                    return (\n                        row.getCanExpand() && (\n                            <div className=\"flex items-center\">\n                                {row.getIsExpanded() ? (\n                                    <IconButton onClick={row.getToggleExpandedHandler()} name=\"arrow-down\" tooltip=\"Collapse\" />\n                                ) : (\n                                    <IconButton onClick={row.getToggleExpandedHandler()} name=\"arrow-right\" tooltip=\"Expand\" />\n                                )}\n                                <div className=\"ml-1\">{getValue<string>()}</div>\n                            </div>\n                        )\n                    );\n                },\n            },\n            {\n                header: 'Time',\n                accessorKey: 'time',\n                cell: ({ row, getValue }) => {\n                    const fieldValue = getValue<string>();\n                    const fieldName = currentTimeField;\n                    const fieldType = 'DATE';\n                    const timeField = fieldValue;\n                    return (\n                        <div\n                            className={`${css`\n                                width: 240px;\n                            `} ${HoverStyle}`}\n                        >\n                            <div\n                                className={css`\n                                    display: flex;\n                                    align-items: center;\n                                `}\n                            >\n                                {timeField}\n                                <div\n                                    className={`filter-content ${css`\n                                        visibility: hidden;\n                                    `}`}\n                                >\n                                    <ContentItem fieldName={fieldName} fieldValue={fieldValue} fieldType={fieldType} />\n                                </div>\n                            </div>\n                        </div>\n                    );\n                },\n            },\n        ];\n        if (!hasSelectedFields) {\n            dynamicColumns.push({\n                accessorKey: '_source',\n                header: '_source',\n                cell: ({ row, getValue }) => {\n                    const html = getValue<string>();\n\n                    const handleClick: React.MouseEventHandler<HTMLDivElement> = e => {\n                        const target = e.target as HTMLElement | null;\n                        if (!target) {\n                            return;\n                        }\n\n                        const link = target.closest<HTMLElement>('[data-trace-id]');\n                        if (!link) {\n                            return;\n                        }\n\n                        const traceId = link.getAttribute('data-trace-id');\n                        if (!traceId) {\n                            return;\n                        }\n\n                        console.log('traceId', traceId);\n\n                        e.preventDefault();\n                        openTraceDrawer(traceId);\n                    };\n\n                    return (\n                        <div\n                            className={css`\n                                padding-top: 0.5rem;\n                                padding-bottom: 0.5rem;\n                                font-size: 0.875rem;\n                                line-height: 1.25rem;\n                            `}\n                        >\n                            <ColumnStyleWrapper\n                                className={css`\n                                    & .field-key {\n                                        background-color: ${theme.isDark ? '#3f3f4f' : 'rgb(191, 217, 253)'};\n                                    }\n                                    & .trace-link {\n                                        cursor: pointer;\n                                        text-decoration: underline;\n                                        color: blue;\n                                    }\n                                `}\n                            >\n                                <div\n                                    onClick={handleClick}\n                                    dangerouslySetInnerHTML={{ __html: html }}\n                                    className={css`\n                                        max-height: 12rem;\n                                        overflow: auto;\n                                        word-break: break-all;\n                                        white-space: pre-wrap;\n                                    `}\n                                />\n                            </ColumnStyleWrapper>\n                        </div>\n                    );\n                },\n            });\n        } else {\n            dynamicColumns = [\n                ...dynamicColumns,\n                ...selectedFields.map((field: any) => {\n                    return {\n                        accessorKey: field.Field,\n                        header: () => (\n                            <div\n                                className={css`\n                                    display: flex;\n                                    align-items: center;\n                                `}\n                            >\n                                <div>{field.Field}</div>\n                                <IconButton\n                                    name=\"times\"\n                                    tooltip=\"Remove\"\n                                    style={{\n                                        marginLeft: '8px',\n                                        cursor: 'pointer',\n                                        marginTop: '2px',\n                                    }}\n                                    onClick={e => {\n                                        handleRemove(field);\n                                        e.preventDefault();\n                                        e.stopPropagation();\n                                    }}\n                                />\n                            </div>\n                        ),\n                        cell: ({ row, getValue }: any) => {\n                            // let fieldValue = row.original._original[field.Field];\n                            let fieldValue = get(row.original._original, field.Field);\n                            const fieldName = field.Field;\n                            const fieldType = field.Type;\n                            if (typeof fieldValue === 'object') {\n                                fieldValue = JSON.stringify(fieldValue);\n                            }\n                            return (\n                                <div\n                                    className={`${HoverStyle} ${css`\n                                        display: flex;\n                                        align-items: center;\n                                        min-height: 48px;\n                                    `}`}\n                                >\n                                    <div\n                                        className={css`\n                                            max-height: 192px;\n                                            overflow: auto;\n                                        `}\n                                    >\n                                        <div\n                                            className={css`\n                                                display: flex;\n                                                align-items: center;\n                                                padding: 16px;\n                                                word-break: break-all;\n                                            `}\n                                        >\n                                            {field.value === 'trace_id' ? (\n                                                <AntButton onClick={() => openTraceDrawer(fieldValue)} type=\"link\">\n                                                    {fieldValue}\n                                                </AntButton>\n                                            ) : (\n                                                <span\n                                                    className={css`\n                                                        font-size: 12px;\n                                                    `}\n                                                >\n                                                    {fieldValue}\n                                                </span>\n                                            )}\n                                        </div>\n                                    </div>\n                                    <div\n                                        className={`filter-content ${css`\n                                            visibility: hidden;\n                                        `}`}\n                                    >\n                                        <ContentItem fieldName={fieldName} fieldValue={fieldValue} fieldType={fieldType} />\n                                    </div>\n                                </div>\n                            );\n                        },\n                    };\n                }),\n            ];\n        }\n        return dynamicColumns;\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [currentTimeField, handleRemove, hasSelectedFields, selectedFields, theme.isDark]);\n\n    return (\n        <div\n            className={css`\n                overflow-x: scroll;\n            `}\n        >\n            {/* {\n                loading.getTableDataCharts && <LoadingBar width={100} />\n            } */}\n            <SDCollapsibleTable\n                className={css`\n                    width: 100%;\n                `}\n                data={fields}\n                columns={columns}\n                getRowCanExpand={() => true}\n                renderSubComponent={renderSubComponent}\n            />\n            <div\n                className={css`\n                    display: flex;\n                    justify-content: space-between;\n                    align-items: center;\n                    padding: 0.5rem 1rem;\n                    padding-bottom: 20px;\n                `}\n            >\n                <div>Total {tableTotalCount} rows</div>\n                <Pagination\n                    currentPage={page}\n                    numberOfPages={Math.ceil(tableTotalCount / pageSize) || 1}\n                    onNavigate={toPage => {\n                        setPage(toPage);\n                    }}\n                />\n            </div>\n            <TraceDetail onClose={() => setDrawerOpen(false)} open={drawerOpen} traceId={selectedRow?.trace_id} traceTable='otel_traces' />\n\n            {surroundingLogsOpen && (\n                <Drawer\n                    size=\"lg\"\n                    title=\"Surrounding Logs\"\n                    onClose={() => {\n                        setSurroundingTableData([]);\n                        setSurroundingDataFilter([]);\n                        setBeforeCount(0);\n                        setAfterCount(0);\n                        setSelectedSurroundingFields([]);\n                        setSurroundingLogsOpen(false);\n                    }}\n                >\n                    <SurroundingLogs />\n                </Drawer>\n            )}\n        </div>\n    );\n}\n","import { css } from '@emotion/css';\nimport styled from '@emotion/styled';\n\nexport const DiscoverHeaderSearch = styled.div`\n    flex: 2;\n    display: flex;\n    border-radius: 6px;\n    align-items: center;\n    margin-right: 8px;\n    .ant-select-open {\n        .ant-select-arrow {\n            .anticon {\n                transform: rotate(-180deg);\n            }\n        }\n    }\n    .select-database {\n        width: 160px;\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n    }\n    .ant-select-single {\n        height: 30px;\n    }\n`;\n\nexport const DiscoverHeaderTimeSelect = styled.div`\n    flex: 1;\n    display: flex;\n    border-radius: 6px;\n    align-items: center;\n    margin-right: 8px;\n\n    div.trp-time-label {\n        border: 0px;\n    }\n`;\n\nexport const CascaderStyle = css`\n    width: 184px;\n    .ant-select-selector {\n        padding: 0 16px 0 40px !important;\n    }\n    .ant-select-selection-placeholder,\n    .ant-select-selection-item {\n        margin-top: 2px;\n    }\n    .ant-select-selector>.ant-select-selection-search>.ant-select-selection-search-input {\n        margin-left: 1.8rem;\n    }\n`;\n","import { useAtom, useAtomValue, useSetAtom } from 'jotai';\nimport React from 'react';\nimport { currentIndexAtom, disabledOptionsAtom, indexesAtom, searchTypeAtom, searchValueAtom, selectedIndexesAtom } from 'store/discover';\nimport { useTheme2, ActionMeta, Icon, MultiSelect, RadioButtonGroup, Toggletip } from '@grafana/ui';\nimport { css } from '@emotion/css';\nimport { SelectableValue } from '@grafana/data';\nimport { useTranslation } from 'react-i18next';\n\nexport default function SearchType() {\n    const { t } = useTranslation();\n    const [searchType, setSearchType] = useAtom(searchTypeAtom);\n    const setSearchValue = useSetAtom(searchValueAtom);\n    const disabledOptions = useAtomValue(disabledOptionsAtom);\n    const indexes = useAtomValue(indexesAtom);\n    const setSelectedIndexes = useSetAtom(selectedIndexesAtom);\n    const [currentIndex, setCurrentIndex] = useAtom(currentIndexAtom);\n    const searchMode = searchType === 'Search';\n    const theme = useTheme2();\n       \n    const options = [\n        {\n            label: t`Search`,\n            value: 'Search',\n            disabled: indexes.length === 0,\n            tips: t`Discover.SearchType.Search.DisabledText`,\n        },\n        { label: 'SQL', value: 'SQL' },\n        { label: 'Lucene', value: 'Lucene' },\n    ];\n\n    function DropdownQueryType() {\n        return (\n            <div className=\"w-[232px]\">\n                <RadioButtonGroup\n                    options={options}\n                    disabledOptions={disabledOptions}\n                    value={searchType}\n                    onChange={val => {\n                        setSearchType(val as 'Search' | 'SQL' | 'Lucene');\n                        setSearchValue('');\n                    }}\n                />\n                {indexes && searchMode ? (\n                    <div className=\"mt-4\">\n                        <MultiSelect\n                            options={indexes.filter((item: any) => item.type === 'INVERTED')}\n                            value={currentIndex}\n                            onChange={(item: Array<SelectableValue<any>>, actionMeta: ActionMeta) => {\n                                const selectedIndexes: any[] = [];\n                                item.forEach(selectedValue => {\n                                    indexes.forEach((item: any) => {\n                                        if (item.value === selectedValue) {\n                                            selectedIndexes.push(item);\n                                        }\n                                    });\n                                });\n                                setSelectedIndexes(selectedIndexes);\n                                setCurrentIndex(item as any);\n                            }}\n                        />\n                    </div>\n                ) : (\n                    <></>\n                )}\n            </div>\n        );\n    }\n    return (\n        <>\n            <Toggletip closeButton={false} content={<DropdownQueryType />} placement=\"bottom\">\n                <div\n                    className={css`\n                        cursor: pointer;\n                        border: 1px solid rgba(204, 204, 220, 0.2);\n                        width: 80px;\n                        height: 32px;\n                        line-height: 32px;\n                        background-color: ${theme.isDark ? 'rgb(17, 18, 23)' : '#FFF'};\n                        padding-left: 8px;\n                        border-radius: 2px;\n                        display: flex;\n                        justify-content: space-between;\n                    `}\n                >\n                    <span >{searchType}</span>\n                    <span style={{ marginRight: 6 }}>\n                        <Icon name=\"angle-down\" />\n                    </span>\n                </div>\n            </Toggletip>\n        </>\n    );\n}\n","import React, { CSSProperties } from 'react';\nimport { useAtom, useAtomValue } from 'jotai';\n// import { useTranslation } from 'react-i18next';\n// import { SQL_OPERATORS } from 'utils/data';\n// import { cn } from 'utils/tailwind';\nimport {\n  searchTypeAtom,\n  searchValueAtom,\n  // currentTimeFieldAtom,\n} from 'store/discover';\nimport { Input } from '@grafana/ui';\n// import { CodeEditor, CodeEditorSuggestionItem, ReactMonacoEditor } from '@grafana/ui';\n\n\nexport default function SQLSearch({ style, onQuerying }: { style?: CSSProperties; onQuerying: () => void }) {\n  const searchType = useAtomValue(searchTypeAtom);\n  // const setSearchFocus = useSetAtom(searchFocusAtom);\n  // const [tableFields, setTableFields] = useAtom(tableFieldsAtom);\n  const [searchValue, setSearchValue] = useAtom(searchValueAtom);\n  // const currentTimeField = useAtomValue(currentTimeFieldAtom);\n  if (process.env.NODE_ENV !== 'production') {\n    searchValueAtom.debugLabel = 'searchValue';\n  }\n  // const [options, setOptions] = useState<Array<{ value: string; label: string }>>([]);\n  // const inputRef = useRef<any>(null);\n\n  // let disableEnter = false;\n\n  //   const getSuggestions = (): CodeEditorSuggestionItem[] => {\n  //     return [];\n  //   };\n\n  return (\n    <Input\n      value={searchValue}\n      onChange={(e: any) => {\n        console.log(e);\n        setSearchValue(e.target?.value);\n      }}\n      placeholder={\n        searchType === 'SQL' ? \"SQL WHERE. e.g.(event_type = 'ForkApplyEvent AND action = 'none')\" : 'Keyword'\n      }\n    />\n    // <CodeEditor language=\"mysql\" value={searchValue} height={28} width={600} getSuggestions={getSuggestions} showMiniMap={false} showLineNumbers={false} />\n    // <AutoComplete\n    //     className=\"h-8\"\n    //     popupClassName={cn(AutoCompletePopupStyle)}\n    //     options={\n    //         searchType === 'SQL'\n    //             ? options.length > 0\n    //                 ? options\n    //                 : [\n    //                       ...tableFields.map((e: any) => {\n    //                           return { label: e.Field, value: e.Field };\n    //                       }),\n    //                       ...SQL_OPERATORS.map(e => {\n    //                           return { label: e, value: e };\n    //                       }),\n    //                   ]\n    //             : []\n    //     }\n    //     onSelect={value => {\n    //         disableEnter = true;\n    //         const pos = inputRef.current?.input?.selectionStart;\n    //         if (pos !== null && pos !== undefined) {\n    //             const [posL, posR] = getWordPosLR(searchValue, pos - 1);\n    //             let res = '';\n    //             if (posL !== -1) {res += searchValue.substring(0, posL) + ' ';}\n    //             res += value;\n    //             if (posR !== searchValue.length) {res += ' ' + searchValue.substring(posR + 1);}\n    //             setSearchValue(res);\n    //         } else {\n    //             setSearchValue(searchValue + value);\n    //         }\n    //     }}\n    //     value={searchValue}\n    //     onChange={e => {\n    //         setSearchValue(e);\n    //     }}\n    //     onKeyDown={e => {\n    //         if (e.key === 'Enter' && !e.nativeEvent.isComposing && !disableEnter) {\n    //             if (currentTimeField) {\n    //                 onQuerying();\n    //             } else {\n    //                 message.warning(t`Discover.SQLSearch.NoTimeField.Tips`);\n    //             }\n    //         }\n    //     }}\n    //     filterOption={(inputValue, option) => {\n    //         const pos = inputRef.current?.input?.selectionStart;\n    //         if (pos !== null && pos !== undefined) {\n    //             const [posL, posR] = getWordPosLR(searchValue, pos - 1);\n    //             const str = inputValue.substring(posL + 1, posR);\n    //             return option?.value.toUpperCase().indexOf(str.toUpperCase()) !== -1;\n    //         }\n    //         const inputArr = inputValue.split(' ');\n    //         const value = inputArr[inputArr.length - 1];\n    //         return option?.value.toUpperCase().indexOf(value.toUpperCase()) !== -1;\n    //     }}\n    //     style={style}\n    // >\n    //     <Input\n    //         onBlur={() => setSearchFocus(false)}\n    //         onFocus={() => setSearchFocus(true)}\n    //         className=\"-mt-[2px] h-[32px] border-none hover:placeholder:text-n1 focus:placeholder:text-n6\"\n    //         ref={inputRef}\n    //         placeholder={searchType === 'SQL' ? \"SQL WHERE. e.g.(event_type = 'ForkApplyEvent AND action = 'none')\" : 'Keyword'}\n    //     />\n    // </AutoComplete>\n  );\n}\n","import React from 'react';\nimport { useAtom } from 'jotai';\nimport { searchValueAtom } from 'store/discover';\nimport { Input } from '@grafana/ui';\n\nexport default function Lucene() {\n    const [searchValue, setSearchValue] = useAtom(searchValueAtom);\n    if (process.env.NODE_ENV !== 'production') {\n        searchValueAtom.debugLabel = 'searchValue';\n    }\n\n    return (\n        <Input\n            value={searchValue}\n            onChange={(e: any) => {\n                console.log(e);\n                setSearchValue(e.target?.value);\n            }}\n            placeholder=\"usage: field:value AND field2:value2\"\n        />\n    );\n}\n","'use client';\nimport React, { PropsWithChildren, useEffect } from 'react';\nimport dayjs from 'dayjs';\nimport { DiscoverHeaderSearch } from './discover-header.style';\nimport SearchType from './search-type';\nimport SQLSearch from './sql-search';\nimport { useAtom, useAtomValue, useSetAtom } from 'jotai';\nimport { DataSourcePicker, getDataSourceSrv } from '@grafana/runtime';\nimport { css } from '@emotion/css';\nimport {\n    indexesAtom,\n    searchTypeAtom,\n    discoverCurrentAtom,\n    locationAtom,\n    // currentClusterAtom,\n    tableFieldsAtom,\n    timeFieldsAtom,\n    currentDateAtom,\n    currentTimeFieldAtom,\n    currentIndexAtom,\n    searchFocusAtom,\n    activeShortcutAtom,\n    datasourcesAtom,\n    selectedDatasourceAtom,\n    timeRangeAtom,\n    databasesAtom,\n    tablesAtom,\n    currentTableAtom,\n    disabledOptionsAtom,\n} from 'store/discover';\nimport { getLatestTime, isValidTimeFieldType } from 'utils/data';\nimport { Select, Field, Button, useTheme2, TimeRangeInput } from '@grafana/ui';\nimport { FORMAT_DATE } from '../../constants';\nimport { getDatabases, getFieldsService, getIndexesService, getTablesService } from 'services/metaservice';\nimport { Subscription } from 'rxjs';\nimport { toDataFrame } from '@grafana/data';\nimport Lucene from './lucene';\n\nexport default function DiscoverHeader(\n    props: PropsWithChildren & {\n        onQuerying: () => void;\n        loading: boolean;\n    },\n) {\n    // const catalog = 'internal';\n    // const catalogs = useAtomValue(catalogAtom);\n    const setIndexes = useSetAtom(indexesAtom);\n    // const setSearchType = useSetAtom(searchTypeAtom);\n    const [discoverCurrent, setDiscoverCurrent] = useAtom(discoverCurrentAtom);\n    if (process.env.NODE_ENV !== 'production') {\n        discoverCurrentAtom.debugLabel = 'current';\n    }\n    const [_loc, setLoc] = useAtom(locationAtom);\n    // const [currentCluster, setCurrentCluster] = useAtom(currentClusterAtom);\n    const setTableFields = useSetAtom(tableFieldsAtom);\n    const [timeFields, setTimeFields] = useAtom(timeFieldsAtom);\n    const [_currentDate, setCurrentDate] = useAtom(currentDateAtom);\n    const currentTimeField = useAtomValue(currentTimeFieldAtom);\n    const [currentIndex, setCurrentIndex] = useAtom(currentIndexAtom);\n    const searchFocus = useAtomValue(searchFocusAtom);\n    // const { databaseList } = useDatabaseList();\n    const [activeItem, _setActiveItem] = useAtom(activeShortcutAtom);\n    // const [clusters, setClusters] = useState<any[]>([]);\n    // const database = loc.searchParams?.get('database');\n    // const table = loc.searchParams?.get('table');\n    // const cluster = loc.searchParams?.get('cluster');\n    // const startTime = loc.searchParams?.get('startTime');\n    // const endTime = loc.searchParams?.get('endTime');\n    const [selectedDatasource, setSelectedDatasource] = useAtom(selectedDatasourceAtom);\n    const [timeRange, setTimeRange] = useAtom(timeRangeAtom);\n    const [currentTable, setCurrentTable] = useAtom(currentTableAtom);\n    const [databases, setDatabases] = useAtom(databasesAtom);\n    const [tables, setTables] = useAtom(tablesAtom);\n    const [_datasources, setDataSource] = useAtom(datasourcesAtom);\n    const setDisabledOptions = useSetAtom(disabledOptionsAtom);\n    const searchType = useAtomValue(searchTypeAtom);\n    const searchMode = searchType === 'Search';\n\n    const selectdbDS = useAtomValue(selectedDatasourceAtom);\n\n    useEffect(() => {\n        const datasources = getDataSourceSrv().getList();\n        setDataSource(datasources);\n    }, [setDataSource]);\n\n    useEffect(() => {\n        if (currentIndex.length > 0) {\n            setDisabledOptions([]);\n        } else {\n            setDisabledOptions(['Search']);\n        }\n    }, [currentIndex, setDisabledOptions]);\n\n    const theme = useTheme2();\n\n    useEffect(() => {\n        if (!selectdbDS) {\n            return;\n        }\n\n        const subscription: Subscription = getDatabases(selectdbDS).subscribe({\n            next: (resp: any) => {\n                const { data, ok } = resp;\n                if (ok) {\n                    const frame = toDataFrame(data.results.getDatabases.frames[0]);\n                    const values = Array.from(frame.fields[0].values);\n                    const options = values.map((item: string) => ({ label: item, value: item }));\n                    setDatabases(options);\n                }\n            },\n            error: (err: any) => console.log('Fetch Error', err),\n        });\n\n        return () => subscription.unsubscribe();\n    }, [selectdbDS, setDatabases]);\n\n    function getFields(selectedTable: any) {\n        getFieldsService({\n            selectdbDS,\n            database: discoverCurrent.database,\n            table: selectedTable.value,\n        }).subscribe({\n            next: ({ data, ok }: any) => {\n                if (ok) {\n                    const frame = toDataFrame(data.results.getFields.frames[0]);\n                    console.log('frame', frame);\n                    const values = Array.from(frame.fields[0].values);\n                    const fieldTypes = Array.from(frame.fields[1].values);\n\n                    const tableFields = values.map((item: any, index: number) => {\n                        return {\n                            label: item,\n                            Field: item,\n                            value: item,\n                            Type: fieldTypes[index],\n                        };\n                    });\n\n                    setTableFields(tableFields);\n\n                    if (values) {\n                        const options = values\n                            .filter((field: any, index: number) => {\n                                return isValidTimeFieldType(fieldTypes[index].toUpperCase());\n                            })\n                            .map((item: any) => {\n                                return {\n                                    label: item,\n                                    value: item,\n                                };\n                            });\n                        setDiscoverCurrent({\n                            ...discoverCurrent,\n                            timeField: options[0]?.value || '',\n                        });\n                        setTimeFields(options);\n                    }\n                }\n            },\n            error: (err: any) => {\n                console.log('Fetch Error', err);\n            },\n        });\n    }\n\n    function getIndexes(selectedTable: any) {\n        getIndexesService({\n            selectdbDS,\n            database: discoverCurrent.database,\n            table: selectedTable.value,\n        }).subscribe({\n            next: ({ data, ok }: any) => {\n                if (ok) {\n                    const frame = toDataFrame(data.results.getIndexes.frames[0]);\n                    const values = Array.from(frame.fields[2].values);\n                    const columnNames = Array.from(frame.fields[4].values);\n                    const indexesTypes = Array.from(frame.fields[10].values);\n\n                    if (!values || values.length === 0) {\n                        setIndexes([]);\n                        setCurrentIndex([]);\n                        return;\n                    }\n\n                    const tableIndexes = values?.map((item: any, index: number) => {\n                        return {\n                            label: item,\n                            value: item,\n                            type: indexesTypes[index],\n                            columnName: columnNames[index],\n                        };\n                    });\n\n                    setIndexes(tableIndexes);\n\n                    if (tableIndexes) {\n                        setCurrentIndex(tableIndexes);\n                    }\n                }\n            },\n            error: (err: any) => {\n                console.log('Fetch Error', err);\n            },\n        });\n    }\n\n    return (\n        <div\n            className={css`\n                padding: 1rem;\n                padding-top: 1.5rem;\n                background-color: ${theme.isDark ? 'rgb(24, 27, 31)' : '#FFF'};\n                display: flex;\n                border-radius: 0.25rem 0.25rem 0 0;\n            `}\n        >\n            <DiscoverHeaderSearch className=\"h-8 rounded border border-solid border-n9 dark:border-n7\">\n                <Field label=\"Datasource\">\n                    {/* filter  */}\n                    <DataSourcePicker\n                        width={20}\n                        type={'mysql'}\n                        current={selectedDatasource}\n                        placeholder=\"Choose\"\n                        noDefault\n                        filter={ds => ds.type === 'mysql'}\n                        onChange={item => {\n                            console.log('item', item);\n                            setSelectedDatasource(item);\n                        }}\n                    />\n                </Field>\n                {/*  */}\n                <Field label=\"Database\" style={{ marginLeft: 8 }}>\n                    <Select\n                        width={15}\n                        options={databases}\n                        value={discoverCurrent.database}\n                        onChange={(selectedDatabase: any) => {\n                            setDiscoverCurrent({\n                                ...discoverCurrent,\n                                database: selectedDatabase.value,\n                            });\n                            getTablesService({\n                                selectdbDS,\n                                database: selectedDatabase.value,\n                            }).subscribe({\n                                next: (resp: any) => {\n                                    const { data, ok } = resp;\n                                    if (ok) {\n                                        const frame = toDataFrame(data.results.getTables.frames[0]);\n                                        const values = Array.from(frame.fields[0].values);\n                                        const options = values.map((item: string) => ({ label: item, value: item }));\n                                        setTables(options);\n                                    }\n                                },\n                                error: (err: any) => console.log('Fetch Error', err),\n                            });\n                        }}\n                    ></Select>\n                </Field>\n\n                <Field label=\"Table\" style={{ marginLeft: 8 }}>\n                    <Select\n                        options={tables}\n                        width={15}\n                        value={currentTable}\n                        onChange={(selectedTable: any) => {\n                            setDiscoverCurrent({\n                                ...discoverCurrent,\n                                table: selectedTable.value,\n                            });\n                            setCurrentTable(selectedTable.value);\n                            getFields(selectedTable);\n                            getIndexes(selectedTable);\n                        }}\n                    />\n                </Field>\n                <Field label=\"Mode\" style={{ marginLeft: 8, marginRight: 8, width: '120px' }}>\n                    <SearchType />\n                </Field>\n                {searchType === 'Lucene' ? (\n                    <Field label=\"Lucene\" style={{ width: '100%' }}>\n                        <Lucene />\n                    </Field>\n                ) : (\n                    <Field label={searchMode ? 'Search' : 'SQL'} style={{ width: '100%' }}>\n                        <SQLSearch\n                            style={{ flex: '1' }}\n                            onQuerying={() => {\n                                props?.onQuerying();\n                            }}\n                        />\n                    </Field>\n                )}\n            </DiscoverHeaderSearch>\n            {!searchFocus && (\n                <>\n                    <Field label=\"Time Field\">\n                        <Select\n                            value={currentTimeField}\n                            options={timeFields}\n                            onChange={(selectdbTimeFiled: any) => {\n                                setDiscoverCurrent({\n                                    ...discoverCurrent,\n                                    timeField: selectdbTimeFiled.value,\n                                });\n                                setLoc((prev: any) => {\n                                    const searchParams = prev.searchParams;\n                                    searchParams?.set('timeField', selectdbTimeFiled.value);\n                                    return {\n                                        ...prev,\n                                        searchParams,\n                                    };\n                                });\n                            }}\n                            placeholder={'Time Field'}\n                        />\n                    </Field>\n                    <Field label=\"Time Range\" style={{ marginLeft: 8, marginRight: 8 }}>\n                        <TimeRangeInput\n                            isReversed={false}\n                            onChange={timeRange => {\n                                const start = dayjs(timeRange.from.toDate());\n                                const end = dayjs(timeRange.to.toDate());\n                                setLoc(prev => {\n                                    const searchParams = prev.searchParams;\n                                    searchParams?.set('startTime', start.format(FORMAT_DATE));\n                                    searchParams?.set('endTime', end.format(FORMAT_DATE));\n                                    return {\n                                        ...prev,\n                                        searchParams,\n                                    };\n                                });\n                                setCurrentDate([start, end]);\n                                setTimeRange(timeRange);\n                            }}\n                            value={timeRange}\n                        />\n                    </Field>\n                </>\n            )}\n            <Field label=\"\">\n                <Button\n                    onClick={() => {\n                        const latestTime = getLatestTime(activeItem?.key as string);\n                        if (latestTime) {\n                            const [latestStartTime, latestEndTime] = latestTime;\n                            setLoc(prev => {\n                                const searchParams = prev.searchParams;\n                                searchParams?.set('startTime', dayjs(latestStartTime).format(FORMAT_DATE));\n                                searchParams?.set('endTime', dayjs(latestEndTime).format(FORMAT_DATE));\n                                return {\n                                    ...prev,\n                                    searchParams,\n                                };\n                            });\n                        }\n                        props?.onQuerying();\n                    }}\n                    variant=\"primary\"\n                    className=\"h-8\"\n                    icon={props?.loading ? 'fa fa-spinner' : 'sync'}\n                    disabled={!currentTimeField}\n                >\n                    {`Query`}\n                </Button>\n            </Field>\n        </div>\n    );\n}\n","export function encodeSpecialTokens(query: string): string {\n    return query\n        .replace(/\\\\\\\\/g, 'HDX_BACKSLASH_LITERAL')\n        .replace('http://', 'http_COLON_//')\n        .replace('https://', 'https_COLON_//')\n        .replace(/localhost:(\\d{1,5})/, 'localhost_COLON_$1')\n        .replace(/\\\\:/g, 'HDX_COLON');\n}\n\nexport function decodeSpecialTokens(query: string): string {\n    return query\n        .replace(/\\\\\"/g, '\"')\n        .replace(/HDX_BACKSLASH_LITERAL/g, '\\\\')\n        .replace('http_COLON_//', 'http://')\n        .replace('https_COLON_//', 'https://')\n        .replace(/localhost_COLON_(\\d{1,5})/, 'localhost:$1')\n        .replace(/HDX_COLON/g, ':');\n}\n","export const IMPLICIT_FIELD = '<implicit>';\n\nexport const CLICK_HOUSE_JSON_NUMBER_TYPES = [\n    'Int8',\n    'Int16',\n    'Int32',\n    'Int64',\n    'Int128',\n    'Int256',\n    'UInt8',\n    'UInt16',\n    'UInt32',\n    'UInt64',\n    'UInt128',\n    'UInt256',\n    'Float32',\n    'Float64',\n];\n","type Primitive = string | number | boolean | bigint | null | undefined | Date;\n\ntype RawSql = {\n    __raw: true;\n    value: string;\n};\n\nconst RAW_FLAG = '__raw';\n\nconst escapeString = (value: string): string => {\n    const escaped = value.replace(/\\\\/g, '\\\\\\\\').replace(/'/g, \"\\\\'\");\n    return `'${escaped}'`;\n};\n\nconst formatDate = (value: Date): string => {\n    const pad = (input: number) => input.toString().padStart(2, '0');\n    const year = value.getFullYear();\n    const month = pad(value.getMonth() + 1);\n    const day = pad(value.getDate());\n    const hours = pad(value.getHours());\n    const minutes = pad(value.getMinutes());\n    const seconds = pad(value.getSeconds());\n\n    return `'${year}-${month}-${day} ${hours}:${minutes}:${seconds}'`;\n};\n\nconst escapePrimitive = (value: Primitive | RawSql): string => {\n    if (isRaw(value)) {\n        return value.value;\n    }\n\n    if (value === null || value === undefined) {\n        return 'NULL';\n    }\n\n    if (value instanceof Date) {\n        return formatDate(value);\n    }\n\n    switch (typeof value) {\n        case 'number':\n        case 'bigint':\n            return `${value}`;\n        case 'boolean':\n            return value ? '1' : '0';\n        default:\n            return escapeString(String(value));\n    }\n};\n\nconst escapeIdentifier = (identifier: string | RawSql): string => {\n    if (isRaw(identifier)) {\n        return identifier.value;\n    }\n\n    return identifier\n        .split('.')\n        .map(part => {\n            if (part === '*') {\n                return '*';\n            }\n            return `\\`${part.replace(/`/g, '``')}\\``;\n        })\n        .join('.');\n};\n\nconst escapeValue = (value: any): string => {\n    if (isRaw(value)) {\n        return value.value;\n    }\n\n    if (Array.isArray(value)) {\n        const list = value.map(item => escapeValue(item));\n        return `(${list.join(', ')})`;\n    }\n\n    if (value && typeof value === 'object' && !(value instanceof Date)) {\n        return escapeString(JSON.stringify(value));\n    }\n\n    return escapePrimitive(value as Primitive);\n};\n\nconst isRaw = (value: unknown): value is RawSql => Boolean(value && typeof value === 'object' && RAW_FLAG in (value as any));\n\nconst format = (sql: string, values?: any[]): string => {\n    if (!values || values.length === 0) {\n        return sql;\n    }\n\n    let index = 0;\n\n    return sql.replace(/\\?\\?|\\?/g, placeholder => {\n        if (index >= values.length) {\n            return placeholder;\n        }\n\n        const value = values[index++];\n\n        if (placeholder === '??') {\n            if (Array.isArray(value)) {\n                return value.map(v => escapeIdentifier(v)).join(', ');\n            }\n            return escapeIdentifier(value);\n        }\n\n        return escapeValue(value);\n    });\n};\n\nconst raw = (value: string): RawSql => ({\n    __raw: true,\n    value,\n});\n\nconst SqlString = {\n    format,\n    raw,\n};\n\nexport default SqlString;\n","export enum JSDataType {\n    Array = 'array',\n    Date = 'date',\n    Map = 'map',\n    Number = 'number',\n    String = 'string',\n    Tuple = 'tuple',\n    Bool = 'bool',\n    JSON = 'json',\n    Dynamic = 'dynamic', // json type will store anything as Dynamic type by default\n}\n\nexport const convertCHDataTypeToJSType = (dataType: string): JSDataType | null => {\n    if (dataType.startsWith('Date')) {\n        return JSDataType.Date;\n    } else if (dataType.startsWith('Tuple')) {\n        return JSDataType.Tuple;\n    } else if (dataType.startsWith('Map')) {\n        return JSDataType.Map;\n    } else if (dataType.startsWith('Array')) {\n        return JSDataType.Array;\n    } else if (\n        dataType.startsWith('Int') ||\n        dataType.startsWith('UInt') ||\n        dataType.startsWith('Float') ||\n        // Nullable types are possible (charts)\n        dataType.startsWith('Nullable(Int') ||\n        dataType.startsWith('Nullable(UInt') ||\n        dataType.startsWith('Nullable(Float')\n    ) {\n        return JSDataType.Number;\n    } else if (\n        dataType.startsWith('String') ||\n        dataType.startsWith('FixedString') ||\n        dataType.startsWith('Enum') ||\n        dataType.startsWith('UUID') ||\n        dataType.startsWith('IPv4') ||\n        dataType.startsWith('IPv6')\n    ) {\n        return JSDataType.String;\n    } else if (dataType === 'Bool') {\n        return JSDataType.Bool;\n    } else if (dataType.startsWith('JSON')) {\n        return JSDataType.JSON;\n    } else if (dataType.startsWith('Dynamic')) {\n        return JSDataType.Dynamic;\n    } else if (dataType.startsWith('LowCardinality')) {\n        return convertCHDataTypeToJSType(dataType.slice(15, -1));\n    }\n\n    return null;\n};\n\nexport const convertCHTypeToPrimitiveJSType = (dataType: string) => {\n    const jsType = convertCHDataTypeToJSType(dataType);\n\n    if (jsType === JSDataType.Map || jsType === JSDataType.Array || jsType === JSDataType.Tuple) {\n        throw new Error('Map, Array or Tuple type is not a primitive type');\n    } else if (jsType === JSDataType.Date) {\n        return JSDataType.Number;\n    }\n\n    return jsType;\n};\n","// Replace splitAndTrimCSV, should remove splitAndTrimCSV later\nexport function splitAndTrimWithBracket(input: string): string[] {\n    let parenCount = 0;\n    let squareCount = 0;\n    let inSingleQuote = false;\n    let inDoubleQuote = false;\n\n    const res: string[] = [];\n    let cur = '';\n    for (const c of input + ',') {\n        if (c === '\"' && !inSingleQuote) {\n            inDoubleQuote = !inDoubleQuote;\n            cur += c;\n            continue;\n        }\n\n        if (c === \"'\" && !inDoubleQuote) {\n            inSingleQuote = !inSingleQuote;\n            cur += c;\n            continue;\n        }\n        // Only count brackets when not in quotes\n        if (!inSingleQuote && !inDoubleQuote) {\n            if (c === '(') {\n                parenCount++;\n            } else if (c === ')') {\n                parenCount--;\n            } else if (c === '[') {\n                squareCount++;\n            } else if (c === ']') {\n                squareCount--;\n            }\n        }\n\n        if (c === ',' && parenCount === 0 && squareCount === 0 && !inSingleQuote && !inDoubleQuote) {\n            const trimString = cur.trim();\n            if (trimString) {\n                res.push(trimString)\n            };\n            cur = '';\n        } else {\n            cur += c;\n        }\n    }\n    return res;\n}\n","// @ts-ignore: no type declarations for '@hyperdx/lucene'\nimport lucene from '@hyperdx/lucene';\nimport SqlString from './sqlstring-browser';\nimport { getColumn as getColumnMetadata, getInvertedIndexColumns } from '../../services/metaservice';\nimport { convertCHTypeToPrimitiveJSType, JSDataType } from './enums';\nimport { splitAndTrimWithBracket } from './utils';\nimport { CLICK_HOUSE_JSON_NUMBER_TYPES, IMPLICIT_FIELD } from './constants';\n\nexport type ColumnLookup = {\n    name: string;\n    type: string;\n    dataType?: string;\n    columnType?: string;\n};\n\nexport type LegacyMetadataProvider = {\n    getColumn: (params: {\n        databaseName: string;\n        tableName: string;\n        column: string;\n        connectionId: string;\n    }) => Promise<{ name: string; type: string } | null>;\n};\n\ntype ImplicitTextSearchTarget = {\n    column: string;\n    sourceColumn: string;\n    propertyType?: JSDataType;\n    supportsTextSearch?: boolean;\n};\n\nexport interface Serializer {\n    operator(op: lucene.Operator): string;\n    eq(field: string, term: string, isNegatedField: boolean): Promise<string>;\n    isNotNull(field: string, isNegatedField: boolean): Promise<string>;\n    gte(field: string, term: string): Promise<string>;\n    lte(field: string, term: string): Promise<string>;\n    lt(field: string, term: string): Promise<string>;\n    gt(field: string, term: string): Promise<string>;\n    fieldSearch(\n        field: string,\n        term: string,\n        isNegatedField: boolean,\n        prefixWildcard: boolean,\n        suffixWildcard: boolean,\n        isPhrase: boolean,\n    ): Promise<string>;\n    range(field: string, start: string, end: string, isNegatedField: boolean): Promise<string>;\n}\n\nexport class EnglishSerializer implements Serializer {\n    private translateField(field: string) {\n        if (field === IMPLICIT_FIELD) {\n            return 'event';\n        }\n\n        return `'${field}'`;\n    }\n\n    operator(op: lucene.Operator) {\n        switch (op) {\n            case 'NOT':\n            case 'AND NOT':\n                return 'AND NOT';\n            case 'OR NOT':\n                return 'OR NOT';\n            // @ts-ignore TODO: Types need to be fixed upstream\n            case '&&':\n            case '<implicit>':\n            case 'AND':\n                return 'AND';\n            // @ts-ignore TODO: Types need to be fixed upstream\n            case '||':\n            case 'OR':\n                return 'OR';\n            default:\n                throw new Error(`Unexpected operator. ${op}`);\n        }\n    }\n\n    async eq(field: string, term: string, isNegatedField: boolean) {\n        return `${this.translateField(field)} ${isNegatedField ? 'is not' : 'is'} ${term}`;\n    }\n\n    async isNotNull(field: string, isNegatedField: boolean) {\n        return `${this.translateField(field)} ${isNegatedField ? 'is null' : 'is not null'}`;\n    }\n\n    async gte(field: string, term: string) {\n        return `${this.translateField(field)} is greater than or equal to ${term}`;\n    }\n\n    async lte(field: string, term: string) {\n        return `${this.translateField(field)} is less than or equal to ${term}`;\n    }\n\n    async lt(field: string, term: string) {\n        return `${this.translateField(field)} is less than ${term}`;\n    }\n\n    async gt(field: string, term: string) {\n        return `${this.translateField(field)} is greater than ${term}`;\n    }\n\n    async fieldSearch(\n        field: string,\n        term: string,\n        isNegatedField: boolean,\n        prefixWildcard: boolean,\n        suffixWildcard: boolean,\n        isPhrase: boolean,\n    ) {\n        if (field === IMPLICIT_FIELD) {\n            return `${this.translateField(field)} ${\n                prefixWildcard && suffixWildcard\n                    ? isNegatedField\n                        ? 'does not contain'\n                        : 'contains'\n                    : prefixWildcard\n                      ? isNegatedField\n                          ? 'does not end with'\n                          : 'ends with'\n                      : suffixWildcard\n                        ? isNegatedField\n                            ? 'does not start with'\n                            : 'starts with'\n                        : isNegatedField\n                          ? 'does not have whole word'\n                          : 'has whole word'\n            } ${term}`;\n        }\n\n        return `${this.translateField(field)} ${isNegatedField ? 'does not contain' : 'contains'} ${term}`;\n    }\n\n    async range(field: string, start: string, end: string, isNegatedField: boolean) {\n        return `${field} ${isNegatedField ? 'is not' : 'is'} between ${start} and ${end}`;\n    }\n}\n\nexport abstract class SQLSerializer implements Serializer {\n    private NOT_FOUND_QUERY = '(1 = 0)';\n\n    abstract getColumnForField(field: string): Promise<{\n        column?: string;\n        columnJSON?: { string: string; number: string };\n        propertyType?: JSDataType;\n        supportsTextSearch?: boolean;\n        sourceColumn?: string;\n        implicitTargets?: ImplicitTextSearchTarget[];\n        found: boolean;\n    }>;\n\n    operator(op: lucene.Operator) {\n        switch (op) {\n            case 'NOT':\n            case 'AND NOT':\n                return 'AND NOT';\n            case 'OR NOT':\n                return 'OR NOT';\n            // @ts-ignore TODO: Types need to be fixed upstream\n            case '&&':\n            case '<implicit>':\n            case 'AND':\n                return 'AND';\n            // @ts-ignore TODO: Types need to be fixed upstream\n            case '||':\n            case 'OR':\n                return 'OR';\n            default:\n                throw new Error(`Unexpected operator. ${op}`);\n        }\n    }\n\n    async eq(field: string, term: string, isNegatedField: boolean) {\n        const { column, columnJSON, found, propertyType, supportsTextSearch, sourceColumn } =\n            await this.getColumnForField(field);\n        if (!found) {\n            return this.NOT_FOUND_QUERY;\n        }\n        if (propertyType === JSDataType.Bool) {\n            const normTerm = `${term}`.trim().toLowerCase();\n            return SqlString.format(`(?? ${isNegatedField ? '!' : ''}= ?)`, [\n                column,\n                normTerm === 'true' ? 1 : normTerm === 'false' ? 0 : parseInt(normTerm, 10),\n            ]);\n        } else if (propertyType === JSDataType.Number) {\n            return SqlString.format(`(${column} ${isNegatedField ? '!' : ''}= CAST(?, 'Float64'))`, [term]);\n        } else if (propertyType === JSDataType.JSON) {\n            return SqlString.format(`(${columnJSON?.string} ${isNegatedField ? '!' : ''}= ?)`, [term]);\n        } else if (propertyType === JSDataType.String && supportsTextSearch) {\n            const searchTarget = column && column.length > 0 ? column : sourceColumn;\n            if (!searchTarget) {\n                return this.NOT_FOUND_QUERY;\n            }\n            return SqlString.format(`(? ${isNegatedField ? 'NOT ' : ''}MATCH_PHRASE ?)`, [\n                SqlString.raw(searchTarget),\n                term,\n            ]);\n        }\n        return SqlString.format(`(${column} ${isNegatedField ? '!' : ''}= ?)`, [term]);\n    }\n\n    async isNotNull(field: string, isNegatedField: boolean) {\n        const { column, columnJSON, found, propertyType } = await this.getColumnForField(field);\n        if (!found) {\n            return this.NOT_FOUND_QUERY;\n        }\n        if (propertyType === JSDataType.JSON) {\n            return `notEmpty(${columnJSON?.string}) ${isNegatedField ? '!' : ''}= 1`;\n        }\n        return `notEmpty(${column}) ${isNegatedField ? '!' : ''}= 1`;\n    }\n\n    async gte(field: string, term: string) {\n        const { column, columnJSON, found, propertyType } = await this.getColumnForField(field);\n        if (!found) {\n            return this.NOT_FOUND_QUERY;\n        }\n        if (propertyType === JSDataType.JSON) {\n            return SqlString.format(`(${columnJSON?.number} >= ?)`, [term]);\n        }\n        return SqlString.format(`(${column} >= ?)`, [term]);\n    }\n\n    async lte(field: string, term: string) {\n        const { column, columnJSON, found, propertyType } = await this.getColumnForField(field);\n        if (!found) {\n            return this.NOT_FOUND_QUERY;\n        }\n        if (propertyType === JSDataType.JSON) {\n            return SqlString.format(`(${columnJSON?.number} <= ?)`, [term]);\n        }\n        return SqlString.format(`(${column} <= ?)`, [term]);\n    }\n\n    async lt(field: string, term: string) {\n        const { column, columnJSON, found, propertyType } = await this.getColumnForField(field);\n        if (!found) {\n            return this.NOT_FOUND_QUERY;\n        }\n        if (propertyType === JSDataType.JSON) {\n            return SqlString.format(`(${columnJSON?.number} < ?)`, [term]);\n        }\n        return SqlString.format(`(${column} < ?)`, [term]);\n    }\n\n    async gt(field: string, term: string) {\n        const { column, columnJSON, found, propertyType } = await this.getColumnForField(field);\n        if (!found) {\n            return this.NOT_FOUND_QUERY;\n        }\n        if (propertyType === JSDataType.JSON) {\n            return SqlString.format(`(${columnJSON?.number} > ?)`, [term]);\n        }\n        return SqlString.format(`(${column} > ?)`, [term]);\n    }\n\n    private attemptToParseNumber(term: string): string | number {\n        const number = Number.parseFloat(term);\n        if (Number.isNaN(number)) {\n            return term;\n        }\n        return number;\n    }\n\n    private tokenizeTerm(term: string): string[] {\n        return term.split(/[ -/:-@[-`{-~\\t\\n\\r]+/).filter(t => t.length > 0);\n    }\n\n    private termHasSeperators(term: string): boolean {\n        return term.match(/[ -/:-@[-`{-~\\t\\n\\r]+/) != null;\n    }\n\n    async fieldSearch(\n        field: string,\n        term: string,\n        isNegatedField: boolean,\n        prefixWildcard: boolean,\n        suffixWildcard: boolean,\n        isPhrase: boolean,\n    ) {\n        const isImplicitField = field === IMPLICIT_FIELD;\n        const { column, found, propertyType, supportsTextSearch, sourceColumn, implicitTargets } =\n            await this.getColumnForField(field);\n        if (!found) {\n            return this.NOT_FOUND_QUERY;\n        }\n\n        if (propertyType === JSDataType.Bool) {\n            const normTerm = `${term}`.trim().toLowerCase();\n            return SqlString.format(`(?? ${isNegatedField ? '!' : ''}= ?)`, [\n                column,\n                normTerm === 'true' ? 1 : normTerm === 'false' ? 0 : parseInt(normTerm, 10),\n            ]);\n        } else if (propertyType === JSDataType.Number) {\n            return SqlString.format(`(?? ${isNegatedField ? '!' : ''}= CAST(?, 'Float64'))`, [column, term]);\n        } else if (propertyType === JSDataType.JSON && supportsTextSearch === false) {\n            return this.NOT_FOUND_QUERY;\n        }\n\n        if (term.length === 0) {\n            return '(1=1)';\n        }\n\n        if (isImplicitField) {\n            if (implicitTargets && implicitTargets.length > 0) {\n                const usePhrasePrefix = !isPhrase && suffixWildcard && !prefixWildcard;\n                const matchTerm = isPhrase\n                    ? term\n                    : usePhrasePrefix\n                        ? term\n                        : `${prefixWildcard ? '*' : ''}${term}${suffixWildcard ? '*' : ''}`;\n                const clauses = implicitTargets\n                    .map(target => {\n                        if (!target) {\n                            return null;\n                        }\n\n                        if (\n                            isPhrase &&\n                            target.propertyType !== JSDataType.String &&\n                            target.propertyType !== JSDataType.JSON\n                        ) {\n                            return null;\n                        }\n\n                        if (\n                            (target.propertyType === JSDataType.String || target.propertyType === JSDataType.JSON) &&\n                            target.supportsTextSearch\n                        ) {\n                            const identifier = target.sourceColumn ?? target.column;\n                            if (!identifier) {\n                                return null;\n                            }\n                            const operator = isPhrase\n                                ? 'MATCH_PHRASE'\n                                : usePhrasePrefix\n                                    ? 'MATCH_PHRASE_PREFIX'\n                                    : 'MATCH_ANY';\n                            return SqlString.format(`(?? ${operator} ?)`, [identifier, matchTerm]);\n                        }\n\n                        if (target.propertyType === JSDataType.Number) {\n                            const identifier = target.sourceColumn ?? target.column;\n                            if (!identifier) {\n                                return null;\n                            }\n                            return SqlString.format(`(?? = CAST(?, 'Float64'))`, [identifier, term]);\n                        }\n\n                        if (target.propertyType === JSDataType.Bool) {\n                            const identifier = target.sourceColumn ?? target.column;\n                            if (!identifier) {\n                                return null;\n                            }\n                            const normTerm = `${term}`.trim().toLowerCase();\n                            const boolValue =\n                                normTerm === 'true' ? 1 : normTerm === 'false' ? 0 : parseInt(normTerm, 10);\n                            return SqlString.format(`(?? = ?)`, [identifier, boolValue]);\n                        }\n\n                        return null;\n                    })\n                    .filter((clause): clause is string => clause != null);\n\n                if (clauses.length === 0) {\n                    return this.NOT_FOUND_QUERY;\n                }\n\n                const orClause = clauses.join(' OR ');\n                const wrapped = clauses.length === 1 ? clauses[0] : `(${orClause})`;\n\n                if (isNegatedField) {\n                    return `(NOT ${wrapped})`;\n                }\n\n                return wrapped;\n            }\n\n            if (column) {\n                if (prefixWildcard || suffixWildcard) {\n                    return SqlString.format(\n                        `(lower(?) ${isNegatedField ? 'NOT ' : ''}LIKE lower(?))`,\n                        [\n                            SqlString.raw(column ?? ''),\n                            `${prefixWildcard ? '%' : ''}${term}${suffixWildcard ? '%' : ''}`,\n                        ],\n                    );\n                } else {\n                    const hasSeperators = this.termHasSeperators(term);\n                    if (hasSeperators) {\n                        const tokens = this.tokenizeTerm(term);\n                        return `(${isNegatedField ? 'NOT (' : ''}${[\n                            ...tokens.map(token =>\n                                SqlString.format(`hasToken(lower(?), lower(?))`, [SqlString.raw(column ?? ''), token]),\n                            ),\n                            SqlString.format(`(lower(?) LIKE lower(?))`, [SqlString.raw(column ?? ''), `%${term}%`]),\n                        ].join(' AND ')}${isNegatedField ? ')' : ''})`;\n                    }\n\n                    return SqlString.format(\n                        `(${isNegatedField ? 'NOT ' : ''}hasToken(lower(?), lower(?)))`,\n                        [SqlString.raw(column ?? ''), term],\n                    );\n                }\n            }\n\n            return this.NOT_FOUND_QUERY;\n        } else {\n            if (supportsTextSearch === false) {\n                return this.NOT_FOUND_QUERY;\n            }\n\n            const searchTarget = column && column.length > 0 ? column : sourceColumn;\n            if (!searchTarget) {\n                return this.NOT_FOUND_QUERY;\n            }\n\n            const usePhrasePrefix = !isPhrase && suffixWildcard && !prefixWildcard;\n            const matchTerm = isPhrase\n                ? term\n                : usePhrasePrefix\n                    ? term\n                    : `${prefixWildcard ? '*' : ''}${term}${suffixWildcard ? '*' : ''}`;\n            const operator = isPhrase\n                ? 'MATCH_PHRASE'\n                : usePhrasePrefix\n                    ? 'MATCH_PHRASE_PREFIX'\n                    : 'MATCH_ANY';\n            return SqlString.format(`(? ${isNegatedField ? 'NOT ' : ''}${operator} ?)`, [\n                SqlString.raw(searchTarget),\n                matchTerm,\n            ]);\n        }\n    }\n\n    async range(field: string, start: string, end: string, isNegatedField: boolean) {\n        const { column, found } = await this.getColumnForField(field);\n        if (!found) {\n            return this.NOT_FOUND_QUERY;\n        }\n        return SqlString.format(`(${column} ${isNegatedField ? 'NOT ' : ''}BETWEEN ? AND ?)`, [\n            this.attemptToParseNumber(start),\n            this.attemptToParseNumber(end),\n        ]);\n    }\n}\n\nexport type CustomSchemaConfig = {\n    databaseName: string;\n    implicitColumnExpression?: string;\n    tableName: string;\n    connectionId: string;\n    datasourceType?: string;\n};\n\nexport class CustomSchemaSQLSerializerV2 extends SQLSerializer {\n    private tableName: string;\n    private databaseName: string;\n    private implicitColumnExpression?: string;\n    private connectionId: string;\n    private datasourceType?: string;\n    private legacyMetadataProvider?: LegacyMetadataProvider;\n    private columnMetadataCache = new Map<string, ColumnLookup | null>();\n    private invertedIndexColumns?: Set<string>;\n    private invertedIndexColumnsPromise?: Promise<Set<string>>;\n\n    constructor({\n        metadata,\n        databaseName,\n        tableName,\n        connectionId,\n        implicitColumnExpression,\n        datasourceType,\n    }: { metadata?: LegacyMetadataProvider } & CustomSchemaConfig) {\n        super();\n        this.legacyMetadataProvider = metadata;\n        this.databaseName = databaseName;\n        this.tableName = tableName;\n        this.implicitColumnExpression = implicitColumnExpression;\n        this.connectionId = connectionId;\n        this.datasourceType = datasourceType;\n    }\n\n    private async fetchColumnMetadata(column: string): Promise<ColumnLookup | null> {\n        if (this.columnMetadataCache.has(column)) {\n            return this.columnMetadataCache.get(column) ?? null;\n        }\n\n        let resolved: ColumnLookup | null = null;\n\n        try {\n            const result = await getColumnMetadata({\n                connectionId: this.connectionId,\n                database: this.databaseName,\n                table: this.tableName,\n                column,\n                datasourceType: this.datasourceType,\n            });\n\n            if (result) {\n                resolved = {\n                    name: result.name,\n                    type: result.normalizedType || result.columnType || result.dataType || 'Unknown',\n                    dataType: result.dataType,\n                    columnType: result.columnType,\n                };\n            }\n        } catch (error) {\n            // ignore service errors and fallback to legacy metadata provider if available\n        }\n\n        if (!resolved && this.legacyMetadataProvider?.getColumn) {\n            try {\n                const legacy = await this.legacyMetadataProvider.getColumn({\n                    databaseName: this.databaseName,\n                    tableName: this.tableName,\n                    column,\n                    connectionId: this.connectionId,\n                });\n\n                if (legacy) {\n                    resolved = {\n                        name: legacy.name,\n                        type: legacy.type || 'Unknown',\n                    };\n                }\n            } catch (legacyError) {\n                // swallow legacy metadata errors\n            }\n        }\n\n        this.columnMetadataCache.set(column, resolved);\n        return resolved;\n    }\n\n    private async loadInvertedIndexColumns(): Promise<Set<string>> {\n        if (this.invertedIndexColumns) {\n            return this.invertedIndexColumns;\n        }\n\n        if (!this.invertedIndexColumnsPromise) {\n            this.invertedIndexColumnsPromise = (async () => {\n                try {\n                    const columns = await getInvertedIndexColumns({\n                        connectionId: this.connectionId,\n                        database: this.databaseName,\n                        table: this.tableName,\n                        datasourceType: this.datasourceType,\n                    });\n                    return new Set(columns.map(name => name.toLowerCase()));\n                } catch (error) {\n                    return new Set<string>();\n                }\n            })();\n        }\n\n        const resolved = await this.invertedIndexColumnsPromise;\n        this.invertedIndexColumns = resolved;\n        return resolved;\n    }\n\n    private async columnHasInvertedIndex(column: string): Promise<boolean> {\n        if (!column) {\n            return false;\n        }\n\n        const indexes = await this.loadInvertedIndexColumns();\n        return indexes.has(column.toLowerCase());\n    }\n\n    private async buildColumnExpressionFromField(field: string) {\n        const exactMatch = await this.fetchColumnMetadata(field);\n\n        if (exactMatch) {\n            return {\n                found: true,\n                columnType: exactMatch.type,\n                columnExpression: exactMatch.name,\n                sourceColumn: exactMatch.name,\n            };\n        }\n\n        const fieldPrefix = field.split('.')[0];\n        const prefixMatch = await this.fetchColumnMetadata(fieldPrefix);\n\n        if (prefixMatch) {\n            const fieldPostfix = field.split('.').slice(1).join('.');\n\n            if (prefixMatch.type.startsWith('Map')) {\n                const valueType = prefixMatch.type.match(/,\\s+(\\w+)\\)$/)?.[1];\n                return {\n                    found: true,\n                    columnExpression: SqlString.format(`??[?]`, [prefixMatch.name, fieldPostfix]),\n                    columnType: valueType ?? 'Unknown',\n                    sourceColumn: prefixMatch.name,\n                };\n            } else if (prefixMatch.type.startsWith('JSON')) {\n                return {\n                    found: true,\n                    columnExpression: '',\n                    columnExpressionJSON: {\n                        string: SqlString.format(`toString(??)`, [field]),\n                        number: SqlString.format(`dynamicType(??) in (?) and ??`, [\n                            field,\n                            CLICK_HOUSE_JSON_NUMBER_TYPES,\n                            field,\n                        ]),\n                    },\n                    columnType: 'JSON',\n                    sourceColumn: prefixMatch.name,\n                };\n            } else if (prefixMatch.type === 'String') {\n                const nestedPaths = fieldPostfix.split('.');\n                return {\n                    found: true,\n                    columnExpression: SqlString.format(\n                        `JSONExtractString(??, ${Array(nestedPaths.length).fill('?').join(',')})`,\n                        [prefixMatch.name, ...nestedPaths],\n                    ),\n                    columnType: 'String',\n                    sourceColumn: prefixMatch.name,\n                };\n            }\n\n            throw new Error('Unsupported column type for prefix match');\n        }\n\n        return {\n            found: true,\n            columnExpression: field,\n            columnType: 'Unknown',\n            sourceColumn: field,\n        };\n    }\n\n    async getColumnForField(field: string) {\n        if (field === IMPLICIT_FIELD) {\n            if (!this.implicitColumnExpression) {\n                throw new Error('Can not search bare text without an implicit column set.');\n            }\n\n            const expressions = splitAndTrimWithBracket(this.implicitColumnExpression);\n            const implicitFieldCandidates = Array.from(\n                new Set(\n                    expressions\n                        .reduce<string[]>((acc, expression) => {\n                            acc.push(...this.extractFieldNamesFromExpression(expression));\n                            return acc;\n                        }, [])\n                        .filter((name): name is string => !!name),\n                ),\n            );\n\n            const implicitTargets: any[] = (\n                await Promise.all(\n                    implicitFieldCandidates.map(async candidate => {\n                        try {\n                            const candidateExpression = await this.buildColumnExpressionFromField(candidate);\n                            const candidatePropertyType =\n                                convertCHTypeToPrimitiveJSType(candidateExpression.columnType) ?? undefined;\n\n                            let candidateSupportsTextSearch: boolean | undefined;\n                            if (\n                                (candidatePropertyType === JSDataType.String ||\n                                    candidatePropertyType === JSDataType.JSON) &&\n                                candidateExpression.sourceColumn &&\n                                candidateExpression.columnExpression === candidateExpression.sourceColumn\n                            ) {\n                                candidateSupportsTextSearch = await this.columnHasInvertedIndex(\n                                    candidateExpression.sourceColumn,\n                                );\n                            } else if (\n                                candidatePropertyType === JSDataType.String ||\n                                candidatePropertyType === JSDataType.JSON\n                            ) {\n                                candidateSupportsTextSearch = false;\n                            }\n\n                            return {\n                                column: candidateExpression.columnExpression,\n                                sourceColumn: candidateExpression.sourceColumn ?? candidate,\n                                propertyType: candidatePropertyType,\n                                supportsTextSearch: candidateSupportsTextSearch,\n                            };\n                        } catch (error) {\n                            return null;\n                        }\n                    }),\n                )\n            ).filter((target) => target !== null);\n\n            return {\n                column:\n                    expressions.length > 1\n                        ? `concatWithSeparator(';',${expressions.join(',')})`\n                        : this.implicitColumnExpression,\n                columnJSON: undefined,\n                propertyType: JSDataType.String,\n                supportsTextSearch: undefined,\n                sourceColumn: undefined,\n                implicitTargets,\n                found: true,\n            };\n        }\n\n        const expression = await this.buildColumnExpressionFromField(field);\n        const propertyType = convertCHTypeToPrimitiveJSType(expression.columnType) ?? undefined;\n\n        let supportsTextSearch: boolean | undefined;\n        if (\n            (propertyType === JSDataType.String || propertyType === JSDataType.JSON) &&\n            expression.sourceColumn &&\n            expression.columnExpression === expression.sourceColumn\n        ) {\n            supportsTextSearch = await this.columnHasInvertedIndex(expression.sourceColumn);\n        } else if (propertyType === JSDataType.String || propertyType === JSDataType.JSON) {\n            supportsTextSearch = false;\n        }\n\n        return {\n            column: expression.columnExpression,\n            columnJSON: expression?.columnExpressionJSON,\n            propertyType,\n            supportsTextSearch,\n            sourceColumn: expression.sourceColumn,\n            implicitTargets: undefined,\n            found: expression.found,\n        };\n    }\n\n    private extractFieldNamesFromExpression(expression: string): string[] {\n        const matches = expression.match(/`([^`]+)`/g);\n        if (!matches) {\n            return [];\n        }\n        return matches.map(match => match.slice(1, -1));\n    }\n}\n","// @ts-ignore: no type declarations for '@hyperdx/lucene'\nimport lucene from '@hyperdx/lucene';\nimport { decodeSpecialTokens, encodeSpecialTokens } from './tokenUtils';\nimport { IMPLICIT_FIELD } from './constants';\nimport { EnglishSerializer, Serializer } from './serializers';\n\nexport function parse(query: string): lucene.AST {\n    return lucene.parse(encodeSpecialTokens(query));\n}\n\nasync function nodeTerm(node: lucene.Node, serializer: Serializer): Promise<string> {\n    const field = node.field[0] === '-' ? node.field.slice(1) : node.field;\n    let isNegatedField = node.field[0] === '-';\n    const isImplicitField = node.field === IMPLICIT_FIELD;\n\n    if ((node as lucene.NodeTerm).term != null) {\n        const nodeTermInstance = node as lucene.NodeTerm;\n        let term = decodeSpecialTokens(nodeTermInstance.term);\n        if (isImplicitField && nodeTermInstance.prefix === '-') {\n            isNegatedField = true;\n        }\n        if (!isImplicitField && nodeTermInstance.prefix === '-') {\n            term = nodeTermInstance.prefix + decodeSpecialTokens(nodeTermInstance.term);\n        }\n\n        if (nodeTermInstance.quoted && !isImplicitField) {\n            return serializer.eq(field, term, isNegatedField);\n        }\n\n        if (!nodeTermInstance.quoted && term === '*') {\n            return serializer.isNotNull(field, isNegatedField);\n        }\n\n        if (!nodeTermInstance.quoted && term.substring(0, 2) === '>=') {\n            if (isNegatedField) {\n                return serializer.lt(field, term.slice(2));\n            }\n            return serializer.gte(field, term.slice(2));\n        }\n        if (!nodeTermInstance.quoted && term.substring(0, 2) === '<=') {\n            if (isNegatedField) {\n                return serializer.gt(field, term.slice(2));\n            }\n            return serializer.lte(field, term.slice(2));\n        }\n        if (!nodeTermInstance.quoted && term[0] === '>') {\n            if (isNegatedField) {\n                return serializer.lte(field, term.slice(1));\n            }\n            return serializer.gt(field, term.slice(1));\n        }\n        if (!nodeTermInstance.quoted && term[0] === '<') {\n            if (isNegatedField) {\n                return serializer.gte(field, term.slice(1));\n            }\n            return serializer.lt(field, term.slice(1));\n        }\n\n        let prefixWildcard = false;\n        let suffixWildcard = false;\n        if (!nodeTermInstance.quoted && term[0] === '*') {\n            prefixWildcard = true;\n            term = term.slice(1);\n        }\n        if (!nodeTermInstance.quoted && term[term.length - 1] === '*') {\n            suffixWildcard = true;\n            term = term.slice(0, -1);\n        }\n\n        return serializer.fieldSearch(field, term, isNegatedField, prefixWildcard, suffixWildcard, nodeTermInstance.quoted);\n    }\n\n    if ((node as lucene.NodeRangedTerm).inclusive != null) {\n        const rangedTerm = node as lucene.NodeRangedTerm;\n        return serializer.range(field, rangedTerm.term_min, rangedTerm.term_max, isNegatedField);\n    }\n\n    throw new Error(`Unexpected Node type. ${node}`);\n}\n\nasync function serialize(ast: lucene.AST | lucene.Node, serializer: Serializer): Promise<string> {\n    if ((ast as lucene.NodeTerm).term != null) {\n        return await nodeTerm(ast as lucene.NodeTerm, serializer);\n    }\n    if ((ast as lucene.NodeRangedTerm).inclusive != null) {\n        return await nodeTerm(ast as lucene.NodeTerm, serializer);\n    }\n\n    if ((ast as lucene.BinaryAST).right != null) {\n        const binaryAST = ast as lucene.BinaryAST;\n        const operator = serializer.operator(binaryAST.operator);\n        const parenthesized = binaryAST.parenthesized;\n        return `${parenthesized ? '(' : ''}${await serialize(binaryAST.left, serializer)} ${operator} ${await serialize(\n            binaryAST.right,\n            serializer,\n        )}${parenthesized ? ')' : ''}`;\n    }\n\n    if ((ast as lucene.LeftOnlyAST).left != null) {\n        const leftOnlyAST = ast as lucene.LeftOnlyAST;\n        const parenthesized = leftOnlyAST.parenthesized;\n        return `${parenthesized ? '(' : ''}${\n            leftOnlyAST.start !== undefined ? `${leftOnlyAST.start} ` : ''\n        }${await serialize(leftOnlyAST.left, serializer)}${parenthesized ? ')' : ''}`;\n    }\n\n    return '';\n}\n\nexport async function genWhereSQL(ast: lucene.AST, serializer: Serializer): Promise<string> {\n    return await serialize(ast, serializer);\n}\n\nexport async function genEnglishExplanation(query: string): Promise<string> {\n    try {\n        const parsedQ = parse(query);\n\n        if (parsedQ) {\n            const serializer = new EnglishSerializer();\n            return await serialize(parsedQ, serializer);\n        }\n    } catch (e) {\n        console.warn('Parse failure', query, e);\n    }\n\n    return `Message containing ${query}`;\n}\n","import { genWhereSQL, parse } from './ast';\nimport { SQLSerializer } from './serializers';\n\nexport { parse, genWhereSQL, genEnglishExplanation } from './ast';\nexport { SQLSerializer, CustomSchemaSQLSerializerV2 } from './serializers';\n\nexport class SearchQueryBuilder {\n    private readonly searchQ: string;\n    private readonly conditions: string[];\n    private serializer: SQLSerializer;\n\n    constructor(searchQ: string, serializer: SQLSerializer) {\n        this.conditions = [];\n        this.searchQ = searchQ;\n        this.serializer = serializer;\n    }\n\n    setSerializer(serializer: SQLSerializer) {\n        this.serializer = serializer;\n        return this;\n    }\n\n    getSerializer() {\n        return this.serializer;\n    }\n\n    private async genSearchQuery() {\n        if (!this.searchQ) {\n            return '';\n        }\n\n        const parsedQ = parse(this.searchQ);\n\n        return await genWhereSQL(parsedQ, this.serializer);\n    }\n\n    and(condition: string) {\n        if (condition && condition.trim()) {\n            this.conditions.push(`(${condition})`);\n        }\n        return this;\n    }\n\n    async build() {\n        const searchQuery = await this.genSearchQuery();\n        if (this.searchQ) {\n            this.and(searchQuery);\n        }\n        return this.conditions.join(' AND ');\n    }\n}\n","import { CustomSchemaSQLSerializerV2, genWhereSQL, parse } from 'utils/query-parser/query-parser';\n\ntype GetWhereSQLParams = {\n    query: string;\n    databaseName: string;\n    tableName: string;\n    connectionId: string;\n    implicitColumnExpression?: string;\n    datasourceType?: string;\n};\n\nexport async function getWhereSQLViaLucene({ query, databaseName, tableName, connectionId, implicitColumnExpression, datasourceType }: GetWhereSQLParams): Promise<string> {\n    const trimmedQuery = query?.trim();\n    if (!trimmedQuery) {\n        return '';\n    }\n\n    const serializer = new CustomSchemaSQLSerializerV2({\n        databaseName,\n        tableName,\n        connectionId,\n        implicitColumnExpression,\n        datasourceType,\n    });\n\n    try {\n        const ast = parse(trimmedQuery);\n        const whereSQL =  await genWhereSQL(ast, serializer);\n        console.log({\n            query,\n            whereSQL,\n        });\n        return whereSQL;\n    } catch (error) {\n        console.error('Failed to generate Lucene WHERE SQL', error);\n        throw error;\n    }\n}\n","import { useCallback } from 'react';\nimport { useAtomValue } from 'jotai';\nimport {\n    currentDatabaseAtom,\n    currentTableAtom,\n    currentTimeFieldAtom,\n    searchTypeAtom,\n    searchValueAtom,\n    selectedDatasourceAtom,\n    tableFieldsAtom,\n} from 'store/discover';\nimport { getWhereSQLViaLucene } from 'services/lucene';\n\nexport function useLuceneWhereClause() {\n    const searchType = useAtomValue(searchTypeAtom);\n    const searchValue = useAtomValue(searchValueAtom);\n    const currentTable = useAtomValue(currentTableAtom);\n    const currentDatabase = useAtomValue(currentDatabaseAtom);\n    const selectdbDS = useAtomValue(selectedDatasourceAtom);\n    const tableFields = useAtomValue(tableFieldsAtom);\n    const currentTimeField = useAtomValue(currentTimeFieldAtom);\n\n    return useCallback(async (): Promise<string> => {\n        if (searchType !== 'Lucene') {\n            return '';\n        }\n\n        const trimmedQuery = searchValue?.trim();\n        if (!trimmedQuery || !currentTable || !currentDatabase || !selectdbDS) {\n            return '';\n        }\n\n        const candidateFieldNames = (tableFields || [])\n            .map((field: any) => {\n                const rawName = field?.Field ?? field?.value ?? field?.name;\n                const type = String(field?.Type ?? '').toUpperCase();\n                if (!rawName) {\n                    return null;\n                }\n\n                if (!type) {\n                    return rawName;\n                }\n\n                return /(CHAR|TEXT|STRING|JSON|VARIANT)/.test(type) ? rawName : null;\n            })\n            .filter(Boolean) as string[];\n\n        const implicitExpressions = candidateFieldNames.slice(0, 10).map(name => `coalesce(\\`${name}\\`, '')`);\n\n        let implicitColumnExpression: string | undefined;\n        if (implicitExpressions.length > 0) {\n            implicitColumnExpression = implicitExpressions.join(',\\n');\n        } else if (currentTimeField) {\n            implicitColumnExpression = `coalesce(\\`${currentTimeField}\\`, '')`;\n        }\n\n        return await getWhereSQLViaLucene({\n            query: trimmedQuery,\n            databaseName: currentDatabase,\n            tableName: currentTable,\n            connectionId: selectdbDS.uid,\n            datasourceType: selectdbDS.type,\n            implicitColumnExpression,\n        });\n    }, [currentDatabase, currentTable, currentTimeField, searchType, searchValue, selectdbDS, tableFields]);\n}\n","import { useCallback, useEffect } from 'react';\nimport { Dayjs } from 'dayjs';\nimport { useAtom, useAtomValue, useSetAtom } from 'jotai';\nimport {\n    currentCatalogAtom,\n    currentDatabaseAtom,\n    currentDateAtom,\n    currentIndexAtom,\n    currentTableAtom,\n    currentTimeFieldAtom,\n    dataFilterAtom,\n    discoverLoadingAtom,\n    intervalAtom,\n    pageAtom,\n    pageSizeAtom,\n    searchTypeAtom,\n    searchValueAtom,\n    selectedDatasourceAtom,\n    tableDataAtom,\n    tableDataChartsAtom,\n    tableFieldsAtom,\n    tableTotalCountAtom,\n    tableTracesDataAtom,\n    topDataAtom,\n} from 'store/discover';\nimport { getTableDataChartsService, getTableDataCountService, getTableDataService, getTopDataService } from 'services/discover';\nimport { getTableDataTraceService } from 'services/traces';\nimport {\n    encodeBase64,\n    getChartsData,\n    convertColumnToRow,\n    convertColumnToRowViaFieldsType,\n    generateHighlightedResults,\n    formatTracesResData,\n    getIndexesStatement,\n} from 'utils/data';\nimport { generateTableDataUID } from 'utils/utils';\nimport { FORMAT_DATE, getAutoInterval, IntervalEnum } from '../../constants';\nimport { toDataFrame } from '@grafana/data';\nimport { useLuceneWhereClause } from './useLuceneWhereClause';\n\ntype RefreshOptions = {\n    skipPageReset?: boolean;\n};\n\nexport function useDiscoverData() {\n    const [page, setPage] = useAtom(pageAtom);\n    const pageSize = useAtomValue(pageSizeAtom);\n    const setTableData = useSetAtom(tableDataAtom);\n    const setTableDataCharts = useSetAtom(tableDataChartsAtom);\n    const selectdbDS = useAtomValue(selectedDatasourceAtom);\n    const currentTimeField = useAtomValue(currentTimeFieldAtom);\n    const interval = useAtomValue(intervalAtom);\n    const currentIndexes = useAtomValue(currentIndexAtom);\n    const tableFields = useAtomValue(tableFieldsAtom);\n    const searchType = useAtomValue(searchTypeAtom);\n    const dataFilter = useAtomValue(dataFilterAtom);\n    const searchValue = useAtomValue(searchValueAtom);\n    const setTopData = useSetAtom(topDataAtom);\n    const currentTable = useAtomValue(currentTableAtom);\n    const currentCatalog = useAtomValue(currentCatalogAtom);\n    const currentDatabase = useAtomValue(currentDatabaseAtom);\n    const currentDate = useAtomValue(currentDateAtom);\n    const setTableTotalCount = useSetAtom(tableTotalCountAtom);\n    const setTraceData = useSetAtom(tableTracesDataAtom);\n    const [loading, setLoading] = useAtom(discoverLoadingAtom);\n    const buildLuceneWhereClause = useLuceneWhereClause();\n\n    const getTableData = useCallback(async () => {\n        if (!currentTable || !currentDatabase || !selectdbDS) {\n            return;\n        }\n        setLoading(prev => ({ ...prev, getTableData: true }));\n        const indexesStatement = getIndexesStatement(currentIndexes, tableFields, searchValue);\n        const payload: any = {\n            catalog: currentCatalog,\n            database: currentDatabase,\n            table: currentTable,\n            timeField: currentTimeField,\n            startDate: currentDate[0]?.format(FORMAT_DATE),\n            endDate: (currentDate[1] as Dayjs).format(FORMAT_DATE),\n            cluster: '',\n            sort: 'DESC',\n            search_type: searchType,\n            indexes: '',\n            page: page,\n            page_size: pageSize,\n        };\n\n        if (searchType === 'Search') {\n            payload.indexes_statement = indexesStatement;\n        }\n        payload.data_filters = dataFilter.length > 0 ? dataFilter : [];\n\n        if (searchType === 'Lucene') {\n            try {\n                const luceneWhere = await buildLuceneWhereClause();\n                if (luceneWhere) {\n                    payload.lucene_where = luceneWhere;\n                }\n            } catch (error) {\n                setLoading(prev => ({ ...prev, getTableData: false }));\n                setTableData([]);\n                console.error('Lucene query build failed', error);\n                return;\n            }\n        }\n\n        if (searchValue && searchType !== 'Lucene') {\n            payload.search_value = searchType === 'Search' ? encodeBase64(searchValue) : searchValue;\n        }\n\n        getTableDataService({\n            selectdbDS,\n            ...payload,\n        }).subscribe({\n            next: async ({ data, ok }: any) => {\n                setLoading(prev => ({ ...prev, getTableData: false }));\n                if (!ok) {\n                    return;\n                }\n                const frames = data?.results?.getTableData?.frames;\n                if (!frames || !frames[0]) {\n                    setTableData([]);\n                    return;\n                }\n                const rowsData = convertColumnToRow(frames[0]);\n                const resData = generateHighlightedResults(\n                    {\n                        search_value: searchValue,\n                        indexes: currentIndexes || [],\n                    },\n                    rowsData,\n                );\n\n                const rowsDataWithUid = await generateTableDataUID(resData);\n                setTableData(rowsDataWithUid);\n            },\n            error: (err: any) => {\n                setLoading(prev => ({ ...prev, getTableData: false }));\n                console.log('Fetch Error', err);\n            },\n        });\n    }, [\n        buildLuceneWhereClause,\n        currentCatalog,\n        currentDate,\n        currentDatabase,\n        currentIndexes,\n        currentTable,\n        currentTimeField,\n        dataFilter,\n        page,\n        pageSize,\n        searchType,\n        searchValue,\n        selectdbDS,\n        setLoading,\n        setTableData,\n        tableFields,\n    ]);\n\n    const getTableDataCharts = useCallback(async () => {\n        if (!currentTable || !currentDatabase || !selectdbDS) {\n            return;\n        }\n        setLoading(prev => ({ ...prev, getTableDataCharts: true }));\n        const autoInterval = getAutoInterval(currentDate as any);\n        const timeInterval = interval === IntervalEnum.Auto ? autoInterval.interval_unit : interval;\n        const timeIntervalValue = interval === IntervalEnum.Auto ? autoInterval.interval_value : 1;\n        const indexesStatement = getIndexesStatement(currentIndexes, tableFields, searchValue);\n        const payload: any = {\n            catalog: 'internal',\n            database: currentDatabase,\n            table: currentTable,\n            timeField: currentTimeField,\n            startDate: currentDate[0]?.format(FORMAT_DATE),\n            endDate: (currentDate[1] as Dayjs).format(FORMAT_DATE),\n            cluster: '',\n            data_filters: [],\n            sort: 'DESC',\n            interval: timeInterval,\n            interval_value: timeIntervalValue,\n            search_type: searchType,\n            indexes: indexesStatement,\n        };\n\n        if (dataFilter.length > 0) {\n            payload.data_filters = dataFilter;\n        }\n\n        if (searchType === 'Lucene') {\n            try {\n                const luceneWhere = await buildLuceneWhereClause();\n                if (luceneWhere) {\n                    payload.lucene_where = luceneWhere;\n                }\n            } catch (error) {\n                setLoading(prev => ({ ...prev, getTableDataCharts: false }));\n                setTableDataCharts([]);\n                console.error('Lucene query build failed', error);\n                return;\n            }\n        }\n\n        if (searchValue && searchType !== 'Lucene') {\n            payload.search_value = searchType === 'Search' ? encodeBase64(searchValue) : searchValue;\n        }\n\n        getTableDataChartsService({\n            selectdbDS,\n            ...payload,\n        }).subscribe({\n            next: ({ data, ok }: any) => {\n                setLoading(prev => ({ ...prev, getTableDataCharts: false }));\n                if (!ok) {\n                    return;\n                }\n                const frame = toDataFrame(data.results.getTableDataCharts.frames[0]);\n                const times = Array.from(frame?.fields[0]?.values || []);\n                const values = Array.from(frame?.fields[1]?.values || []);\n                if (!times.length || !values.length) {\n                    setTableDataCharts([]);\n                    return;\n                }\n                const tableDataCharts = times.map((item: any, index: number) => ({\n                    TT: item,\n                    'sum(cnt)': values[index],\n                }));\n                const chartsData = getChartsData(tableDataCharts, currentDate as [Dayjs, Dayjs]);\n                setTableDataCharts(chartsData);\n            },\n            error: (err: any) => {\n                setLoading(prev => ({ ...prev, getTableDataCharts: false }));\n                console.log('Fetch Error', err);\n            },\n        });\n    }, [\n        buildLuceneWhereClause,\n        currentDate,\n        currentDatabase,\n        currentIndexes,\n        currentTable,\n        currentTimeField,\n        dataFilter,\n        interval,\n        searchType,\n        searchValue,\n        selectdbDS,\n        setLoading,\n        setTableDataCharts,\n        tableFields,\n    ]);\n\n    const getTopData = useCallback(async () => {\n        if (!currentTable || !currentDatabase || !selectdbDS) {\n            return;\n        }\n        const indexesStatement = getIndexesStatement(currentIndexes, tableFields, searchValue);\n        const payload: any = {\n            catalog: currentCatalog,\n            database: currentDatabase,\n            table: currentTable,\n            timeField: currentTimeField,\n            startDate: currentDate[0]?.format(FORMAT_DATE),\n            endDate: (currentDate[1] as Dayjs).format(FORMAT_DATE),\n            cluster: '',\n            sort: 'DESC',\n            search_type: searchType,\n            indexes: '',\n            page: page,\n            page_size: 500,\n        };\n\n        if (searchType === 'Search') {\n            payload.indexes_statement = indexesStatement;\n        }\n        payload.data_filters = dataFilter.length > 0 ? dataFilter : [];\n\n        if (searchValue && searchType !== 'Lucene') {\n            payload.search_value = searchType === 'Search' ? encodeBase64(searchValue) : searchValue;\n        }\n\n        if (searchType === 'Lucene') {\n            try {\n                const luceneWhere = await buildLuceneWhereClause();\n                if (luceneWhere) {\n                    payload.lucene_where = luceneWhere;\n                }\n            } catch (error) {\n                console.error('Lucene query build failed', error);\n                setTopData([]);\n                return;\n            }\n        }\n\n        getTopDataService({\n            selectdbDS,\n            ...payload,\n        }).subscribe({\n            next: ({ data, ok }: any) => {\n                if (!ok) {\n                    return;\n                }\n                const frames = data?.results?.getTableTopData?.frames;\n                if (!frames || !frames[0]) {\n                    setTopData([]);\n                    return;\n                }\n                const rowsData = convertColumnToRowViaFieldsType(frames[0], tableFields);\n                setTopData(rowsData);\n            },\n            error: (err: any) => {\n                console.log('Fetch Error', err);\n                setTopData([]);\n            },\n        });\n    }, [\n        buildLuceneWhereClause,\n        currentCatalog,\n        currentDate,\n        currentDatabase,\n        currentIndexes,\n        currentTable,\n        currentTimeField,\n        dataFilter,\n        page,\n        searchType,\n        searchValue,\n        selectdbDS,\n        setTopData,\n        tableFields,\n    ]);\n\n    const getTableDataCount = useCallback(async () => {\n        if (!currentTable || !currentDatabase || !selectdbDS) {\n            return;\n        }\n        const autoInterval = getAutoInterval(currentDate as any);\n        const timeInterval = interval === IntervalEnum.Auto ? autoInterval.interval_unit : interval;\n        const timeIntervalValue = interval === IntervalEnum.Auto ? autoInterval.interval_value : 1;\n        const indexesStatement = getIndexesStatement(currentIndexes, tableFields, searchValue);\n        const payload: any = {\n            catalog: 'internal',\n            database: currentDatabase,\n            table: currentTable,\n            timeField: currentTimeField,\n            startDate: currentDate[0]?.format(FORMAT_DATE),\n            endDate: (currentDate[1] as Dayjs).format(FORMAT_DATE),\n            cluster: '',\n            sort: 'DESC',\n            interval: timeInterval,\n            data_filters: [],\n            interval_value: timeIntervalValue,\n            search_type: searchType,\n            indexes: indexesStatement,\n        };\n\n        if (dataFilter.length > 0) {\n            payload.data_filters = dataFilter;\n        }\n\n        if (searchType === 'Lucene') {\n            try {\n                const luceneWhere = await buildLuceneWhereClause();\n                if (luceneWhere) {\n                    payload.lucene_where = luceneWhere;\n                }\n            } catch (error) {\n                console.error('Lucene query build failed', error);\n                setTableTotalCount(0);\n                return;\n            }\n        }\n\n        if (searchValue && searchType !== 'Lucene') {\n            payload.search_value = searchType === 'Search' ? encodeBase64(searchValue) : searchValue;\n        }\n\n        getTableDataCountService({\n            selectdbDS,\n            ...payload,\n        }).subscribe({\n            next: ({ data, ok }: any) => {\n                if (!ok) {\n                    return;\n                }\n                const frame = toDataFrame(data.results.getTableCountData.frames[0]);\n                const totalCount = frame.fields[0]?.values[0] as number;\n                if (!totalCount) {\n                    setTableTotalCount(0);\n                    return;\n                }\n                setTableTotalCount(totalCount);\n            },\n            error: (err: any) => {\n                console.log('Fetch Error', err);\n            },\n        });\n    }, [\n        buildLuceneWhereClause,\n        currentDate,\n        currentDatabase,\n        currentIndexes,\n        currentTable,\n        currentTimeField,\n        dataFilter,\n        interval,\n        searchType,\n        searchValue,\n        selectdbDS,\n        setTableTotalCount,\n        tableFields,\n    ]);\n\n    const getTraceData = useCallback(\n        (trace_id: string) => {\n            const indexesStatement = getIndexesStatement(currentIndexes, tableFields, searchValue);\n            const payload: any = {\n                catalog: currentCatalog,\n                database: currentDatabase,\n                table: currentTable || 'otel_traces',\n                timeField: currentTimeField,\n                startDate: currentDate[0]?.format(FORMAT_DATE),\n                endDate: (currentDate[1] as Dayjs).format(FORMAT_DATE),\n                cluster: '',\n                sort: 'DESC',\n                search_type: searchType,\n                indexes: '',\n                page: page,\n                page_size: pageSize,\n                trace_id,\n            };\n\n            if (searchType === 'Search') {\n                payload.indexes_statement = indexesStatement;\n            }\n            payload.data_filters = dataFilter.length > 0 ? dataFilter : [];\n\n            if (searchValue) {\n                payload.search_value = encodeBase64(searchValue);\n            }\n\n            getTableDataTraceService({\n                selectdbDS,\n                ...payload,\n            }).subscribe({\n                next: ({ data, ok }: any) => {\n                    if (!ok) {\n                        return;\n                    }\n                    const formattedData = formatTracesResData(data.results.getTableDataTrace.frames[0]);\n                    setTraceData(formattedData);\n                },\n                error: (err: any) => {\n                    console.log('Fetch Error', err);\n                },\n            });\n        },\n        [\n            currentCatalog,\n            currentDate,\n            currentDatabase,\n            currentIndexes,\n            currentTable,\n            currentTimeField,\n            dataFilter,\n            page,\n            pageSize,\n            searchType,\n            searchValue,\n            selectdbDS,\n            setTraceData,\n            tableFields,\n        ],\n    );\n\n    const clearData = useCallback(() => {\n        setTableDataCharts([]);\n        setTableTotalCount(0);\n        setTableData([]);\n        setTopData([]);\n    }, [setTableData, setTableDataCharts, setTableTotalCount, setTopData]);\n\n    const refreshData = useCallback(\n        ({ skipPageReset = false }: RefreshOptions = {}) => {\n            if (!skipPageReset) {\n                setPage(1);\n            }\n            if (!currentTimeField) {\n                clearData();\n                return;\n            }\n            void getTableDataCharts();\n            void getTableDataCount();\n            void getTableData();\n            void getTopData();\n        },\n        [\n            clearData,\n            currentTimeField,\n            getTableData,\n            getTableDataCharts,\n            getTableDataCount,\n            getTopData,\n            setPage,\n        ],\n    );\n\n    const handleQuerying = useCallback(() => {\n        if (!currentTimeField) {\n            clearData();\n            return;\n        }\n        refreshData();\n    }, [clearData, currentTimeField, refreshData]);\n\n    useEffect(() => {\n        if (!currentTimeField) {\n            return;\n        }\n        void getTableData();\n        void getTopData();\n        void getTableDataCharts();\n        void getTableDataCount();\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [currentTimeField, page]);\n\n    useEffect(() => {\n        refreshData({ skipPageReset: false });\n        // eslint-disable-next-line react-hooks/exhaustive-deps\n    }, [currentDate, currentTimeField, dataFilter, interval]);\n\n    return {\n        loading,\n        onQuerying: handleQuerying,\n        getTraceData,\n    };\n}\n","import React from 'react';\nimport { css } from '@emotion/css';\nimport { PluginPage } from '@grafana/runtime';\nimport { LoadingBar, useTheme2 } from '@grafana/ui';\n\nimport DiscoverFilter from 'components/discover-filter';\nimport DiscoverSidebar from 'components/discover-sidebar';\nimport { DiscoverHistogram } from 'components/discover-histogram';\nimport DiscoverContent from 'components/discover-content';\nimport DiscoverHeader from '../components/discover-header';\nimport { testIds } from '../components/testIds';\nimport { useDiscoverData } from './PageDiscover/useDiscoverData';\n\nexport default function PageDiscover() {\n    const theme = useTheme2();\n    const { loading, onQuerying, getTraceData } = useDiscoverData();\n\n    return (\n        <div\n            className={css`\n                & > div > div {\n                    background-color: ${theme.isDark ? '#111217' : '#F4F5F5'};\n                    padding: 0 1rem;\n                }\n            `}\n        >\n            <PluginPage pageNav={{ text: '' }}>\n                <div data-testid={testIds.pageTwo.container}>\n                    <DiscoverHeader onQuerying={onQuerying} loading={loading.getTableData || loading.getTableDataCharts} />\n                    <DiscoverFilter />\n                </div>\n                <section\n                    className={css`\n                        display: grid;\n                        grid-template-columns: 2fr 8fr;\n                        grid-template-rows: 1fr;\n                        grid-template-areas: 'sidebar content';\n                        padding-top: 0.5rem;\n                        gap: 0.5rem;\n                    `}\n                >\n                    <div\n                        style={{\n                            height: 'calc(100vh - 210px)',\n                        }}\n                    >\n                        <DiscoverSidebar />\n                    </div>\n                    <div\n                        className={css`\n                            grid-area: content;\n                            display: flex;\n                            flex-direction: column;\n                            overflow: auto;\n                            height: calc(100vh - 210px);\n                            background-color: ${theme.isDark ? 'rgb(24, 27, 31)' : '#FFF'};\n                            position: relative;\n                            padding: 16px 0;\n                        `}\n                    >\n                        <div style={{ position: 'absolute', top: 0, width: '100%' }}>{loading.getTableDataCharts && <LoadingBar width={100} />}</div>\n                        <DiscoverHistogram />\n                        <div\n                            className={css`\n                                margin-top: 24px;\n                            `}\n                        >\n                            <DiscoverContent getTraceData={getTraceData} fetchNextPage={() => {}} />\n                        </div>\n                    </div>\n                </section>\n            </PluginPage>\n        </div>\n    );\n}\n","export const testIds = {\n  appConfig: {\n    apiKey: 'data-testid ac-api-key',\n    apiUrl: 'data-testid ac-api-url',\n    submit: 'data-testid ac-submit-form',\n  },\n  pageOne: {\n    container: 'data-testid pg-one-container',\n    navigateToFour: 'data-testid navigate-to-four',\n  },\n  pageTwo: {\n    container: 'data-testid pg-two-container',\n  },\n  pageThree: {\n    container: 'data-testid pg-three-container',\n  },\n  pageFour: {\n    container: 'data-testid pg-four-container',\n    navigateBack: 'data-testid navigate-back',\n  },\n};\n"],"names":["css","styled","DiscoverFilterWrapper","div","containerStyle","rowStyle","colStyle","footerStyle","useAtom","useAtomValue","React","nanoid","Select","InlineField","InlineFieldRow","InlineSwitch","Button","Input","Field","tableFieldsAtom","dataFilterAtom","tableFieldValuesAtom","OPERATORS","Controller","useForm","FilterContent","onHide","dataFilterValue","errors","tableFields","dataFilter","setDataFilter","tableFieldValue","control","handleSubmit","watch","register","formState","defaultValues","field","label","fieldName","value","operator","minValue","Array","isArray","maxValue","showLabel","getValue","isNaN","onSubmit","formValues","current","find","f","id","newValue","newItem","updated","map","renderFiledComponent","console","log","currentOperator","className","invalid","error","message","required","list","datalist","item","idx","option","key","name","rules","render","isMulti","options","placeholder","onChange","selected","s","filter","includes","form","op","variant","onClick","e","preventDefault","type","useRef","useState","useTranslation","locationAtom","getFilterSQL","Badge","Icon","IconButton","Toggletip","useTheme2","DiscoverFilter","open","setOpen","dataFilterOpen","setDataFilterOpen","discoverFilterRef","t","_loc","setLoc","theme","ref","isDark","index","toString","show","onOpen","onClose","closeButton","content","placement","text","span","data_filters","prev","searchParams","set","JSON","stringify","color","tooltip","style","marginLeft","FIELD_TYPES","icon","complex","getFieldIcon","columnType","currentColumnType","some","val","toLocaleUpperCase","clsx","twMerge","cn","inputs","Progress","get","topDataAtom","tableTotalCountAtom","isComplexType","countValueDistribution","jsonArray","valueCountMap","Map","forEach","obj","undefined","result","times","valueStr","TopData","topData","tableTotalCount","canDisplayTopData","Type","toUpperCase","res","Object","entries","sort","a","b","count","small","length","toFixed","size","width","height","percent","status","showInfo","stopPropagation","FieldItem","props","children","colors","background","secondary","primary","onAdd","onRemove","searchableAtom","aggregatableAtom","fieldTypeAtom","AGGREGATABLE","SEARCHABLE","RadioButtonGroup","searchable","setSearchable","aggregatable","setAggregatable","fieldType","setFieldType","selectedFieldsAtom","indexesAtom","AggregatableEnum","getFieldType","SearchableEnum","FieldTypeEnum","CollapsableSection","DiscoverSidebar","selectedFields","setSelectedFields","_setSearchable","_setAggregatable","_setFieldType","searchValue","setSearchValue","indexes","filteredFields","ANY","YES","NO","hasSelectedFields","availableFields","filed","handleAdd","handleRemove","findIndex","splice","target","isOpen","fill","fullWidth","ReactECharts","useSetAtom","useEffect","dayjs","IntervalEnum","TIME_INTERVALS","getAutoInterval","FORMAT_DATE","translationDateIntervalType","currentDateAtom","discoverCurrentAtom","activeShortcutAtom","tableDataChartsAtom","intervalAtom","pageSizeAtom","pageAtom","timeRangeAtom","DiscoverHistogram","currentDate","setCurrentDate","ReactEChartsInstance","discoverCurrent","setDiscoverCurrent","setActiveItem","tableDataCharts","process","env","NODE_ENV","debugLabel","interval_value","setInterval_value","interval","setInterval","_timeRange","setTimeRange","_pageSize","setPageSize","setPage","v","timeInterval","Auto","base","Date","oneDay","data","Math","random","i","now","push","round","title","subtext","left","top","grid","right","bottom","containLabel","xAxis","axisLabel","fontSize","fontStyle","fontWeight","axisLine","lineStyle","axisTick","toolbox","brush","xAxisIndex","yAxis","nameTextStyle","align","padding","splitLine","trigger","axisPointer","borderWidth","backgroundColor","formatter","params","html","series","barWidth","animation","chart","handler","areas","startIndex","endIndex","coordRange","interval_unit","chartsEndDate","add","date","timeRange","from","format","to","raw","getEchartsInstance","dispatchAction","command","ele","brushOption","brushType","on","off","replace","selectdbInterval","Fragment","flexRender","getCoreRowModel","getExpandedRowModel","useReactTable","EmptySearchResult","SDCollapsibleTable","columns","renderSubComponent","getRowCanExpand","table","thead","getHeaderGroups","headerGroup","tr","headers","header","th","colSpan","isLight","isPlaceholder","column","columnDef","getContext","tbody","getRowModel","rows","row","original","getIsExpanded","getVisibleCells","cell","td","HoverStyle","ColumnStyleWrapper","ContentTableActions","fieldValue","hasField","filterValue","display","justifyContent","SELECTDB_THEME","SELECTDB_THEME_LIGHT","ContentItem","surroundingDataFilterAtom","SurroundingContentItem","surroundingDataFilter","setSurroundingDataFilter","SurroundingLogsActions","getSurroundingData","getSurroundingDataLoading","time","timeFieldPageSize","tips","aria-label","SurroundingDiscoverFilter","getQueryTableResultSQL","indexesStatement","indexes_statement","statement","database","search_type","timeField","startDate","endDate","reduce","curr","addSqlFilter","search_value","lucene_where","page_size","page","getQueryTableChartsSQL","getQueryTableResultCountSQL","getSurroundingSQL","orderSymbol","pageSize","valueString","transformedFieldName","transformFieldPath","sql","fieldPath","parts","split","slice","part","join","getBackendSrv","getTableDataService","payload","selectdbDS","rest","QueryTableResultSQL","response","fetch","url","method","queries","refId","datasource","uid","rawSql","credentials","getTableDataChartsService","QueryTableChartsSQL","getTopDataService","getTableDataCountService","QueryTableResultCountSQL","getSurroundingDataService","surroundingSQL","SurroundingContentTableActions","JsonView","useMemo","useRequest","LoadingBar","Tab","TabContent","TabsBar","selectedRowAtom","currentTimeFieldAtom","currentClusterAtom","currentTableAtom","currentCatalogAtom","currentDatabaseAtom","surroundingTableDataAtom","selectedDatasourceAtom","afterCountAtom","afterTimeAtom","afterTimeFieldPageSizeAtom","beforeCountAtom","beforeTimeAtom","beforeTimeFieldPageSizeAtom","surroundingSelectedFieldsAtom","sortBy","lastValueFrom","convertColumnToRow","formatTimestampToDateTime","generateTableDataUID","SurroundingLogs","selectedRow","currentTimeField","selectedSurroundingFields","setSelectedSurroundingFields","fields","setFields","currentCluster","currentTable","currentCatalog","currentDatabase","surroundingTableData","setSurroundingTableData","beforeCount","setBeforeCount","afterCount","setAfterCount","beforeTimeFieldPageSize","setBeforeTimeFieldPageSize","afterTimeFieldPageSize","setAfterTimeFieldPageSize","beforeTime","setBeforeTime","afterTime","setAfterTime","state","updateState","active","loading","getAfterSurroundingDataLoading","run","getAfterSurroundingData","getQueryParams","manual","onSuccess","ok","rowsData","results","frames","generateSurroundingResult","_original","catalog","cluster","getBeforeSurroundingDataLoading","getBeforeSurroundingData","unshift","scrollToSelectedRow","selectedElement","document","getElementById","scrollIntoView","block","behavior","initLoading","prevTimeParams","afterTimeParams","Promise","all","refreshDeps","rowsData1","rowsData2","result1","result2","selectedResult","rowsDataWithUid","setTimeout","onError","err","_source","_uid","renderBeforeLoadingBar","renderAfterLoadingBar","subTableData","keys","tab","onChangeTab","counter","tableRowStyle","shortenTextAfterLength","indentWidth","displayDataTypes","enableClipboard","sortedResult","_sourceResult","itemSource","highlightValue","dynamicColumns","accessorKey","getCanExpand","getToggleExpandedHandler","createMarkup","__html","dangerouslySetInnerHTML","cursor","marginTop","position","setTimeFieldPageSize","overflow","Drawer","Pagination","tableDataAtom","AntButton","TraceDetail","DiscoverContent","fetchNextPage","getTraceData","tableData","_setTableData","setSelectedRow","_setPageSize","drawerOpen","setDrawerOpen","surroundingLogsOpen","setSurroundingLogsOpen","_fieldKeyBg","setFieldKeyBg","useCallback","openTraceDrawer","traceId","handleClick","link","closest","getAttribute","currentPage","numberOfPages","ceil","onNavigate","toPage","trace_id","traceTable","DiscoverHeaderSearch","DiscoverHeaderTimeSelect","CascaderStyle","currentIndexAtom","disabledOptionsAtom","searchTypeAtom","searchValueAtom","selectedIndexesAtom","MultiSelect","SearchType","searchType","setSearchType","disabledOptions","setSelectedIndexes","currentIndex","setCurrentIndex","searchMode","disabled","DropdownQueryType","actionMeta","selectedIndexes","selectedValue","marginRight","SQLSearch","onQuerying","Lucene","DataSourcePicker","getDataSourceSrv","timeFieldsAtom","searchFocusAtom","datasourcesAtom","databasesAtom","tablesAtom","getLatestTime","isValidTimeFieldType","TimeRangeInput","getDatabases","getFieldsService","getIndexesService","getTablesService","toDataFrame","DiscoverHeader","setIndexes","setTableFields","timeFields","setTimeFields","_currentDate","searchFocus","activeItem","_setActiveItem","selectedDatasource","setSelectedDatasource","setCurrentTable","databases","setDatabases","tables","setTables","_datasources","setDataSource","setDisabledOptions","datasources","getList","subscription","subscribe","next","resp","frame","values","unsubscribe","getFields","selectedTable","fieldTypes","getIndexes","columnNames","indexesTypes","tableIndexes","columnName","noDefault","ds","selectedDatabase","getTables","flex","selectdbTimeFiled","isReversed","start","toDate","end","latestTime","latestStartTime","latestEndTime","encodeSpecialTokens","query","decodeSpecialTokens","IMPLICIT_FIELD","CLICK_HOUSE_JSON_NUMBER_TYPES","RAW_FLAG","escapeString","escaped","formatDate","pad","input","padStart","year","getFullYear","month","getMonth","day","getDate","hours","getHours","minutes","getMinutes","seconds","getSeconds","escapePrimitive","isRaw","String","escapeIdentifier","identifier","escapeValue","Boolean","__raw","SqlString","JSDataType","convertCHDataTypeToJSType","dataType","startsWith","convertCHTypeToPrimitiveJSType","jsType","Error","splitAndTrimWithBracket","parenCount","squareCount","inSingleQuote","inDoubleQuote","cur","c","trimString","trim","getColumn","getColumnMetadata","getInvertedIndexColumns","EnglishSerializer","translateField","eq","term","isNegatedField","isNotNull","gte","lte","lt","gt","fieldSearch","prefixWildcard","suffixWildcard","isPhrase","range","SQLSerializer","columnJSON","found","propertyType","supportsTextSearch","sourceColumn","getColumnForField","NOT_FOUND_QUERY","Bool","normTerm","toLowerCase","parseInt","Number","string","searchTarget","number","attemptToParseNumber","parseFloat","tokenizeTerm","termHasSeperators","match","isImplicitField","implicitTargets","usePhrasePrefix","matchTerm","clauses","boolValue","clause","orClause","wrapped","hasSeperators","tokens","token","CustomSchemaSQLSerializerV2","fetchColumnMetadata","columnMetadataCache","has","resolved","connectionId","databaseName","tableName","datasourceType","normalizedType","legacyMetadataProvider","legacy","legacyError","loadInvertedIndexColumns","invertedIndexColumns","invertedIndexColumnsPromise","Set","columnHasInvertedIndex","buildColumnExpressionFromField","exactMatch","columnExpression","fieldPrefix","prefixMatch","fieldPostfix","valueType","columnExpressionJSON","nestedPaths","implicitColumnExpression","expressions","implicitFieldCandidates","acc","expression","extractFieldNamesFromExpression","candidate","candidateExpression","candidatePropertyType","candidateSupportsTextSearch","matches","metadata","lucene","parse","nodeTerm","node","serializer","nodeTermInstance","prefix","quoted","substring","inclusive","rangedTerm","term_min","term_max","serialize","ast","binaryAST","parenthesized","leftOnlyAST","genWhereSQL","genEnglishExplanation","parsedQ","warn","SearchQueryBuilder","setSerializer","getSerializer","genSearchQuery","searchQ","and","condition","conditions","build","searchQuery","getWhereSQLViaLucene","trimmedQuery","whereSQL","useLuceneWhereClause","candidateFieldNames","rawName","test","implicitExpressions","discoverLoadingAtom","tableTracesDataAtom","getTableDataTraceService","encodeBase64","getChartsData","convertColumnToRowViaFieldsType","generateHighlightedResults","formatTracesResData","getIndexesStatement","useDiscoverData","setTableData","setTableDataCharts","currentIndexes","setTopData","setTableTotalCount","setTraceData","setLoading","buildLuceneWhereClause","getTableData","luceneWhere","resData","getTableDataCharts","autoInterval","timeIntervalValue","TT","chartsData","getTopData","getTableTopData","getTableDataCount","getTableCountData","totalCount","formattedData","getTableDataTrace","clearData","refreshData","skipPageReset","handleQuerying","PluginPage","testIds","PageDiscover","pageNav","data-testid","pageTwo","container","section","appConfig","apiKey","apiUrl","submit","pageOne","navigateToFour","pageThree","pageFour","navigateBack"],"sourceRoot":""}